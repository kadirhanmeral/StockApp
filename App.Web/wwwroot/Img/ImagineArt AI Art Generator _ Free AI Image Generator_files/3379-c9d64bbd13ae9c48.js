"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3379],{85169:function(e,t,n){n.d(t,{F:function(){return h},f:function(){return c}});var r=n(2265);let o=["light","dark"],i="(prefers-color-scheme: dark)",a="undefined"==typeof window,s=(0,r.createContext)(void 0),l={setTheme:e=>{},themes:[]},h=()=>{var e;return null!==(e=(0,r.useContext)(s))&&void 0!==e?e:l},c=e=>(0,r.useContext)(s)?r.createElement(r.Fragment,null,e.children):r.createElement(u,e),d=["light","dark"],u=({forcedTheme:e,disableTransitionOnChange:t=!1,enableSystem:n=!0,enableColorScheme:a=!0,storageKey:l="theme",themes:h=d,defaultTheme:c=n?"system":"light",attribute:u="data-theme",value:w,children:v,nonce:y})=>{let[C,x]=(0,r.useState)(()=>f(l,c)),[b,D]=(0,r.useState)(()=>f(l)),E=w?Object.values(w):h,R=(0,r.useCallback)(e=>{let r=e;if(!r)return;"system"===e&&n&&(r=m());let i=w?w[r]:r,s=t?g():null,l=document.documentElement;if("class"===u?(l.classList.remove(...E),i&&l.classList.add(i)):i?l.setAttribute(u,i):l.removeAttribute(u),a){let e=o.includes(c)?c:null,t=o.includes(r)?r:e;l.style.colorScheme=t}null==s||s()},[]),O=(0,r.useCallback)(e=>{x(e);try{localStorage.setItem(l,e)}catch(e){}},[e]),P=(0,r.useCallback)(t=>{D(m(t)),"system"===C&&n&&!e&&R("system")},[C,e]);(0,r.useEffect)(()=>{let e=window.matchMedia(i);return e.addListener(P),P(e),()=>e.removeListener(P)},[P]),(0,r.useEffect)(()=>{let e=e=>{e.key===l&&O(e.newValue||c)};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[O]),(0,r.useEffect)(()=>{R(null!=e?e:C)},[e,C]);let S=(0,r.useMemo)(()=>({theme:C,setTheme:O,forcedTheme:e,resolvedTheme:"system"===C?b:C,themes:n?[...h,"system"]:h,systemTheme:n?b:void 0}),[C,O,e,b,n,h]);return r.createElement(s.Provider,{value:S},r.createElement(p,{forcedTheme:e,disableTransitionOnChange:t,enableSystem:n,enableColorScheme:a,storageKey:l,themes:h,defaultTheme:c,attribute:u,value:w,children:v,attrs:E,nonce:y}),v)},p=(0,r.memo)(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:a,enableColorScheme:s,defaultTheme:l,value:h,attrs:c,nonce:d})=>{let u="system"===l,p="class"===n?`var d=document.documentElement,c=d.classList;c.remove(${c.map(e=>`'${e}'`).join(",")});`:`var d=document.documentElement,n='${n}',s='setAttribute';`,f=s?o.includes(l)&&l?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${l}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",g=(e,t=!1,r=!0)=>{let i=h?h[e]:e,a=t?e+"|| ''":`'${i}'`,l="";return s&&r&&!t&&o.includes(e)&&(l+=`d.style.colorScheme = '${e}';`),"class"===n?l+=t||i?`c.add(${a})`:"null":i&&(l+=`d[s](n,${a})`),l},m=e?`!function(){${p}${g(e)}}()`:a?`!function(){try{${p}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${i}',m=window.matchMedia(t);if(m.media!==t||m.matches){${g("dark")}}else{${g("light")}}}else if(e){${h?`var x=${JSON.stringify(h)};`:""}${g(h?"x[e]":"e",!0)}}${u?"":"else{"+g(l,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${p}var e=localStorage.getItem('${t}');if(e){${h?`var x=${JSON.stringify(h)};`:""}${g(h?"x[e]":"e",!0)}}else{${g(l,!1,!1)};}${f}}catch(t){}}();`;return r.createElement("script",{nonce:d,dangerouslySetInnerHTML:{__html:m}})},()=>!0),f=(e,t)=>{let n;if(!a){try{n=localStorage.getItem(e)||void 0}catch(e){}return n||t}},g=()=>{let e=document.createElement("style");return e.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},m=e=>(e||(e=window.matchMedia(i)),e.matches?"dark":"light")},6584:function(e,t,n){n.d(t,{z:function(){return i}});var r=n(2265),o=n(88703);let i=function(e){let t=(0,o.E)(e);return r.useCallback(function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.current(...n)},[t])}},61463:function(e,t,n){n.d(t,{e:function(){return i}});var r=n(2265),o=n(54462);let i=(e,t)=>{o.O.isServer?(0,r.useEffect)(e,t):(0,r.useLayoutEffect)(e,t)}},88703:function(e,t,n){n.d(t,{E:function(){return i}});var r=n(2265),o=n(61463);function i(e){let t=(0,r.useRef)(e);return(0,o.e)(()=>{t.current=e},[e]),t}},33856:function(e,t,n){n.d(t,{H:function(){return a}});var r,o=n(2265),i=n(54462);function a(){let e;let t=(e="undefined"==typeof document,(0,(r||(r=n.t(o,2))).useSyncExternalStore)(()=>()=>{},()=>!1,()=>!e)),[a,s]=o.useState(i.O.isHandoffComplete);return a&&!1===i.O.isHandoffComplete&&s(!1),o.useEffect(()=>{!0!==a&&s(!0)},[a]),o.useEffect(()=>i.O.handoff(),[]),!t&&a}},41469:function(e,t,n){n.d(t,{T:function(){return s},h:function(){return a}});var r=n(2265),o=n(6584);let i=Symbol();function a(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return Object.assign(e,{[i]:t})}function s(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let a=(0,r.useRef)(t);(0,r.useEffect)(()=>{a.current=t},[t]);let s=(0,o.z)(e=>{for(let t of a.current)null!=t&&("function"==typeof t?t(e):t.current=e)});return t.every(e=>null==e||(null==e?void 0:e[i]))?void 0:s}},54462:function(e,t,n){n.d(t,{O:function(){return s}});var r=Object.defineProperty,o=(e,t,n)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,i=(e,t,n)=>(o(e,"symbol"!=typeof t?t+"":t,n),n);class a{set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return"server"===this.current}get isClient(){return"client"===this.current}detect(){return"undefined"==typeof window||"undefined"==typeof document?"server":"client"}handoff(){"pending"===this.handoffState&&(this.handoffState="complete")}get isHandoffComplete(){return"complete"===this.handoffState}constructor(){i(this,"current",this.detect()),i(this,"handoffState","pending"),i(this,"currentId",0)}}let s=new a},5583:function(e,t,n){n.d(t,{E:function(){return r}});function r(e,t){for(var n=arguments.length,o=Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];if(e in t){let n=t[e];return"function"==typeof n?n(...o):n}let a=Error('Tried to handle "'.concat(e,'" but there is no handler defined. Only defined handlers are: ').concat(Object.keys(t).map(e=>'"'.concat(e,'"')).join(", "),"."));throw Error.captureStackTrace&&Error.captureStackTrace(a,r),a}},28043:function(e,t,n){n.d(t,{Y:function(){return r}});function r(e){"function"==typeof queueMicrotask?queueMicrotask(e):Promise.resolve().then(e).catch(e=>setTimeout(()=>{throw e}))}},91498:function(e,t,n){n.d(t,{r:function(){return o}});var r=n(54462);function o(e){return r.O.isServer?null:e instanceof Node?e.ownerDocument:null!=e&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}},72642:function(e,t,n){let r,o;n.d(t,{AN:function(){return l},yV:function(){return f},sY:function(){return c}});var i=n(2265);function a(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.from(new Set(t.flatMap(e=>"string"==typeof e?e.split(" "):[]))).filter(Boolean).join(" ")}var s=n(5583),l=((r=l||{})[r.None=0]="None",r[r.RenderStrategy=1]="RenderStrategy",r[r.Static=2]="Static",r),h=((o=h||{})[o.Unmount=0]="Unmount",o[o.Hidden=1]="Hidden",o);function c(e){let{ourProps:t,theirProps:n,slot:r,defaultTag:o,features:i,visible:a=!0,name:l,mergeRefs:h}=e;h=null!=h?h:u;let c=p(n,t);if(a)return d(c,r,o,l,h);let f=null!=i?i:0;if(2&f){let{static:e=!1,...t}=c;if(e)return d(t,r,o,l,h)}if(1&f){let{unmount:e=!0,...t}=c;return(0,s.E)(e?0:1,{0:()=>null,1:()=>d({...t,hidden:!0,style:{display:"none"}},r,o,l,h)})}return d(c,r,o,l,h)}function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,{as:s=n,children:l,refName:h="ref",...c}=m(e,["unmount","static"]),d=void 0!==e.ref?{[h]:e.ref}:{},u="function"==typeof l?l(t):l;"className"in c&&c.className&&"function"==typeof c.className&&(c.className=c.className(t));let f={};if(t){let e=!1,n=[];for(let[r,o]of Object.entries(t))"boolean"==typeof o&&(e=!0),!0===o&&n.push(r);e&&(f["data-headlessui-state"]=n.join(" "))}if(s===i.Fragment&&Object.keys(g(c)).length>0){if(!(0,i.isValidElement)(u)||Array.isArray(u)&&u.length>1)throw Error(['Passing props on "Fragment"!',"","The current component <".concat(r,' /> is rendering a "Fragment".'),"However we need to passthrough the following props:",Object.keys(c).map(e=>"  - ".concat(e)).join("\n"),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(e=>"  - ".concat(e)).join("\n")].join("\n"));let e=u.props,t="function"==typeof(null==e?void 0:e.className)?function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return a(null==e?void 0:e.className(...n),c.className)}:a(null==e?void 0:e.className,c.className);return(0,i.cloneElement)(u,Object.assign({},p(u.props,g(m(c,["ref"]))),f,d,{ref:o(u.ref,d.ref)},t?{className:t}:{}))}return(0,i.createElement)(s,Object.assign({},m(c,["ref"]),s!==i.Fragment&&d,s!==i.Fragment&&f),u)}function u(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.every(e=>null==e)?void 0:e=>{for(let n of t)null!=n&&("function"==typeof n?n(e):n.current=e)}}function p(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return{};if(1===t.length)return t[0];let r={},o={};for(let e of t)for(let t in e)t.startsWith("on")&&"function"==typeof e[t]?(null!=o[t]||(o[t]=[]),o[t].push(e[t])):r[t]=e[t];if(r.disabled||r["aria-disabled"])return Object.assign(r,Object.fromEntries(Object.keys(o).map(e=>[e,void 0])));for(let e in o)Object.assign(r,{[e](t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(let n of o[e]){if((t instanceof Event||(null==t?void 0:t.nativeEvent)instanceof Event)&&t.defaultPrevented)return;n(t,...r)}}});return r}function f(e){var t;return Object.assign((0,i.forwardRef)(e),{displayName:null!=(t=e.displayName)?t:e.name})}function g(e){let t=Object.assign({},e);for(let e in t)void 0===t[e]&&delete t[e];return t}function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object.assign({},e);for(let e of t)e in n&&delete n[e];return n}},61485:function(e,t,n){n.d(t,{VY:function(){return j},ee:function(){return T},fC:function(){return K},h_:function(){return X},x8:function(){return L},xz:function(){return F}});var r=n(22988),o=n(2265),i=n(78149),a=n(1584),s=n(98324),l=n(53938),h=n(20589),c=n(80467),d=n(53201),u=n(25510),p=n(56935),f=n(31383),g=n(25171),m=n(71538),w=n(91715),v=n(78369),y=n(9219);let C="Popover",[x,b]=(0,s.b)(C,[u.D7]),D=(0,u.D7)(),[E,R]=x(C),O=(0,o.forwardRef)((e,t)=>{let{__scopePopover:n,...i}=e,a=R("PopoverAnchor",n),s=D(n),{onCustomAnchorAdd:l,onCustomAnchorRemove:h}=a;return(0,o.useEffect)(()=>(l(),()=>h()),[l,h]),(0,o.createElement)(u.ee,(0,r.Z)({},s,i,{ref:t}))}),P=(0,o.forwardRef)((e,t)=>{let{__scopePopover:n,...s}=e,l=R("PopoverTrigger",n),h=D(n),c=(0,a.e)(t,l.triggerRef),d=(0,o.createElement)(g.WV.button,(0,r.Z)({type:"button","aria-haspopup":"dialog","aria-expanded":l.open,"aria-controls":l.contentId,"data-state":Y(l.open)},s,{ref:c,onClick:(0,i.M)(e.onClick,l.onOpenToggle)}));return l.hasCustomAnchor?d:(0,o.createElement)(u.ee,(0,r.Z)({asChild:!0},h),d)}),S="PopoverPortal",[_,k]=x(S,{forceMount:void 0}),M="PopoverContent",$=(0,o.forwardRef)((e,t)=>{let n=k(M,e.__scopePopover),{forceMount:i=n.forceMount,...a}=e,s=R(M,e.__scopePopover);return(0,o.createElement)(f.z,{present:i||s.open},s.modal?(0,o.createElement)(A,(0,r.Z)({},a,{ref:t})):(0,o.createElement)(N,(0,r.Z)({},a,{ref:t})))}),A=(0,o.forwardRef)((e,t)=>{let n=R(M,e.__scopePopover),s=(0,o.useRef)(null),l=(0,a.e)(t,s),h=(0,o.useRef)(!1);return(0,o.useEffect)(()=>{let e=s.current;if(e)return(0,v.Ry)(e)},[]),(0,o.createElement)(y.Z,{as:m.g7,allowPinchZoom:!0},(0,o.createElement)(H,(0,r.Z)({},e,{ref:l,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,i.M)(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),h.current||null===(t=n.triggerRef.current)||void 0===t||t.focus()}),onPointerDownOutside:(0,i.M)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,r=2===t.button||n;h.current=r},{checkForDefaultPrevented:!1}),onFocusOutside:(0,i.M)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})))}),N=(0,o.forwardRef)((e,t)=>{let n=R(M,e.__scopePopover),i=(0,o.useRef)(!1),a=(0,o.useRef)(!1);return(0,o.createElement)(H,(0,r.Z)({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var r,o;null===(r=e.onCloseAutoFocus)||void 0===r||r.call(e,t),t.defaultPrevented||(i.current||null===(o=n.triggerRef.current)||void 0===o||o.focus(),t.preventDefault()),i.current=!1,a.current=!1},onInteractOutside:t=>{var r,o;null===(r=e.onInteractOutside)||void 0===r||r.call(e,t),t.defaultPrevented||(i.current=!0,"pointerdown"!==t.detail.originalEvent.type||(a.current=!0));let s=t.target;(null===(o=n.triggerRef.current)||void 0===o?void 0:o.contains(s))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&a.current&&t.preventDefault()}}))}),H=(0,o.forwardRef)((e,t)=>{let{__scopePopover:n,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:s,disableOutsidePointerEvents:d,onEscapeKeyDown:p,onPointerDownOutside:f,onFocusOutside:g,onInteractOutside:m,...w}=e,v=R(M,n),y=D(n);return(0,h.EW)(),(0,o.createElement)(c.M,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:a,onUnmountAutoFocus:s},(0,o.createElement)(l.XB,{asChild:!0,disableOutsidePointerEvents:d,onInteractOutside:m,onEscapeKeyDown:p,onPointerDownOutside:f,onFocusOutside:g,onDismiss:()=>v.onOpenChange(!1)},(0,o.createElement)(u.VY,(0,r.Z)({"data-state":Y(v.open),role:"dialog",id:v.contentId},y,w,{ref:t,style:{...w.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}}))))}),I=(0,o.forwardRef)((e,t)=>{let{__scopePopover:n,...a}=e,s=R("PopoverClose",n);return(0,o.createElement)(g.WV.button,(0,r.Z)({type:"button"},a,{ref:t,onClick:(0,i.M)(e.onClick,()=>s.onOpenChange(!1))}))});function Y(e){return e?"open":"closed"}let K=e=>{let{__scopePopover:t,children:n,open:r,defaultOpen:i,onOpenChange:a,modal:s=!1}=e,l=D(t),h=(0,o.useRef)(null),[c,p]=(0,o.useState)(!1),[f=!1,g]=(0,w.T)({prop:r,defaultProp:i,onChange:a});return(0,o.createElement)(u.fC,l,(0,o.createElement)(E,{scope:t,contentId:(0,d.M)(),triggerRef:h,open:f,onOpenChange:g,onOpenToggle:(0,o.useCallback)(()=>g(e=>!e),[g]),hasCustomAnchor:c,onCustomAnchorAdd:(0,o.useCallback)(()=>p(!0),[]),onCustomAnchorRemove:(0,o.useCallback)(()=>p(!1),[]),modal:s},n))},T=O,F=P,X=e=>{let{__scopePopover:t,forceMount:n,children:r,container:i}=e,a=R(S,t);return(0,o.createElement)(_,{scope:t,forceMount:n},(0,o.createElement)(f.z,{present:n||a.open},(0,o.createElement)(p.h,{asChild:!0,container:i},r)))},j=$,L=I},46505:function(e,t,n){n.d(t,{YG:function(){return l},ZP:function(){return m},_H:function(){return h}});var r=n(2265);let o={x:0,y:0,width:0,height:0,unit:"px"},i=(e,t,n)=>Math.min(Math.max(e,t),n),a=(...e)=>e.filter(e=>e&&"string"==typeof e).join(" "),s=(e,t)=>e===t||e.width===t.width&&e.height===t.height&&e.x===t.x&&e.y===t.y&&e.unit===t.unit;function l(e,t,n,r){let o=d(e,n,r);return e.width&&(o.height=o.width/t),e.height&&(o.width=o.height*t),o.y+o.height>r&&(o.height=r-o.y,o.width=o.height*t),o.x+o.width>n&&(o.width=n-o.x,o.height=o.width/t),"%"===e.unit?c(o,n,r):o}function h(e,t,n){let r=d(e,t,n);return r.x=(t-r.width)/2,r.y=(n-r.height)/2,"%"===e.unit?c(r,t,n):r}function c(e,t,n){return"%"===e.unit?{...o,...e,unit:"%"}:{unit:"%",x:e.x?e.x/t*100:0,y:e.y?e.y/n*100:0,width:e.width?e.width/t*100:0,height:e.height?e.height/n*100:0}}function d(e,t,n){return e.unit?"px"===e.unit?{...o,...e,unit:"px"}:{unit:"px",x:e.x?e.x*t/100:0,y:e.y?e.y*n/100:0,width:e.width?e.width*t/100:0,height:e.height?e.height*n/100:0}:{...o,...e,unit:"px"}}function u(e,t,n,r,o,i=0,a=0,s=r,l=o){let h={...e},c=Math.min(i,r),d=Math.min(a,o),u=Math.min(s,r),p=Math.min(l,o);t&&(t>1?(d=(c=a?a*t:c)/t,u=s*t):(c=(d=i?i/t:d)*t,p=l/t)),h.y<0&&(h.height=Math.max(h.height+h.y,d),h.y=0),h.x<0&&(h.width=Math.max(h.width+h.x,c),h.x=0);let f=r-(h.x+h.width);f<0&&(h.x=Math.min(h.x,r-c),h.width+=f);let g=o-(h.y+h.height);if(g<0&&(h.y=Math.min(h.y,o-d),h.height+=g),h.width<c&&(("sw"===n||"nw"==n)&&(h.x-=c-h.width),h.width=c),h.height<d&&(("nw"===n||"ne"==n)&&(h.y-=d-h.height),h.height=d),h.width>u&&(("sw"===n||"nw"==n)&&(h.x-=u-h.width),h.width=u),h.height>p&&(("nw"===n||"ne"==n)&&(h.y-=p-h.height),h.height=p),t){let e=h.width/h.height;if(e<t){let e=Math.max(h.width/t,d);("nw"===n||"ne"==n)&&(h.y-=e-h.height),h.height=e}else if(e>t){let e=Math.max(h.height*t,c);("sw"===n||"nw"==n)&&(h.x-=e-h.width),h.width=e}}return h}let p={capture:!0,passive:!1},f=0,g=class e extends r.PureComponent{constructor(){super(...arguments),this.docMoveBound=!1,this.mouseDownOnCrop=!1,this.dragStarted=!1,this.evData={startClientX:0,startClientY:0,startCropX:0,startCropY:0,clientX:0,clientY:0,isResize:!0},this.componentRef=(0,r.createRef)(),this.mediaRef=(0,r.createRef)(),this.initChangeCalled=!1,this.instanceId=`rc-${f++}`,this.state={cropIsActive:!1,newCropIsBeingDrawn:!1},this.onCropPointerDown=e=>{let{crop:t,disabled:n}=this.props,r=this.getBox();if(!t)return;let o=d(t,r.width,r.height);if(n)return;e.cancelable&&e.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});let i=e.target.dataset.ord,a=e.clientX,s=e.clientY,l=o.x,h=o.y;if(i){let t=e.clientX-r.x,n=e.clientY-r.y,c=0,d=0;"ne"===i||"e"==i?(c=t-(o.x+o.width),d=n-o.y,l=o.x,h=o.y+o.height):"se"===i||"s"===i?(c=t-(o.x+o.width),d=n-(o.y+o.height),l=o.x,h=o.y):"sw"===i||"w"==i?(c=t-o.x,d=n-(o.y+o.height),l=o.x+o.width,h=o.y):("nw"===i||"n"==i)&&(c=t-o.x,d=n-o.y,l=o.x+o.width,h=o.y+o.height),a=l+r.x+c,s=h+r.y+d}this.evData={startClientX:a,startClientY:s,startCropX:l,startCropY:h,clientX:e.clientX,clientY:e.clientY,isResize:!!i,ord:i},this.mouseDownOnCrop=!0,this.setState({cropIsActive:!0})},this.onComponentPointerDown=e=>{let{crop:t,disabled:n,locked:r,keepSelection:o,onChange:i}=this.props,a=this.getBox();if(n||r||o&&t)return;e.cancelable&&e.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});let s=e.clientX-a.x,l=e.clientY-a.y,h={unit:"px",x:s,y:l,width:0,height:0};this.evData={startClientX:e.clientX,startClientY:e.clientY,startCropX:s,startCropY:l,clientX:e.clientX,clientY:e.clientY,isResize:!0},this.mouseDownOnCrop=!0,i(d(h,a.width,a.height),c(h,a.width,a.height)),this.setState({cropIsActive:!0,newCropIsBeingDrawn:!0})},this.onDocPointerMove=e=>{let t;let{crop:n,disabled:r,onChange:o,onDragStart:i}=this.props,a=this.getBox();if(r||!n||!this.mouseDownOnCrop)return;e.cancelable&&e.preventDefault(),this.dragStarted||(this.dragStarted=!0,i&&i(e));let{evData:l}=this;l.clientX=e.clientX,l.clientY=e.clientY,s(n,t=l.isResize?this.resizeCrop():this.dragCrop())||o(d(t,a.width,a.height),c(t,a.width,a.height))},this.onComponentKeyDown=t=>{let{crop:n,disabled:r,onChange:o,onComplete:a}=this.props;if(r)return;let s=t.key,l=!1;if(!n)return;let h=this.getBox(),u=this.makePixelCrop(h),p=(navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)?e.nudgeStepLarge:t.shiftKey?e.nudgeStepMedium:e.nudgeStep;if("ArrowLeft"===s?(u.x-=p,l=!0):"ArrowRight"===s?(u.x+=p,l=!0):"ArrowUp"===s?(u.y-=p,l=!0):"ArrowDown"===s&&(u.y+=p,l=!0),l){t.cancelable&&t.preventDefault(),u.x=i(u.x,0,h.width-u.width),u.y=i(u.y,0,h.height-u.height);let e=d(u,h.width,h.height),n=c(u,h.width,h.height);o(e,n),a&&a(e,n)}},this.onHandlerKeyDown=(t,n)=>{let{aspect:r=0,crop:o,disabled:i,minWidth:a=0,minHeight:l=0,maxWidth:h,maxHeight:p,onChange:f,onComplete:g}=this.props,m=this.getBox();if(i||!o||"ArrowUp"!==t.key&&"ArrowDown"!==t.key&&"ArrowLeft"!==t.key&&"ArrowRight"!==t.key)return;t.stopPropagation(),t.preventDefault();let w=(navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)?e.nudgeStepLarge:t.shiftKey?e.nudgeStepMedium:e.nudgeStep,v=u(function(e,t,n,r){let o={...e};return"ArrowLeft"===t?"nw"===r?(o.x-=n,o.y-=n,o.width+=n,o.height+=n):"w"===r?(o.x-=n,o.width+=n):"sw"===r?(o.x-=n,o.width+=n,o.height+=n):"ne"===r?(o.y+=n,o.width-=n,o.height-=n):"e"===r?o.width-=n:"se"===r&&(o.width-=n,o.height-=n):"ArrowRight"===t&&("nw"===r?(o.x+=n,o.y+=n,o.width-=n,o.height-=n):"w"===r?(o.x+=n,o.width-=n):"sw"===r?(o.x+=n,o.width-=n,o.height-=n):"ne"===r?(o.y-=n,o.width+=n,o.height+=n):"e"===r?o.width+=n:"se"===r&&(o.width+=n,o.height+=n)),"ArrowUp"===t?"nw"===r?(o.x-=n,o.y-=n,o.width+=n,o.height+=n):"n"===r?(o.y-=n,o.height+=n):"ne"===r?(o.y-=n,o.width+=n,o.height+=n):"sw"===r?(o.x+=n,o.width-=n,o.height-=n):"s"===r?o.height-=n:"se"===r&&(o.width-=n,o.height-=n):"ArrowDown"===t&&("nw"===r?(o.x+=n,o.y+=n,o.width-=n,o.height-=n):"n"===r?(o.y+=n,o.height-=n):"ne"===r?(o.y+=n,o.width-=n,o.height-=n):"sw"===r?(o.x-=n,o.width+=n,o.height+=n):"s"===r?o.height+=n:"se"===r&&(o.width+=n,o.height+=n)),o}(d(o,m.width,m.height),t.key,w,n),r,n,m.width,m.height,a,l,h,p);if(!s(o,v)){let e=c(v,m.width,m.height);f(v,e),g&&g(v,e)}},this.onDocPointerDone=e=>{let{crop:t,disabled:n,onComplete:r,onDragEnd:o}=this.props,i=this.getBox();this.unbindDocMove(),!(n||!t)&&this.mouseDownOnCrop&&(this.mouseDownOnCrop=!1,this.dragStarted=!1,o&&o(e),r&&r(d(t,i.width,i.height),c(t,i.width,i.height)),this.setState({cropIsActive:!1,newCropIsBeingDrawn:!1}))},this.onDragFocus=()=>{var e;null==(e=this.componentRef.current)||e.scrollTo(0,0)}}get document(){return document}getBox(){let e=this.mediaRef.current;if(!e)return{x:0,y:0,width:0,height:0};let{x:t,y:n,width:r,height:o}=e.getBoundingClientRect();return{x:t,y:n,width:r,height:o}}componentDidUpdate(e){let{crop:t,onComplete:n}=this.props;if(n&&!e.crop&&t){let{width:e,height:r}=this.getBox();e&&r&&n(d(t,e,r),c(t,e,r))}}componentWillUnmount(){this.resizeObserver&&this.resizeObserver.disconnect()}bindDocMove(){this.docMoveBound||(this.document.addEventListener("pointermove",this.onDocPointerMove,p),this.document.addEventListener("pointerup",this.onDocPointerDone,p),this.document.addEventListener("pointercancel",this.onDocPointerDone,p),this.docMoveBound=!0)}unbindDocMove(){this.docMoveBound&&(this.document.removeEventListener("pointermove",this.onDocPointerMove,p),this.document.removeEventListener("pointerup",this.onDocPointerDone,p),this.document.removeEventListener("pointercancel",this.onDocPointerDone,p),this.docMoveBound=!1)}getCropStyle(){let{crop:e}=this.props;if(e)return{top:`${e.y}${e.unit}`,left:`${e.x}${e.unit}`,width:`${e.width}${e.unit}`,height:`${e.height}${e.unit}`}}dragCrop(){let{evData:e}=this,t=this.getBox(),n=this.makePixelCrop(t),r=e.clientX-e.startClientX,o=e.clientY-e.startClientY;return n.x=i(e.startCropX+r,0,t.width-n.width),n.y=i(e.startCropY+o,0,t.height-n.height),n}getPointRegion(e,t,n,r){let o;let{evData:i}=this,a=i.clientX-e.x,s=i.clientY-e.y;return o=r&&t?"nw"===t||"n"===t||"ne"===t:s<i.startCropY,(n&&t?"nw"===t||"w"===t||"sw"===t:a<i.startCropX)?o?"nw":"sw":o?"ne":"se"}resolveMinDimensions(e,t,n=0,r=0){let o=Math.min(n,e.width),i=Math.min(r,e.height);return t&&(o||i)?t>1?o?[o,o/t]:[i*t,i]:i?[i*t,i]:[o,o/t]:[o,i]}resizeCrop(){let{evData:t}=this,{aspect:n=0,maxWidth:r,maxHeight:o}=this.props,a=this.getBox(),[s,l]=this.resolveMinDimensions(a,n,this.props.minWidth,this.props.minHeight),h=this.makePixelCrop(a),c=this.getPointRegion(a,t.ord,s,l),d=t.ord||c,p=t.clientX-t.startClientX,f=t.clientY-t.startClientY;(s&&"nw"===d||"w"===d||"sw"===d)&&(p=Math.min(p,-s)),(l&&"nw"===d||"n"===d||"ne"===d)&&(f=Math.min(f,-l));let g={unit:"px",x:0,y:0,width:0,height:0};"ne"===c?(g.x=t.startCropX,g.width=p,n?g.height=g.width/n:g.height=Math.abs(f),g.y=t.startCropY-g.height):"se"===c?(g.x=t.startCropX,g.y=t.startCropY,g.width=p,n?g.height=g.width/n:g.height=f):"sw"===c?(g.x=t.startCropX+p,g.y=t.startCropY,g.width=Math.abs(p),n?g.height=g.width/n:g.height=f):"nw"===c&&(g.x=t.startCropX+p,g.width=Math.abs(p),n?(g.height=g.width/n,g.y=t.startCropY-g.height):(g.height=Math.abs(f),g.y=t.startCropY+f));let m=u(g,n,c,a.width,a.height,s,l,r,o);return n||e.xyOrds.indexOf(d)>-1?h=m:e.xOrds.indexOf(d)>-1?(h.x=m.x,h.width=m.width):e.yOrds.indexOf(d)>-1&&(h.y=m.y,h.height=m.height),h.x=i(h.x,0,a.width-h.width),h.y=i(h.y,0,a.height-h.height),h}renderCropSelection(){let{ariaLabels:t=e.defaultProps.ariaLabels,disabled:n,locked:o,renderSelectionAddon:i,ruleOfThirds:a,crop:s}=this.props,l=this.getCropStyle();if(s)return r.createElement("div",{style:l,className:"ReactCrop__crop-selection",onPointerDown:this.onCropPointerDown,"aria-label":t.cropArea,tabIndex:0,onKeyDown:this.onComponentKeyDown,role:"group"},!n&&!o&&r.createElement("div",{className:"ReactCrop__drag-elements",onFocus:this.onDragFocus},r.createElement("div",{className:"ReactCrop__drag-bar ord-n","data-ord":"n"}),r.createElement("div",{className:"ReactCrop__drag-bar ord-e","data-ord":"e"}),r.createElement("div",{className:"ReactCrop__drag-bar ord-s","data-ord":"s"}),r.createElement("div",{className:"ReactCrop__drag-bar ord-w","data-ord":"w"}),r.createElement("div",{className:"ReactCrop__drag-handle ord-nw","data-ord":"nw",tabIndex:0,"aria-label":t.nwDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"nw"),role:"button"}),r.createElement("div",{className:"ReactCrop__drag-handle ord-n","data-ord":"n",tabIndex:0,"aria-label":t.nDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"n"),role:"button"}),r.createElement("div",{className:"ReactCrop__drag-handle ord-ne","data-ord":"ne",tabIndex:0,"aria-label":t.neDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"ne"),role:"button"}),r.createElement("div",{className:"ReactCrop__drag-handle ord-e","data-ord":"e",tabIndex:0,"aria-label":t.eDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"e"),role:"button"}),r.createElement("div",{className:"ReactCrop__drag-handle ord-se","data-ord":"se",tabIndex:0,"aria-label":t.seDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"se"),role:"button"}),r.createElement("div",{className:"ReactCrop__drag-handle ord-s","data-ord":"s",tabIndex:0,"aria-label":t.sDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"s"),role:"button"}),r.createElement("div",{className:"ReactCrop__drag-handle ord-sw","data-ord":"sw",tabIndex:0,"aria-label":t.swDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"sw"),role:"button"}),r.createElement("div",{className:"ReactCrop__drag-handle ord-w","data-ord":"w",tabIndex:0,"aria-label":t.wDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"w"),role:"button"})),i&&r.createElement("div",{className:"ReactCrop__selection-addon",onPointerDown:e=>e.stopPropagation()},i(this.state)),a&&r.createElement(r.Fragment,null,r.createElement("div",{className:"ReactCrop__rule-of-thirds-hz"}),r.createElement("div",{className:"ReactCrop__rule-of-thirds-vt"})))}makePixelCrop(e){return d({...o,...this.props.crop||{}},e.width,e.height)}render(){let{aspect:e,children:t,circularCrop:n,className:o,crop:i,disabled:s,locked:l,style:h,ruleOfThirds:c}=this.props,{cropIsActive:d,newCropIsBeingDrawn:u}=this.state,p=i?this.renderCropSelection():null,f=a("ReactCrop",o,d&&"ReactCrop--active",s&&"ReactCrop--disabled",l&&"ReactCrop--locked",u&&"ReactCrop--new-crop",i&&e&&"ReactCrop--fixed-aspect",i&&n&&"ReactCrop--circular-crop",i&&c&&"ReactCrop--rule-of-thirds",!this.dragStarted&&i&&!i.width&&!i.height&&"ReactCrop--invisible-crop",n&&"ReactCrop--no-animate");return r.createElement("div",{ref:this.componentRef,className:f,style:h},r.createElement("div",{ref:this.mediaRef,className:"ReactCrop__child-wrapper",onPointerDown:this.onComponentPointerDown},t),i?r.createElement("svg",{className:"ReactCrop__crop-mask",width:"100%",height:"100%"},r.createElement("defs",null,r.createElement("mask",{id:`hole-${this.instanceId}`},r.createElement("rect",{width:"100%",height:"100%",fill:"white"}),n?r.createElement("ellipse",{cx:`${i.x+i.width/2}${i.unit}`,cy:`${i.y+i.height/2}${i.unit}`,rx:`${i.width/2}${i.unit}`,ry:`${i.height/2}${i.unit}`,fill:"black"}):r.createElement("rect",{x:`${i.x}${i.unit}`,y:`${i.y}${i.unit}`,width:`${i.width}${i.unit}`,height:`${i.height}${i.unit}`,fill:"black"}))),r.createElement("rect",{fill:"black",fillOpacity:.5,width:"100%",height:"100%",mask:`url(#hole-${this.instanceId})`})):void 0,p)}};g.xOrds=["e","w"],g.yOrds=["n","s"],g.xyOrds=["nw","ne","se","sw"],g.nudgeStep=1,g.nudgeStepMedium=10,g.nudgeStepLarge=100,g.defaultProps={ariaLabels:{cropArea:"Use the arrow keys to move the crop selection area",nwDragHandle:"Use the arrow keys to move the north west drag handle to change the crop selection area",nDragHandle:"Use the up and down arrow keys to move the north drag handle to change the crop selection area",neDragHandle:"Use the arrow keys to move the north east drag handle to change the crop selection area",eDragHandle:"Use the up and down arrow keys to move the east drag handle to change the crop selection area",seDragHandle:"Use the arrow keys to move the south east drag handle to change the crop selection area",sDragHandle:"Use the up and down arrow keys to move the south drag handle to change the crop selection area",swDragHandle:"Use the arrow keys to move the south west drag handle to change the crop selection area",wDragHandle:"Use the up and down arrow keys to move the west drag handle to change the crop selection area"}};let m=g}}]);