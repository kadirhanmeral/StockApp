(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{58925:function(e,t,r){Promise.resolve().then(r.t.bind(r,84080,23)),Promise.resolve().then(r.t.bind(r,74014,23)),Promise.resolve().then(r.t.bind(r,31391,23)),Promise.resolve().then(r.t.bind(r,19593,23)),Promise.resolve().then(r.t.bind(r,19837,23)),Promise.resolve().then(r.t.bind(r,52339,23)),Promise.resolve().then(r.bind(r,2300)),Promise.resolve().then(r.t.bind(r,53054,23)),Promise.resolve().then(r.bind(r,88394)),Promise.resolve().then(r.bind(r,95702)),Promise.resolve().then(r.t.bind(r,31183,23))},2300:function(e,t,r){"use strict";r.d(t,{GlobalModals:function(){return ed}});var a=r(57437),n=r(16463),s=r(91606),i=r(2265),o=r(81980),l=r.n(o),c=r(80732),u=r(98090),d=r(45715),p=r(96994),m=r(85951),_=r(81750),g=r(14125),h=r(76015),f=r(81149),x=r(95401),v=r(82442),E=r(78958),y=r(8792);let N=e=>{let{title:t,code:r,description:n,icon:s,onCopy:i}=e,{copy:o}=(0,E.m)();return(0,a.jsxs)("div",{className:"flex gap-3 rounded-2xl bg-neutral-20 p-3 dark:bg-neutral-0/5",children:[(0,a.jsx)("div",{className:"size-[34px] min-h-[34px] min-w-[34px] overflow-hidden rounded-xl",children:(0,a.jsx)("img",{src:s,alt:"icon",className:"h-full w-full object-cover"})}),(0,a.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"text-sm text-neutral-900 dark:text-neutral-0",children:t}),(0,a.jsxs)("div",{className:"flex items-center gap-1 rounded-md bg-neutral-40 px-1.5 py-0.5 dark:bg-neutral-700",children:[(0,a.jsx)("div",{className:"text-xs font-medium text-neutral-900 dark:text-neutral-0",children:r}),(0,a.jsx)(x.WithGenericTooltip,{content:"Copy",children:(0,a.jsx)("button",{type:"button",onClick:()=>{v.Am.success("Copied to clipboard"),i(),o(r)},"aria-label":"Tooltip Button",children:(0,a.jsx)(y.TI,{className:"size-3.5 stroke-[1.75] text-neutral-900 dark:text-neutral-0"})})})]})]}),(0,a.jsx)("div",{className:"text-sm text-neutral-600 dark:text-neutral-40",children:n})]})]})},T=e=>{let{title:t,cta:r,sub_content:n,description:s,redirectHandler:i,onCopy:o}=e;return(0,a.jsxs)("div",{className:"flex w-full max-w-[401px] flex-col gap-[18px]",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2 text-center",children:[(0,a.jsx)("h3",{className:"text-[32px] font-medium leading-[44px] text-neutral-900 dark:text-neutral-0",style:{fontFamily:"announcement-modal-title"},children:t}),(0,a.jsx)("p",{className:"text-sm text-neutral-600 dark:text-neutral-40",children:s})]}),(0,a.jsx)("div",{className:"flex flex-col gap-1",children:n.map((e,t)=>(0,a.jsx)(N,{...e,onCopy:o},t))})]}),(0,a.jsx)(f.z,{variant:"ai",onClick:()=>{var e;i(null!==(e=r.redirect_to)&&void 0!==e?e:"")},children:r.text})]})},b=e=>{var t,r,n;let{announcementModal:s,redirectHandler:o,onCloseBtnClick:f}=e,[x,v]=(0,i.useState)(!1),{page:E,source:y}=(0,p.V)(),{aggregator:N}=(0,m.O)(),b=(0,_.m8)()(e=>e.subscription),{stripeSubscription:w,isSubscriptionActive:k}=(0,g.L)(b),P=null==w?void 0:null===(r=w.StripePrice)||void 0===r?void 0:null===(t=r.StripeProduct)||void 0===t?void 0:t.name,I=null==w?void 0:null===(n=w.StripePrice)||void 0===n?void 0:n.billingInterval,O=null==s?void 0:s.content,A={page_name:E,source:y,variant:d.x.DISCOUNT_POPUP,user_account_status:k?"Premium":"Free",user_plan:P,user_plan_period:I};return((0,i.useEffect)(()=>{var e,t,r;if(!s||!s.is_enabled)return;let a=null!==(e=s.max_shows)&&void 0!==e?e:1,n=null!==(t=s.key)&&void 0!==t?t:"announcement-modal",i=parseInt(null!==(r=localStorage.getItem(n))&&void 0!==r?r:"0",10);i>=a||(localStorage.setItem(n,(i+1).toString()),v(!0),Promise.all(s.content.titleFonts.map(e=>new FontFace("announcement-modal-title","url(".concat(e.url,")"),e.options).load())).then(e=>{e.forEach(e=>{var t;null===(t=document)||void 0===t||t.fonts.add(e)})}).catch(()=>{}))},[s,v]),O)?(0,a.jsx)(h.$E,{open:x,onOpenChange:v,children:(0,a.jsxs)(h.Yk,{className:"h-full max-h-[519px] w-full max-w-[789px] transition-colors duration-500",children:[(0,a.jsxs)(h.DQ,{className:"relative w-full flex-row gap-0 overflow-hidden rounded-[18px]",children:[s.is_confetti_enabled&&(0,a.jsx)(l(),{recycle:!1,gravity:.5}),(0,a.jsx)(h.Zh,{onClick:()=>{N.log(c.H.clevertap.click.withProperties({...A,trigger:u.U.CLOSE_POPUP})),f()}}),(0,a.jsx)("div",{className:"h-full min-w-[280px] bg-neutral-20 dark:bg-neutral-800",children:(0,a.jsx)("img",{src:O.primary_announcement_img,alt:"primary",className:"h-full w-full object-cover"})}),(0,a.jsx)("div",{className:"grid h-full w-full place-items-center p-6",children:(0,a.jsx)(T,{...O,redirectHandler:e=>{N.log(c.H.clevertap.click.withProperties({...A,trigger:u.U.SHOP_NOW})),v(!1),o(e)},onCopy:()=>{N.log(c.H.clevertap.click.withProperties({...A,trigger:u.U.COPY_CODE}))}})})]}),O.secondary_announcement_img&&(0,a.jsx)("div",{className:"absolute left-2 top-0 z-50 h-[100px] w-[95px] -translate-x-1/2 -translate-y-1/2 transform",children:(0,a.jsx)("img",{src:O.secondary_announcement_img,alt:"secondary",className:"h-full w-full object-cover"})})]})}):null};var w=r(42071),k=r(43664);let P=()=>((0,i.useEffect)(()=>{let e=()=>{v.Am.warning("There seems to be a problem with the connection.",{renderCta:e=>(0,a.jsx)(f.z,{...e,onClick:()=>{k.c.triggerEventUsingElementId(w.i.RELOAD_CANVAS),window.location.reload()},children:"Reload"}),duration:1e4})},t=()=>{v.Am.success("You are back online!")};return window.addEventListener("offline",e),window.addEventListener("online",t),()=>{window.removeEventListener("offline",e),window.removeEventListener("online",t)}},[]),null);var I=r(63218),O=r(83359),A=r(83649),S=r(54012),j=r(24528),R=r(29865),C=r(52247),L=r(12835),D=r(66648),H=r(8662);let U=e=>{let{onClick:t,isSelected:r,index:n}=e;return(0,a.jsx)("button",{id:"image-carousel-indicator-".concat(n),"aria-label":"Image#".concat(n),type:"button",onClick:t,className:(0,j.cn)("h-1.5 min-h-1.5 w-1.5 min-w-1.5 rounded-full bg-neutral-900 bg-opacity-[0.24] opacity-100 backdrop-blur-[6px] transition-all duration-500 dark:bg-neutral-0",{"w-3 min-w-3 bg-opacity-100":r})})},G=e=>{let{images:t,className:r="",currentImgIndex:n,onChange:s}=e;return(0,a.jsx)("div",{className:"h-full min-w-[280px] max-w-[280px] bg-neutral-20 dark:bg-neutral-800",children:(0,a.jsx)(H.lr,{showArrows:!1,useKeyboardArrows:!0,autoPlay:!0,interval:3e3,infiniteLoop:!0,showStatus:!1,showThumbs:!1,showIndicators:t.length>1,onChange:e=>{null==s||s(e)},renderIndicator:(e,t,r)=>(0,a.jsx)(U,{onClick:e,isSelected:t,index:r}),selectedItem:n,children:t.map((e,t)=>(0,a.jsx)("div",{className:"h-full w-full",children:(0,a.jsx)(D.default,{src:e,alt:"".concat(t),className:"".concat(r," h-full max-h-screen w-full object-contain"),width:280,height:280})},t))})})},M=[{src:"".concat(C.v.ASSETS_CDN,"assets/images/txt to art.png"),darkSrc:"".concat(C.v.ASSETS_CDN,"assets/images/txt to art dark.png"),content:{title:"Turn Text into Art",description:"Type a few words and instantly see them transformed into a captivating image.",Icon:L.UV}},{src:"".concat(C.v.ASSETS_CDN,"assets/images/image remix.png"),darkSrc:"".concat(C.v.ASSETS_CDN,"assets/images/image remix dark.png"),content:{title:"Remix Images with AI",description:"Combine your images with text prompts for endless creative possibilities.",Icon:L.zS}},{src:"".concat(C.v.ASSETS_CDN,"assets/images/templates.png"),darkSrc:"".concat(C.v.ASSETS_CDN,"assets/images/templates dark.png"),content:{title:"Limitless Design with Infinite Canvas",description:"Create stunning social media posts, posters, and more without space limitations.",Icon:L.OQ}}],F=M.map(e=>{let{src:t}=e;return t}),K=M.map(e=>{let{darkSrc:t}=e;return t}),V=()=>{let[e,t]=(0,i.useState)(0),r=M[e].content.Icon;return(0,a.jsxs)("div",{className:"relative h-full min-w-[280px] bg-neutral-20 dark:bg-neutral-800",children:[(0,a.jsx)("div",{className:"absolute inset-0 block dark:hidden",children:(0,a.jsx)(G,{currentImgIndex:e,onChange:t,images:F})}),(0,a.jsx)("div",{className:"absolute inset-0 hidden dark:block",children:(0,a.jsx)(G,{currentImgIndex:e,onChange:t,images:K})}),(0,a.jsxs)(R.S,{className:"absolute inset-x-0 bottom-[30px] z-50 mx-auto flex h-[116px] w-[256px] flex-col gap-2 p-2 dark:bg-neutral-700",children:[(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"grid size-8 place-items-center rounded-xl bg-neutral-30 dark:bg-neutral-600",children:(0,a.jsx)(r,{className:"size-4"})})}),(0,a.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,a.jsx)("h3",{className:"text-xs font-medium text-neutral-900 dark:text-neutral-0",children:M[e].content.title}),(0,a.jsx)("p",{className:"text-[11px] leading-[18px] text-neutral-600 dark:text-neutral-40",children:M[e].content.description})]})]})]})},z=()=>{let e=(0,S.k)(e=>e.isOpen),t=(0,S.k)(e=>e.setIsOpen),r=(0,s.ac)("(min-width: 1180px)");return(0,a.jsx)(O.$E,{open:e,onOpenChange:t,children:(0,a.jsxs)(O.Yk,{className:(0,j.cn)("h-full max-h-[600px] w-full overflow-hidden transition-colors duration-500",{"max-w-[1180px]":r,"max-w-[900px]":!r}),children:[(0,a.jsx)(O.Zh,{}),(0,a.jsxs)(O.DQ,{className:"w-full flex-row gap-0 overflow-hidden p-4",children:[r&&(0,a.jsx)(V,{}),(0,a.jsx)("div",{className:"h-full w-full p-6",children:(0,a.jsx)(A.m,{variant:"modal",revokeActionHandler:()=>{}})})]})]})})};var B=r(13304),X=r(99497),Y=r(87138),W=r(86759),Z=r(34124),Q=r(35273),$=r(75942),J=r(24030),q=r(8363);let ee=e=>{let{tokenItem:t}=e;return(0,a.jsxs)(X.ck,{className:"flex h-[68px] w-full cursor-pointer items-center justify-between rounded-2xl bg-neutral-20 px-4 py-3 transition-colors duration-500 hover:bg-neutral-30 dark:bg-neutral-800 dark:hover:bg-neutral-700",value:"".concat(t.stripePriceId),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(q.E9,{value:"".concat(t.stripePriceId)}),(0,a.jsxs)("div",{className:"flex flex-col text-left",children:[(0,a.jsxs)("p",{className:"font-semibold text-neutral-900 dark:text-neutral-0",children:[t.maxQuantity," Tokens"]}),(0,a.jsxs)("p",{className:"font-medium text-neutral-600 dark:text-neutral-60",children:[t.price/t.maxQuantity," USD / token"]})]})]}),(0,a.jsxs)("div",{className:"font-semibold text-neutral-900 dark:text-neutral-0",children:["$",t.price]})]})},et=()=>{var e,t,r,n,s,o;let{data:l,isLoading:h}=(0,$.sb)(),x=null==l?void 0:null===(t=l.result[0])||void 0===t?void 0:null===(e=t.StripePrice[0])||void 0===e?void 0:e.stripePriceId,[v,E]=(0,i.useState)(),y=(0,$.wN)(),N=(0,J.n)(e=>e.isOpen),T=(0,J.n)(e=>e.setIsOpen),{page:b,source:w}=(0,p.V)(),{aggregator:k}=(0,m.O)(),P=(0,_.m8)()(e=>e.subscription),{stripeSubscription:A,isSubscriptionActive:S}=(0,g.L)(P),j=null==A?void 0:null===(n=A.StripePrice)||void 0===n?void 0:null===(r=n.StripeProduct)||void 0===r?void 0:r.name,R=null==A?void 0:null===(s=A.StripePrice)||void 0===s?void 0:s.billingInterval,C=S?"Premium":"Free";return(0,i.useEffect)(()=>{E(x)},[x]),(0,a.jsx)(O.$E,{open:N,onOpenChange:T,children:(0,a.jsxs)(O.Yk,{className:"flex h-fit w-[409px] flex-col items-center justify-start gap-6 p-6 pt-11",children:[(0,a.jsx)(O.Zh,{}),(0,a.jsx)("div",{className:"grid min-h-[74px] min-w-[74px] place-items-center rounded-full bg-[linear-gradient(180deg,#9C4FFF_0%,#674FFF_100%)]",children:(0,a.jsx)(L.Nl,{className:"size-11 stroke-current stroke-[3] text-neutral-0 transition-colors duration-500"})}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 text-center",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-neutral-900 transition-colors duration-500 dark:text-neutral-0",children:"Top up your tokens"}),(0,a.jsx)("p",{className:"text-sm text-neutral-600 transition-colors duration-500 dark:text-neutral-40",children:"Running low on tokens? Purchase tokens on the go and add them to your existing subscription."})]}),(0,a.jsx)(q.Kl,{className:"flex max-h-[228px] w-full flex-col gap-3 overflow-hidden overflow-y-auto",value:v,onValueChange:E,children:h?Array.from({length:3}).map((e,t)=>(0,a.jsx)(W.A,{className:"h-[68px] w-full rounded-2xl"},t)):null==l?void 0:null===(o=l.result[0])||void 0===o?void 0:o.StripePrice.map(e=>(0,a.jsx)(ee,{tokenItem:e},e.id))}),(0,a.jsxs)("div",{className:"flex w-full flex-col gap-3",children:[(0,a.jsx)(f.z,{type:"button",variant:"primary",className:"w-full",size:"xl",disabled:h||y.isLoading,onClick:()=>{y.mutate(null!=v?v:"",{onSuccess:Q.R9,onError:Q.h_})},children:y.isLoading?(0,a.jsx)(Z.$,{className:"size-5"}):"Buy tokens"}),(0,a.jsx)(f.z,{type:"button",variant:"secondary",className:"w-full",size:"xl",disabled:y.isLoading,asChild:!0,children:(0,a.jsx)(B.x8,{asChild:!0,children:(0,a.jsx)(Y.default,{onClick:()=>{k.log(c.H.clevertap.click.withProperties({page_name:b,source:w,trigger:u.U.UPGRADE_PLAN_TOPUP,variant:d.x.TOPUP_TOKENS,user_account_status:C,user_plan:j,user_plan_period:R}))},href:I.H7.SUBSCRIPTION,children:"Upgrade Plan"})})})]})]})})};var er=r(6498),ea=r(54361),en=r(18431),es=r(76111);let ei="low-on-tokens-modal",eo=()=>{var e,t,r,n;let s=(0,_.m8)()(e=>e.subscription),{isModalOpen:o,setIsModalOpen:l}=(0,ea.d)(),c=(0,_.m8)()(e=>e.user),u=(null!==(r=null==s?void 0:null===(t=s.stripe)||void 0===t?void 0:null===(e=t.StripePrice.StripeProduct)||void 0===e?void 0:e.name)&&void 0!==r?r:"")===en.Sz.STANDARD,{data:d,isLoading:p}=(0,er.j)(),m=null!==(n=null==d?void 0:d.platformSpecificTotal)&&void 0!==n?n:0,h=!!c,{isSubscriptionActive:x}=(0,g.L)(s);return((0,i.useEffect)(()=>{h&&x&&!p&&m<=30&&"true"!==sessionStorage.getItem(ei)&&(l(!0),sessionStorage.setItem(ei,"true"))},[l,p,m,c,x,h]),h&&!p&&x)?(0,a.jsx)(O.$E,{open:o,onOpenChange:l,children:(0,a.jsxs)(O.Yk,{className:"flex h-fit w-[409px] flex-col items-center justify-start gap-6 p-6 pt-11",children:[(0,a.jsx)(O.Zh,{}),(0,a.jsx)("div",{className:"grid min-h-[74px] min-w-[74px] place-items-center rounded-full bg-[linear-gradient(180deg,#9C4FFF_0%,#674FFF_100%)]",children:(0,a.jsx)(L.Nl,{className:"size-11 stroke-current stroke-[3] text-neutral-0 transition-colors duration-500"})}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 text-center",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-neutral-900 transition-colors duration-500 dark:text-neutral-0",children:"Running low on tokens"}),(0,a.jsx)("p",{className:"text-sm text-neutral-600 transition-colors duration-500 dark:text-neutral-40",children:"Purchase tokens on the go and add them to your existing subscription."})]}),(0,a.jsxs)("div",{className:"flex w-full flex-col gap-3",children:[(0,a.jsx)(es.BuyMoreTokensModalCTA,{size:"xl",children:"Buy tokens"}),u&&(0,a.jsx)(f.z,{type:"button",variant:"secondary",className:"w-full",size:"xl",asChild:!0,children:(0,a.jsx)(B.x8,{asChild:!0,children:(0,a.jsx)(Y.default,{href:I.H7.SUBSCRIPTION,children:"Upgrade Plan"})})})]})]})}):null};var el=r(10733);let ec=[I.H7.STARTER],eu=e=>{for(let t=0;t<ec.length;t++)if(e.startsWith(ec[t]))return!1;return!0},ed=()=>{let e=(0,el.Td)()(e=>e.announcementModal),t=(0,_.m8)()(e=>e.user),r=(0,n.useRouter)(),i=eu((0,n.usePathname)()),o=(0,s.ac)("(max-width: 768px)");return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(et,{}),(0,a.jsx)(z,{}),(0,a.jsx)(eo,{}),(0,a.jsx)(P,{}),!!t&&!o&&i&&(0,a.jsx)(b,{onCloseBtnClick:()=>{k.c.triggerEventUsingElementId(w.i.ANNOUNCEMENT_POPUP_CLOSE)},announcementModal:e,redirectHandler:e=>{k.c.triggerEventUsingElementId(w.i.ANNOUNCEMENT_POPUP_CTA),r.push(e)}})]})}},88394:function(e,t,r){"use strict";r.d(t,{Initializer:function(){return B}});var a,n=r(57437),s=r(18735),i=r(14643),o=r(2265),l=r(75994),c=r(52247),u=r(43664),d=r(47802),p=r(82442),m=r(16463),_=r(63218),g=r(51864),h=r(72143),f=r(54795);async function x(e,t){let{requestOptions:r}=null!=e?e:{};return(null==e?void 0:e.throwOnError)===void 0||!1===e.throwOnError?h.p.get("".concat(f.TG.VIDEO_STATUS).concat(t?"/".concat(t):""),r,{throwOnError:!1}):h.p.get("".concat(f.TG.VIDEO_STATUS).concat(t?"/".concat(t):""),r,{throwOnError:!0})}var v=r(81750);(a||(a={})).VIDEO_GENERATED="VideoGenerated";let E=function(){let{shouldFetchVideoStatus:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,v.m8)()(e=>e.user),r=(0,m.usePathname)()!==_.H7.LIBRARY;return(0,g.useQuery)([a.VIDEO_GENERATED],()=>x({throwOnError:!0}),{refetchInterval:3e4,enabled:!!t&&e&&r,select:e=>e.data})};var y=r(19733),N=r(5882),T=r(81149);let b=()=>{let e=(0,m.useRouter)(),[t,r]=(0,o.useState)(),{shouldFetchVideoStatus:a,setShouldFetchVideoStatus:s}=(0,y.B)(),{data:i,isFetching:l}=E({shouldFetchVideoStatus:a});return(0,o.useEffect)(()=>{i&&s((0,N.B)(i.videos))},[i,s]),(0,o.useEffect)(()=>{i&&(t&&!l&&(0,N.z)(t,i)&&p.Am.success("Your video is Ready",{duration:4e3,renderCta:t=>(0,n.jsx)(T.z,{...t,onClick:()=>{e.push(_.H7.LIBRARY)},children:"View Now"})}),r(i))},[i,t,l,e]),null};var w=r(44785),k=r(89216),P=r(1576),I=r(18638),O=r(6498),A=r(31708),S=r(45019),j=r(36805);let R=async(e,t,r,a,n)=>{let s=t;if(!e.current){if(!t&&r){e.current=!0;let i=await (0,j.Pl)(null!=t?t:"",null!=r?r:"",null!=a?a:"");if(i)(0,j.Ml)({token:i.sessionToken,refreshToken:i.refreshToken,tokenExpiresIn:i.tokenExpiresIn,cookies:w.Z}),e.current=!1,s=i.sessionToken;else try{await (0,S.kS)()}catch(e){throw Error("Your session has expired. Please sign in again to continue using the application.")}finally{n()}}else if(!t&&!r)try{await (0,S.kS)()}catch(e){throw Error("Your session has expired. Please sign in again to continue using the application.")}finally{n()}}return s},C=[f.TG.IMAGE_BASED_REALTIME_GENERATION,f.TG.TEXT_BASED_REALTIME_GENERATION,f.TG.FREE_BACKGROUND_REMOVER,f.TG.VIDEO_STATUS,f.TG.VIDEO_DELETE],L=()=>{let e=(0,A.a)(),t=(0,o.useRef)(!1),{refetch:r}=(0,O.j)();return(0,o.useEffect)(()=>{let a=h.p.interceptors.request.use(async r=>{let a=new Headers(r.headers);if(a.set(I.I.X_PLATFORM,"".concat(k.K.WEB)),"true"===a.get(I.I.SKIP_REQUEST_INTERCEPTOR))return a.delete(I.I.SKIP_REQUEST_INTERCEPTOR),r.headers=a,r;t.current&&await (0,d.Ch)(()=>!t.current,500);let n=w.Z.get(P.R.TOKEN),s=w.Z.get(P.R.REFRESH_TOKEN),i=w.Z.get(P.R.TOKEN_EXPIRES_IN);return n=await R(t,n,s,i,e),a.set(I.I.AUTHORIZATION,"Bearer ".concat(n)),r.headers=a,r}),n=h.p.interceptors.response.use(e=>(C.some(t=>{var r;return null===(r=e.response.url)||void 0===r?void 0:r.includes(t)})||r(),e));return()=>{h.p.interceptors.request.eject(a),h.p.interceptors.response.eject(n)}},[]),null};var D=r(4921);let H=()=>{let e=(0,m.usePathname)(),t=(0,D.uy)(),r=(0,v.m8)()(e=>e.user),a=(0,A.a)();return(0,s._7)({onSuccess:e=>{let{credential:r}=e;if(!r){p.Am.error("One-tap credential not found");return}t.mutate({credential:r})},onError:()=>{a(),p.Am.error("One-tap failed")},disabled:!!r||e.startsWith(_.H7.FEATURES)||e.startsWith(_.H7.BLOGS),auto_select:!0,cancel_on_tap_outside:!1}),null},U=()=>{let e=(0,m.useSearchParams)();return(0,d.Pu)(e),null};var G=r(80732),M=r(88318),F=r(73359),K=r(85951),V=r(14125);let z=()=>{var e,t,r;let a=(0,m.useSearchParams)(),n=(0,v.m8)()(e=>e.user),{aggregator:s}=(0,K.O)(),i=(0,v.m8)()(e=>e.subscription),{stripeSubscription:l,isSubscriptionActive:c}=(0,V.L)(i),u=c?"Premium":"Free",d=null==l?void 0:null===(t=l.StripePrice)||void 0===t?void 0:null===(e=t.StripeProduct)||void 0===e?void 0:e.name,p=null==l?void 0:null===(r=l.StripePrice)||void 0===r?void 0:r.billingInterval,_=(0,m.usePathname)(),{data:g}=(0,O.j)(),h=null==g?void 0:g.platformSpecificTotal;return(0,o.useEffect)(()=>{if(n&&null!=h){if("true"===a.get(F.u.IS_SIGN_UP)){let e={signup_channel:"Web",name:null==n?void 0:n.name,email:null==n?void 0:n.email,distinct_id:null==n?void 0:n.id,tokens_remaining:h};s.log(G.H.mixpanel.signup_completed.withProperties(e)),s.log(G.H.clevertap.signup_completed.withProperties({...e,page_name:M.I[_],user_account_status:u,user_plan:d,user_plan_period:p}))}else if("false"===a.get(F.u.IS_SIGN_UP)){let e={email:null==n?void 0:n.email,distinct_id:null==n?void 0:n.id,page_name:M.I[_],user_account_status:u,user_plan:d,user_plan_period:p};s.log(G.H.mixpanel.login_completed.withProperties({...e,signup_channel:"Web"})),s.log(G.H.clevertap.login_completed.withProperties({...e,name:null==n?void 0:n.name}))}}},[h,n,s,a,d,p,u,_]),null},B=e=>{let{children:t}=e;return(0,o.useEffect)(()=>{u.c.initAnalytics(),(0,i.MD)(),(0,d.g_)(),"serviceWorker"in navigator&&navigator.serviceWorker.register("/scripts/sw.js",{scope:"/scripts/"})},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.rg,{clientId:c.v.GOOGLE_CLIENT_ID,children:(0,n.jsx)(H,{})}),(0,n.jsx)(l.wm,{}),(0,n.jsx)(U,{}),(0,n.jsx)(L,{}),(0,n.jsx)(z,{}),(0,n.jsx)(b,{}),t,(0,n.jsx)(p.Z3,{})]})}},95702:function(e,t,r){"use strict";r.d(t,{Providers:function(){return U}});var a,n,s=r(57437),i=r(47808),o=r(27079),l=r(81171),c=r(2265),u=r(52247),d=r(96994),p=r(8443),m=r(85951),_=r(42911),g=r(22291),h=r.n(g),f=r(86835);let x={gtmId:u.v.GTM_ID};class v extends f.n{log(e){let{properties:t}=e;this.manager.dataLayer({dataLayer:{event:"gtm.click","gtm.elementId":e.name,...t}})}constructor(){super(),this.manager=h(),this.manager.initialize(x)}}var E=r(80732),y=r(25701),N=r(88318),T=r(63218);class b extends f.n{log(e){e.id===E.H.nothing.id?this.analyticProvider.log(e):(e.match({event:E.H.mixpanel.export,callback:e=>{if(e.properties.page_name===N.I[T.H7.CANVAS_TOOL]){let t=e.extractProperties(["email","total_images_exported","tokens_remaining","user_plan","user_plan_period","user_account_status","page_name","export_all","source","file_size","file_type","distinct_id"]);this.analyticProvider.log(t)}else{let t=e.extractProperties(["email","total_images_exported","tokens_remaining","user_plan","user_plan_period","page_name","user_account_status","export_all","source","distinct_id"]);this.analyticProvider.log(t)}}}),e.match({event:E.H.mixpanel.logout_completed,callback:e=>{let t=e.extractProperties(["signup_channel","email","user_plan_period","user_plan","user_account_status","page_name","logout_count","distinct_id"]);this.analyticProvider.log(t)}}),e.match({event:E.H.mixpanel.signup_completed,callback:e=>{let t=e.extractProperties(["signup_channel","email","mode","marketing_consent","name","distinct_id"]);this.analyticProvider.log(t)}}),e.match({event:E.H.mixpanel.login_completed,callback:e=>{let t=e.extractProperties(["email","mode","page_name","revenue_till_date","signup_channel","user_account_status","user_plan","user_plan_period","distinct_id"]);this.analyticProvider.log(t)}}),e.match({event:E.H.mixpanel.add_to_cart,callback:e=>{let t=e.extractProperties(["amount","currency","email","page_name","signup_channel","tokens_amount","user_plan_period","user_plan","distinct_id"]);this.analyticProvider.log(t)}}),e.match({event:E.H.mixpanel.purchase,callback:e=>{let t=e.extractProperties(["Payment_status","amount","currency","email","page_name","payment_method","signup_channel","subscription_downgrade","subscription_upgrade","tokens_amount","tokens_remaining","user_plan","user_plan_period","distinct_id","renewal_status","topup_purchased"]);this.analyticProvider.log(t)}}),e.match({event:E.H.mixpanel.image_generated,callback:e=>{switch(e.properties.feature){case y.L.TEXT_TO_IMAGE:{let t=e.extractProperties(["feature","number_of_images","aspect_ratio","cfg_scale","hdr_enabled","model_id","model_used","style_used","page_name","negative_prompt_used","negative_prompt_length","random_prompt_used","seed","session_text_to_image","source","steps","tag_used","user_account_status","user_plan","user_plan_period","email","texttoimages_generated","ai_generations","tokens_remaining","generation_source","prompt_length","processing_error","processing_status","tag_category","distinct_id"]);this.analyticProvider.log(t);break}case y.L.IMAGE_REMIX:{let t=e.extractProperties(["feature","number_of_images","cfg_scale","model_id","model_used","style_used","negative_prompt_used","negative_prompt_length","random_prompt_used","hdr_enabled","seed","source","tag_used","user_plan","user_account_status","user_plan_period","email","ai_generations","tokens_remaining","image_strength","remix_mode","session_image_remix","generation_source","remix_generated","page_name","prompt_length","processing_error","processing_status","tag_category","distinct_id"]);this.analyticProvider.log(t);break}case y.L.CREATIVE_ENHANCE:{let t=e.extractProperties(["feature","number_of_images","source","advance_settings_used","creativity","resemblance","hdr_strength","prompt_used","prompt_length","enhance_generated","page_name","processing_status","processing_error","email","user_account_status","user_plan","user_plan_period","tokens_remaining","distinct_id"]);this.analyticProvider.log(t);break}case y.L.TEXT_TO_IMAGE_V2:{let t=e.extractProperties(["feature","number_of_images","aspect_ratio","model_id","model_used","random_prompt_used","source","tag_category","tag_used","prompt_length","processing_status","processing_error","user_plan","user_plan_period","user_account_status","tokens_remaining","email","distinct_id","image_guidance"]);this.analyticProvider.log(t);break}case y.L.CHARACTER_CONSISTENCY:{let t=e.extractProperties(["feature","number_of_images","aspect_ratio","style_used","negative_prompt_used","negative_prompt_length","random_prompt_used","seed","source","tag_category","tag_used","prompt_length","processing_status","processing_error","user_plan","user_plan_period","user_account_status","tokens_remaining","face_accuracy","advance_settings_used","email","distinct_id"]);this.analyticProvider.log(t)}}}}),e.match({event:E.H.mixpanel.video_generated,callback:e=>{let t=e.extractProperties(["page_name","advance_settings_used","upload_image","prompt_length","random_prompt_used","recreate","source","add_face","aspect_ratio","add_style","user_account_status","user_plan","user_plan_period"]);this.analyticProvider.log(t)}}),e.match({event:E.H.clevertap.signup_completed,callback:e=>{let t=e.extractProperties(["signup_channel","email","name","distinct_id","page_name","user_account_status","user_plan","user_plan_period","tokens_remaining"]);this.analyticProvider.log(t.appendKey("_ct"))}}),e.match({event:E.H.clevertap.login_completed,callback:e=>{let t=e.extractProperties(["email","page_name","distinct_id","user_plan","user_plan_period","user_account_status","name"]);this.analyticProvider.log(t.appendKey("_ct"))}}),e.match({event:E.H.clevertap.export,callback:e=>{switch(e.properties.page_name){case N.I[T.H7.CANVAS_TOOL]:{let t=e.extractProperties(["page_name","export_all","file_size","file_type","feature","total_images_exported","user_account_status","user_plan","user_plan_period"]);this.analyticProvider.log(t.appendKey("_ct"));break}case N.I[T.H7.LIBRARY]:{let t=e.extractProperties(["page_name","export_all","feature","user_account_status","user_plan","user_plan_period","trigger"]);this.analyticProvider.log(t.appendKey("_ct"));break}default:{let t=e.extractProperties(["page_name","export_all","feature","total_images_exported","user_account_status","user_plan","user_plan_period","trigger"]);this.analyticProvider.log(t.appendKey("_ct"))}}}}),e.match({event:E.H.clevertap.add_to_cart,callback:e=>{let t=e.extractProperties(["amount","currency","page_name","tokens_amount","user_plan_period","user_plan","user_account_status"]);this.analyticProvider.log(t.appendKey("_ct"))}}),e.match({event:E.H.clevertap.charged,callback:e=>{let t=e.extractProperties(["amount","currency","user_plan_period","user_plan","tokens_amount","subscription_upgrade","subscription_downgrade","payment_method","Payment_status","page_name","renewal_status","topup_purchased","user_account_status","tokens_remaining","billing_cycle"]);this.analyticProvider.log(t.appendKey("_ct"))}}),e.match({event:E.H.clevertap.image_generated,callback:e=>{switch(e.properties.feature){case y.L.TEXT_TO_IMAGE:{let t=e.extractProperties(["feature","number_of_images","aspect_ratio","cfg_scale","hdr_enabled","model_id","model_used","style_used","page_name","negative_prompt_length","random_prompt_used","seed","session_text_to_image","source","tag_used","generation_source","prompt_length","processing_error","processing_status","tag_category","user_account_status","user_plan","user_plan_period","tokens_remaining"]);this.analyticProvider.log(t.appendKey("_ct"));break}case y.L.IMAGE_REMIX:{let t=e.extractProperties(["feature","number_of_images","cfg_scale","model_id","model_used","style_used","negative_prompt_length","random_prompt_used","hdr_enabled","seed","source","tag_used","remix_image_strength","remix_mode","session_image_remix","generation_source","page_name","prompt_length","processing_error","processing_status","tag_category","tokens_remaining","upload_image"]);this.analyticProvider.log(t.appendKey("_ct"));break}case y.L.CREATIVE_ENHANCE:{let t=e.extractProperties(["feature","number_of_images","source","advance_settings_used","creativity","resemblance","hdr_strength","prompt_length","page_name","processing_status","negative_prompt_length","processing_error","tokens_remaining","upload_image","session_enhance_image"]);this.analyticProvider.log(t.appendKey("_ct"));break}case y.L.CHARACTER_CONSISTENCY:{let t=e.extractProperties(["source","feature","page_name","aspect_ratio","number_of_images","model_id","model_used","style_used","negative_prompt_length","seed","prompt_length","processing_status","processing_error","tag_used","tag_category","random_prompt_used","upload_image","tokens_remaining","session_character_consistency","face_accuracy","advance_settings_used"]);this.analyticProvider.log(t.appendKey("_ct"));break}case y.L.TEXT_TO_IMAGE_V2:{let t=e.extractProperties(["source","feature","page_name","aspect_ratio","number_of_images","cfg_scale","model_id","model_used","prompt_length","processing_status","processing_error","tag_used","tag_category","random_prompt_used","tokens_remaining","upload_image","txt_v2_image_strength","style_used","txt_v2_image_mode","txt_v2_variate","session_image_v2","txt_v2_regeneration","user_account_status","user_plan","user_plan_period"]);this.analyticProvider.log(t.appendKey("_ct"))}}}}),e.match({event:E.H.clevertap.video_generated,callback:e=>{let t=e.extractProperties(["page_name","upload_image","prompt_length","random_prompt_used","recreate","source","add_face","user_account_status","user_plan","user_plan_period","aspect_ratio","add_style","tokens_remaining"]);this.analyticProvider.log(t.appendKey("_ct"))}}),e.match({event:E.H.clevertap.click,callback:e=>{let t=e.extractProperties(["page_name","source","trigger","user_account_status","user_plan","user_plan_period","variant"]);this.analyticProvider.log(t.appendKey("_ct"))}}),e.match({event:E.H.clevertap.page_view,callback:e=>{let t=e.extractProperties(["page_name","source","user_account_status","user_plan","user_plan_period"]);this.analyticProvider.log(t.appendKey("_ct"))}}),e.match({event:E.H.clevertap.realtime_generated,callback:e=>{switch(e.properties.feature){case y.L.REALTIME_GENERATION:{let t=e.extractProperties(["user_account_status","user_plan","user_plan_period","feature","enhance","variate","lora_category","random_prompt_used","history_bottom_sheet_viewed","page_name","session_realtime","source","tokens_remaining"]);this.analyticProvider.log(t.appendKey("_ct"));break}case y.L.IDEATE:{let t=e.extractProperties(["add_shape","brush_size","brush_used","clear","clone","creativity","enhance","eraser_size","eraser_used","feature","fill","history_bottom_sheet_viewed","import","lora_category","move","page_name","prompt_length","random_prompt_used","redo","session_realtime","source","text_box_count","undo","upload_media","user_account_status","user_plan","user_plan_period","variate","tokens_remaining"]);this.analyticProvider.log(t.appendKey("_ct"))}}}}))}constructor(e){super(),this.analyticProvider=e}}var w=r(10733),k=r(81750),P=r(95401),I=r(29039);(a=n||(n={})).LOCAL_STORAGE="localStorage",a.SESSION_STORAGE="sessionStorage";let O=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"localStorage";try{return window[e]}catch(e){return null}};class A extends Map{restore(){var e;let t=null===(e=O(this.storageType))||void 0===e?void 0:e.getItem(this.localStorageKey);if(t)for(let[e,r]of JSON.parse(t))this.set(e,r)}set(e,t){var r;return super.set(e,t),null===(r=O(this.storageType))||void 0===r||r.setItem(this.localStorageKey,JSON.stringify(Array.from(this.entries()))),this}delete(e){var t;return super.delete(e),null===(t=O(this.storageType))||void 0===t||t.setItem(this.localStorageKey,JSON.stringify(Array.from(this.entries()))),!0}constructor(e,t=n.LOCAL_STORAGE){super(),this.localStorageKey=e,this.storageType=t,this.restore()}}let S=e=>{let{children:t}=e,[r]=(0,c.useState)(()=>()=>new A("app-cache",n.SESSION_STORAGE));return(0,s.jsx)(I.J$,{value:{provider:r},children:t})};var j=r(16463),R=r(11567),C=r(85169);let L=[{pathname:T.H7.APPS,exact:!1,forcedTheme:"dark"},{pathname:T.H7.ROOT,exact:!0,forcedTheme:"dark"},{pathname:T.H7.BLOGS,exact:!1,forcedTheme:"dark"},{pathname:T.H7.FEATURES,exact:!1,forcedTheme:"dark"},{pathname:T.H7.STARTER,exact:!1,forcedTheme:"dark"},{pathname:T.H7.AI_IMAGE_GENERATOR,exact:!0,forcedTheme:"dark"},{pathname:T.H7.AI_PICTURE_GENERATOR,exact:!0,forcedTheme:"dark"},{pathname:T.H7.BG_REMOVER,exact:!0,forcedTheme:"light"},{pathname:T.H7.AI_VIDEO_GENERATOR,exact:!0,forcedTheme:"dark"},{pathname:T.H7.IDEATE,exact:!0,forcedTheme:"dark"},{pathname:T.H7.AI_LOGO_GENERATOR,exact:!0,forcedTheme:"dark"},{pathname:T.H7.AI_HEADSHOT_GENERATOR,exact:!0,forcedTheme:"dark"},{pathname:T.H7.AI_ANIMAL_GENERATOR,exact:!0,forcedTheme:"dark"},{pathname:T.H7.AFFILIATE,exact:!0,forcedTheme:"dark"}],D=e=>{for(let t=0;t<L.length;t++){let r=L[t];if((0,R.matchPathname)(e,r.pathname,r.exact))return r.forcedTheme}},H=e=>{let{children:t}=e,r=(0,j.usePathname)();return(0,s.jsx)(C.f,{enableSystem:!0,attribute:"class",disableTransitionOnChange:!0,forcedTheme:D(r),children:t})},U=e=>{let{children:t,remoteConfigValues:r,userStoreValues:a}=e,[n,g]=(0,c.useState)(()=>new _.j([])),[h]=(0,c.useState)(()=>new i.S({defaultOptions:{queries:{refetchOnWindowFocus:!1,refetchOnMount:!1}}}));return(0,c.useEffect)(()=>{let e=new b(new v);g(new _.j([e]))},[]),(0,s.jsx)(m.n,{aggregator:n,children:(0,s.jsx)(k.KG,{initialState:a,children:(0,s.jsx)(S,{children:(0,s.jsx)(d.f,{children:(0,s.jsx)(w.hO,{initialState:r,children:(0,s.jsx)(H,{children:(0,s.jsx)(p.a,{children:(0,s.jsx)(P.Xf,{skipDelayDuration:0,children:(0,s.jsxs)(o.QueryClientProvider,{client:h,children:[t,!u.v.IS_PROD_DEPLOYMENT&&(0,s.jsx)(l.t,{initialIsOpen:!1})]})})})})})})})})})}},75994:function(e,t,r){"use strict";r.d(t,{Ty:function(){return l},wm:function(){return o}});var a=r(16463),n=r(64278),s=r(2265);let i="PROGRESS_ROUTER",o=()=>{let e=(0,a.usePathname)(),t=(0,a.useSearchParams)();return(0,s.useEffect)(()=>{var e;(null!==(e=sessionStorage.getItem(i))&&void 0!==e?e:"false")!=="true"||(n.done(),sessionStorage.setItem(i,"false"))},[e,t]),null},l=()=>{let e=(0,a.useRouter)(),t=(0,s.useCallback)((t,r)=>{sessionStorage.setItem(i,"true"),n.start(),e.push(t,r)},[e]);return(0,s.useMemo)(()=>({...e,push:t}),[t,e])}},34124:function(e,t,r){"use strict";r.d(t,{$:function(){return s}});var a=r(57437);r(2265);var n=r(24528);let s=e=>{let{className:t=""}=e;return(0,a.jsx)("div",{className:(0,n.cn)("my-auto inline-block animate-spin self-center rounded-full border-2 border-solid border-current !border-r-transparent",t),role:"status"})}},89216:function(e,t,r){"use strict";r.d(t,{K:function(){return a},r:function(){return n}});let a={ANDROID:1,IOS:2,WEB:3,UNIVERSAL:null},n={FREE:0,SUBSCRIPTION:1,TOPUP:2}},25701:function(e,t,r){"use strict";var a,n;r.d(t,{L:function(){return a}}),(n=a||(a={})).TEXT_TO_IMAGE="Text to Image",n.IDEATE="Ideate",n.REALTIME_GENERATION="Realtime Generation",n.AI_VIDEO_GENERATED="Video Generation",n.CREATIVE_ENHANCE="Creative Upscaler",n.IMAGE_REMIX="Image Remix",n.CHARACTER_CONSISTENCY="Character Consistency",n.TEXT_TO_IMAGE_V2="Text to Image V2",n.CANVAS="Canvas"},18638:function(e,t,r){"use strict";r.d(t,{I:function(){return a}});let a={X_PLATFORM:"X-Platform",AUTHORIZATION:"Authorization",X_CFT_TOKEN:"X-Cft-Token",SKIP_REQUEST_INTERCEPTOR:"Skip-Interceptor"}},8443:function(e,t,r){"use strict";r.d(t,{a:function(){return P},m:function(){return I}});var a=r(57437),n=r(16463),s=r(2265),i=r(52247),o=r(22170),l=r.n(o),c=r(29039),u=r(60806),d=r(45331),p=r(9938);async function*m(e){let{isAborted:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new TextDecoder,a="";for(;;){if(null==t?void 0:t()){await e.cancel();break}let{value:n,done:s}=await e.read();if(s)break;let i=(a+=r.decode(n,{stream:!0})).indexOf("\n\n");for(;-1!==i;){let e=a.slice(0,i);for(let t of(a=a.slice(i+2),e.split("\n")))if(t.startsWith("data: ")){let e=JSON.parse(t.substring(6));yield{type:"text",value:e.content};break}i=a.indexOf("\n\n")}}}function _(e,t){return e&&t&&t.length?{...e,annotations:[...t]}:e}async function g(e){let t,{reader:r,abortControllerRef:a,update:n,onFinish:s,generateId:i=p.O,getCurrentDate:o=()=>new Date,lastMessage:l}=e;if(a.current.signal.aborted)return;let c=o(),u={data:[]};for await(let{type:e,value:s}of m(r,{isAborted:()=>a.current.signal.aborted})){"text"===e&&(u.text?u.text={...u.text,content:(u.text.content||"")+s}:u.text={id:i(),role:"system",content:s,model:l.model,modelName:l.modelName,createdAt:c}),"data"===e&&u.data.push(...s);let r=u.text;"message_annotations"===e&&(t?t.push(...s):t=[...s],r=_(u.text,t)),(null==t?void 0:t.length)&&["text"].forEach(e=>{u[e]&&(u[e].annotations=[...t])}),n([r].filter(Boolean).map(e=>({..._(e,t)})),[...u.data])}null==s||s(u)}async function h(e){let{api:t,messages:r,attachedFile:a,lastMessage:n,body:s,interceptor:i,credentials:o,headers:l,abortControllerRef:c,restoreMessagesOnFailure:u,onResponse:d,onUpdate:p,onFinish:m,generateId:_}=e,h=i?i(r,s):new FormData;if(a){let e=[...r.slice(0,-1),n];h.append("data",JSON.stringify({messages:e,...s})),h.append(a.uuid,a.file)}else h.append("data",JSON.stringify({messages:r,...s}));let f=await fetch(t,{method:"POST",body:h,headers:{...l},signal:c.current.signal,credentials:o}).catch(e=>{throw u(),e});if(d)try{await d(f)}catch(e){throw e}if(!f.ok)throw u(),Error(await f.text()||"Failed to fetch the chat response.");if(!f.body)throw Error("The response body is empty.");let x=f.body.getReader();return await g({reader:x,abortControllerRef:c,update:p,onFinish(e){m&&null!=e.text&&m(e.text)},generateId:_,lastMessage:n})}let f=e=>Math.floor(e/1.3),x=(e,t)=>{let r=[...t];return t.length>e&&(r=t.slice(t.length-e)),r.join(" ")},v=(e,t)=>{let r=e[0],a=e[e.length-1],n=[];e.forEach((t,r)=>{0!==r&&r!==e.length-1&&n.push("".concat(t.role,":"),...t.content.split(" "))});let s=x(f(t),n);return s.length&&(r.content="".concat(r.content,". This is the context of the previous chat with the user reply keeping this in mind.\n").concat(s)),[r,a]},E=(e,t)=>{let r="::<doc>".concat(t,"</doc>::");return e.includes(r)?e:"".concat(r).concat(e)},y=async e=>{let{chatRequest:t,mutate:r}=e,a=t.messages,n=a[a.length-1],s=n.image;if(await r(a,!1),!s)throw Error("No image found in the last message");let{caption:i}=await (0,u.b)({image:s});r([...a,{id:(0,p.O)(),role:d.X.SYSTEM,content:'"'.concat(i,'"'),model:n.model}],!1)},N=async e=>{var t,r;let{api:a,chatRequest:n,mutate:s,mutateStreamData:i,existingData:o,extraMetadataRef:c,abortControllerRef:u,interceptor:d,onFinish:m,onResponse:_,shouldContinue:g=!1,maxTokens:f}=e,x=n.messages;await s(x,!1);let y=n.messages.map(e=>{let{id:t,role:r,content:a,model:n}=e;return{id:t,role:r,content:a,model:n}}),N={...y[y.length-1],model:n.messages[n.messages.length-1].model,modelName:n.messages[n.messages.length-1].modelName};if(g&&"system"===N.role){let e={...y[y.length-1]};e.content="continue",e.role="user",y.push({...e,model:e.model})}let T=n.messages[n.messages.length-1].file;T&&(N.content=E(N.content,T.uuid));let b=v(y.length>5?[y[0],...y.slice(-5)]:y,f);await h({api:a,messages:b,attachedFile:T,lastMessage:N,body:{data:n.data,...c.current.body,...null===(t=n.options)||void 0===t?void 0:t.body},interceptor:d,credentials:c.current.credentials,headers:{...c.current.headers,...null===(r=n.options)||void 0===r?void 0:r.headers},abortControllerRef:u,restoreMessagesOnFailure(){s(x,!1)},onResponse:_,onUpdate:l()((e,t)=>{s([...x,...e],!1),i([...o||[],...t||[]],!1)},500),onFinish:m,generateId:p.O})};var T=r(10733),b=r(36805);let w=i.v.IMAGINE_BOT_CHAT_URL+"/chatly/chat/completions",k=(0,s.createContext)({messages:[],error:void 0,append:async()=>null,continueMessage:async()=>null,reload:async()=>null,stop:async()=>null,setMessages:()=>null,metadata:{},isLoading:!1}),P=e=>{var t;let{children:r}=e,i=(0,n.useParams)(),{model:o}=(0,T.Td)()(e=>e.imagineBotConfig),l=function(e){let{api:t="/api/chat",id:r,initialMessages:a,onResponse:n,onFinish:i,onError:o,interceptor:l,headers:u,body:m,maxTokens:_=250}=e,g=(0,s.useId)(),h=null!=r?r:g,f="string"==typeof t?[t,h]:h,[x]=(0,s.useState)([]),{data:v,mutate:E}=(0,c.ZP)([f,"messages"],null,{fallbackData:null!=a?a:x});(0,s.useEffect)(()=>{E(null!=a?a:x,!1)},[]);let{data:T=!1,mutate:b}=(0,c.ZP)([f,"loading"],null),{data:w,mutate:k}=(0,c.ZP)([f,"streamData"],null),{data:P,mutate:I}=(0,c.ZP)([f,"error"],null),O=(0,s.useRef)(v||[]);(0,s.useEffect)(()=>{O.current=v||[]},[v]);let A=(0,s.useRef)(new AbortController),S=(0,s.useRef)({headers:u,body:m});(0,s.useEffect)(()=>{S.current={headers:u,body:m}},[u,m]);let j=(0,s.useCallback)(async function(e){let{shouldContinue:r,shouldCallCaptionApi:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shouldContinue:!1,shouldCallCaptionApi:!1};try{await b(!0),await I(void 0),A.current.signal.aborted&&(A.current=new AbortController),a?await y({chatRequest:e,mutate:E}):await N({api:t,chatRequest:e,mutate:E,mutateStreamData:k,existingData:w,extraMetadataRef:S,messagesRef:O,abortControllerRef:A,interceptor:l,onFinish:i,onResponse:n,shouldContinue:r,maxTokens:_})}catch(e){if("AbortError"===e.name)return null;o&&e instanceof Error&&o(e),await I(e)}finally{await b(!1)}},[E,b,t,S,n,i,o,I,k,w,O,A,l,_]),R=(0,s.useCallback)(async function(e){let{options:t,data:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.id||(e.id=(0,p.O)());let a=e.role===d.X.USER&&!!e.image;return j({messages:O.current.concat(e),options:t,data:r},{shouldCallCaptionApi:a})},[j]),C=(0,s.useCallback)(async function(){let{options:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 0===O.current.length?null:j({messages:O.current,options:e},{shouldContinue:!0})},[j]),L=(0,s.useCallback)(async function(){let{options:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 0===O.current.length?null:"system"===O.current[O.current.length-1].role?j({messages:O.current.slice(0,-1),options:e}):j({messages:O.current,options:e})},[j]),D=(0,s.useCallback)(()=>{A.current.abort()},[]),H=(0,s.useCallback)(e=>{E(e,!1),O.current=e},[E]);return(0,s.useEffect)(()=>{D()},[r,D]),{messages:v||[],error:P,append:R,continueMessage:C,reload:L,stop:D,setMessages:H,isLoading:T,data:w}}({id:null==i?void 0:null===(t=i.id)||void 0===t?void 0:t.toString(),api:w,headers:{Authorization:(0,b.Oj)()},initialMessages:[{id:(0,p.O)(),role:"system",content:o.intent,model:o.id}],maxTokens:o.max_tokens});return(0,a.jsx)(k.Provider,{value:l,children:r})},I=()=>{let e=(0,s.useContext)(k);if(void 0===e)throw Error("useChatContext must be used within a ChatProvider");return e}},54362:function(e,t,r){"use strict";r.d(t,{PricingModalCTA:function(){return u}});var a=r(57437),n=r(16463),s=r(2265),i=r(63218),o=r(54012),l=r(81750),c=r(81149);let u=(0,s.forwardRef)((e,t)=>{let{onClick:r,...s}=e,u=(0,o.k)(e=>e.open),d=(0,l.m8)()(e=>e.user),p=!!(null==d?void 0:d.id),m=(0,n.useRouter)();return(0,a.jsx)(c.z,{type:"button",ref:t,...s,onClick:e=>{if(!p){m.push(i.H7.TOOLS_AUTH);return}null==r||r(e),u()}})});u.displayName="PricingModalCTA"},76111:function(e,t,r){"use strict";r.d(t,{BuyMoreTokensModalCTA:function(){return o}});var a=r(57437),n=r(2265),s=r(24030),i=r(81149);let o=(0,n.forwardRef)((e,t)=>{let{onClick:r,...n}=e,o=(0,s.n)(e=>e.open);return(0,a.jsx)(i.z,{type:"button",ref:t,...n,onClick:e=>{null==r||r(e),o()}})});o.displayName="BuyMoreTokensModalCTA"},6498:function(e,t,r){"use strict";r.d(t,{X:function(){return m},j:function(){return p}});var a,n,s=r(51864),i=r(94046),o=r(81750),l=r(89216);let c=new Set([l.K.WEB,l.K.UNIVERSAL]),u=new Set([l.r.FREE,l.r.TOPUP]),d=async()=>{let e=await (0,i.VV)(),t=e.tokens.filter(e=>{let{platform:t}=e;return c.has(t)}).reduce((e,t)=>e+t.balance,0),r=e.tokens.filter(e=>{let{plan_id:t}=e;return u.has(t)}).reduce((e,t)=>e+t.balance,0);return{...e,platformSpecificTotal:t,nonSubscriptionTotal:r}};(a=n||(n={})).TOKEN_COUNT="TokenCount",a.TOKEN_CONSUMPTION_CONFIG="TokenConsumptionConfig";let p=()=>{let e=(0,o.m8)()(e=>e.user);return(0,s.useQuery)([n.TOKEN_COUNT],d,{enabled:!!e,staleTime:36e5})},m=()=>(0,s.useQuery)([n.TOKEN_CONSUMPTION_CONFIG],i.L5,{staleTime:36e5})},4921:function(e,t,r){"use strict";r.d(t,{vg:function(){return N},EA:function(){return y},uy:function(){return T}});var a=r(15905);let n={"Content-Type":"application/json"},s=async(e,t,r)=>await a.U.post("".concat("/auth/social").concat(t),{body:e,params:r,headers:n},{throwOnError:!0}),i=async(e,t)=>s(e,"/google/in-app",t),o=async(e,t)=>s(e,"/google/onetap",t),l=async(e,t)=>s(e,"/facebook",t);var c=r(89565),u=r(44785),d=r(64278),p=r(52247),m=r(1576),_=r(73359),g=r(45019),h=r(36805),f=r(11141);let x=e=>{let t="Unknown";try{if(e instanceof Error)t=e.message;else if((null==e?void 0:e.code)==="error"){if((null==e?void 0:e.statusCode)===f.fJ.ABORTED)t="Request cancelled";else{var r,a;t=null!==(a=null===(r=e.error)||void 0===r?void 0:r.message)&&void 0!==a?a:"Failed to extract error"}}}catch(e){t=e instanceof Error?"CatchError: ".concat(e.message):"Look into this case if occurs"}return t};var v=r(82442);let E=e=>(0,c.useMutation)(t=>e(t,{redirect:p.v.APP_URL}),{onSuccess:async e=>{let{data:{result:{redirect:t}}}=e,r=new URL(t).searchParams,a=r.get(_.u.TOKEN);if(!a)throw Error("No auth token received from server");let n=await (0,g.tc)(a);(0,h.Ml)({[m.R.TOKEN]:n.sessionToken,[m.R.REFRESH_TOKEN]:n.refreshToken,[m.R.TOKEN_EXPIRES_IN]:n.tokenExpiresIn,cookies:u.Z});let s=new URLSearchParams(r);s.delete(_.u.TOKEN);let i=new URL(window.location.href);i.searchParams.delete(_.u.IS_SIGN_UP),s.forEach((e,t)=>{i.searchParams.append(t,e)}),d.start(),window.location.href=i.toString()},onError:e=>{v.Am.error(x(e))}}),y=()=>E(i),N=()=>E(l),T=()=>E(o)},76015:function(e,t,r){"use strict";r.d(t,{$E:function(){return c},$c:function(){return u},DQ:function(){return h},Yk:function(){return _},Zh:function(){return m},_w:function(){return g},mp:function(){return x},vb:function(){return f}});var a=r(57437),n=r(13304),s=r(2265),i=r(8792),o=r(24528),l=r(81149);let c=n.fC,u=n.xz,d=e=>(0,a.jsx)(n.h_,{...e});d.displayName=n.h_.displayName;let p=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.aV,{ref:t,className:(0,o.cn)("fixed inset-0 z-50 bg-black bg-opacity-70 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...s})});p.displayName=n.aV.displayName;let m=e=>{let{btnProps:t={},...r}=e,{className:s,variant:c="ghost-secondary",size:u="icon-sm",...d}=t;return(0,a.jsx)(l.z,{variant:c,size:u,className:(0,o.cn)("absolute right-2 top-2",s),asChild:!0,...d,children:(0,a.jsxs)(n.x8,{...r,children:[(0,a.jsx)(i.aM,{className:"h-[18px] w-[18px] stroke-[1.5]"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})})};m.displayName=n.x8.displayName;let _=s.forwardRef((e,t)=>{let{className:r,children:s,onModalClose:i,onCloseAutoFocus:l,disableAnimation:c=!1,container:u=document.body,...m}=e;return(0,a.jsxs)(d,{container:u,children:[(0,a.jsx)(p,{}),(0,a.jsx)(n.VY,{onCloseAutoFocus:e=>{null==i||i(),null==l||l(e)},ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 flex translate-x-[-50%] translate-y-[-50%] flex-col justify-between rounded-[18px] bg-neutral-0 text-neutral-600 shadow-lg transition-all duration-200 dark:bg-neutral-900 dark:text-neutral-40",{"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%]":!c},r),...m,children:s})]})});_.displayName=n.VY.displayName;let g=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,o.cn)("flex h-12 flex-col justify-center gap-1 border-b border-neutral-20 p-2 pl-4 transition-all duration-500 dark:border-neutral-800",t),...r})};g.displayName="GenericModalHeader";let h=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,o.cn)("flex h-full flex-1 flex-col gap-1",t),...r})};h.displayName="GenericModalBody";let f=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,o.cn)("flex h-fit items-center justify-end p-6 pt-0",t),...r})};f.displayName="GenericModalFooter";let x=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.Dx,{ref:t,className:(0,o.cn)("font-medium text-neutral-900 transition-all duration-500 dark:text-neutral-0",r),...s})});x.displayName=n.Dx.displayName,s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.dk,{ref:t,className:(0,o.cn)("text-sm text-neutral-600 dark:text-neutral-40",r),...s})}).displayName=n.dk.displayName},8363:function(e,t,r){"use strict";r.d(t,{Kl:function(){return l},E9:function(){return c}});var a=r(57437),n=r(99497),s=r(2265),i=r(24528);let o=(0,r(12218).j)("aspect-square rounded-full border-2 border-neutral-200 dark:border-neutral-200 shadow ring-primary-500 dark:ring-primary-400 hover:border-primary-500 dark:hover:border-primary-400 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:border-primary-500 dark:data-[state=checked]:border-primary-400",{variants:{size:{sm:"sm h-4 w-4",md:"md h-5 w-5",lg:"lg h-6 w-6"}},defaultVariants:{size:"md"}}),l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.fC,{className:(0,i.cn)("grid gap-2",r),...s,ref:t})});l.displayName=n.fC.displayName;let c=s.forwardRef((e,t)=>{let{className:r,size:s,...l}=e;return(0,a.jsx)(n.ck,{ref:t,className:(0,i.cn)(o({size:s,className:r})),...l,children:(0,a.jsx)(n.z$,{className:"flex items-center justify-center",children:(0,a.jsx)("div",{className:"h-2 w-2 rounded-full bg-primary-500 transition-colors duration-500 dark:bg-primary-400 [.lg_&]:h-2.5 [.lg_&]:w-2.5 [.sm_&]:h-1.5 [.sm_&]:w-1.5"})})})});c.displayName=n.ck.displayName},78958:function(e,t,r){"use strict";r.d(t,{m:function(){return s}});var a=r(2265),n=r(82442);let s=()=>{let[e,t]=(0,a.useState)(null);return{value:e,copy:async e=>{var r;if(!(null===(r=navigator)||void 0===r?void 0:r.clipboard))return n.Am.error("Your browser does not support copying to clipboard"),!1;try{return await navigator.clipboard.writeText(e),t(e),!0}catch(e){return n.Am.error("Failed to copy to clipboard"),t(null),!1}}}}},72143:function(e,t,r){"use strict";r.d(t,{p:function(){return i}});var a=r(52247),n=r(11141),s=r(70778);let i=new n.hE({baseURL:a.v.ANPU_API_URL,defaultHeadersGenerator:s.A})},45331:function(e,t,r){"use strict";var a,n,s,i;r.d(t,{X:function(){return n}}),(s=a||(a={})).PDF="pdf",s.EXCEL="excel",s.WORD="word",(i=n||(n={})).SYSTEM="system",i.USER="user"},9938:function(e,t,r){"use strict";r.d(t,{O:function(){return a}});let a=r(20920).Z},94046:function(e,t,r){"use strict";r.d(t,{xv:function(){return c},L5:function(){return l},VV:function(){return o}});var a=r(52247),n=r(11141),s=r(70778);let i=new n.hE({baseURL:a.v.ANPU_API_URL,defaultHeadersGenerator:s.A}),o=async()=>{let{data:e}=await i.get("/credit",void 0,{throwOnError:!0});return e},l=async()=>{let{data:e}=await i.get("/cost",void 0,{throwOnError:!0});return e},c=async e=>{let{data:t}=await i.get("/session",null==e?void 0:e.requestOptions,{throwOnError:!0});return t}},60806:function(e,t,r){"use strict";r.d(t,{b:function(){return l}});var a=r(72143),n=r(54795),s=r(47802),i=r(8127);let o=async e=>{if(!e)throw Error("No image provided");let t=await (0,i.K$)(e);return(0,s.wh)({image:t})},l=async e=>{let{image:t}=e,r=await o(t),{data:s}=await a.p.post(n.TG.IMAGE_CAPTION,{body:r},{throwOnError:!0});return s}},54795:function(e,t,r){"use strict";r.d(t,{SN:function(){return c},TG:function(){return n},WX:function(){return u},kw:function(){return i},zx:function(){return o}});var a,n,s=r(29328);let i=e=>{let t=new Headers;return t.append("Content-Type","multipart/form-data"),t.append("Premium",(0,s.Q)(e)),t},o=()=>({model_version:1}),l=e=>null!=e&&e.trim().length>0,c=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let a=t.filter(l);if(0!==a.length)return a.join(", ").trim()},u=(e,t)=>{var r;let{model:a,aspect_ratio:n,cfg:s,style:i,prompt:l,negative_prompt:u,tags:d,high_res_results:p,seed:m}=e,{model_id:_}=a,g=null!==(r=c(l,null==a?void 0:a.init_prompt,null==i?void 0:i.init_prompt,...Object.entries(d).flatMap(e=>Array.from(e[1]))))&&void 0!==r?r:"",h=c(u,null==a?void 0:a.init_neg_prompt,null==i?void 0:i.init_neg_prompt),f={...o(),aspect_ratio:n,cfg:s,prompt:g,style_id:_,seed:null!=m?m:t};return h&&h.length>0&&(f.negative_prompt=h),p&&a.hdr_toggle&&(f.high_res_results=1),f};(a=n||(n={})).UPSCALE="/upscale",a.ENHANCE="/enhance",a.FREE_BACKGROUND_REMOVER="/free/background/remover",a.BACKGROUND_REMOVER="/background/remover",a.INPAINT="/edits/inpaint",a.OUTPAINT="/edits/outpaint",a.IMAGE_REMIX="/edits/remix",a.IMAGE_BASED_REALTIME_GENERATION="/edits/remix/turbo",a.FROM_TEXT="/generations",a.VARIATE="/generations/variations",a.CHARACTER_CONSISTENCY="/generations/consistent",a.TEXT_BASED_REALTIME_GENERATION="/generations/turbo",a.VIDEO_STATUS="/video/status",a.VIDEO_UPLOAD="/video/upload",a.VIDEO_DELETE="/video/delete",a.VIDEO_DOWNLOAD="/video/download",a.VIDEO_THUMBNAIL_DOWNLOAD="/video/thumbnail",a.FACE_DETECT="/info/faces",a.IMAGE_CAPTION="/info/caption"},20756:function(e,t,r){"use strict";var a,n;r.d(t,{w:function(){return a}}),(n=a||(a={}))[n.PENDING=0]="PENDING",n[n.PROCESSING=1]="PROCESSING",n[n.FINISHED=2]="FINISHED",n[n.FAILED=-1]="FAILED"},24030:function(e,t,r){"use strict";r.d(t,{n:function(){return a}});let a=(0,r(39099).Ue)()(e=>({isOpen:!1,setIsOpen:t=>e({isOpen:t}),open:()=>e({isOpen:!0})}))},54012:function(e,t,r){"use strict";r.d(t,{k:function(){return a}});let a=(0,r(39099).Ue)()(e=>({isOpen:!1,setIsOpen:t=>e({isOpen:t}),open:()=>e({isOpen:!0})}))},19733:function(e,t,r){"use strict";r.d(t,{B:function(){return a}});let a=(0,r(39099).Ue)(e=>({shouldFetchVideoStatus:!0,setShouldFetchVideoStatus:t=>e(()=>({shouldFetchVideoStatus:t}))}))},29328:function(e,t,r){"use strict";r.d(t,{Q:function(){return u},eL:function(){return d},f3:function(){return g},t$:function(){return _}});var a=r(57437),n=r(18638),s=r(54362),i=r(76111),o=r(12835),l=r(11141),c=r(82442);let u=e=>e?"True":"False",d=(e,t)=>{if(e&&"object"==typeof e&&"code"in e&&"error"===e.code){if(e.statusCode===l.fJ.ABORTED){c.Am.error("Request canceled");return}if(e.error instanceof Error){c.Am.error(e.error.message);return}if(1101===e.error.code){c.Am.warning("Insufficient tokens. Tokens replenish every 12 hours.",{icon:(0,a.jsx)(o.Ss,{}),renderCta:e=>t?(0,a.jsx)(i.BuyMoreTokensModalCTA,{...e,children:"Buy tokens"}):(0,a.jsx)(s.PricingModalCTA,{...e,children:"Upgrade"}),className:"max-w-[500px]"});return}if(1100===e.error.code){c.Am.error("Sent request in invalid");return}if(400===e.statusCode||451===e.statusCode){c.Am.error("You can not generate Images of kids and celebrities.");return}c.Am.error(e.error.error)}else e instanceof Error?c.Am.error(e.message):c.Am.error("Processing failed")},p=e=>new Promise(t=>{setTimeout(t,e)}),m=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;try{return await e()}catch(a){if(r>0)return await p(t),m(e,2*t,r-1);throw a}},_=e=>{let t="Unknown";try{if(e instanceof Error)t=e.message;else if((null==e?void 0:e.code)==="error"){if((null==e?void 0:e.statusCode)===l.fJ.ABORTED)t="Request cancelled";else{var r,a;t=null!==(a=null===(r=e.error)||void 0===r?void 0:r.message)&&void 0!==a?a:"Failed to extract error"}}}catch(e){t=e instanceof Error?"CatchError: ".concat(e.message):"Look into this case if occurs"}return t},g=e=>e?{[n.I.SKIP_REQUEST_INTERCEPTOR]:"true"}:{}},5882:function(e,t,r){"use strict";r.d(t,{B:function(){return n},z:function(){return s}});var a=r(20756);let n=e=>e.some(e=>e.code===a.w.PENDING||e.code===a.w.PROCESSING),s=(e,t)=>e.videos.length===t.videos.length&&e.videos.some((e,r)=>{let n=e.code,s=t.videos[r].code;return n!==s&&s===a.w.FINISHED})},53054:function(){},31183:function(){}},function(e){e.O(0,[3008,9141,4488,3547,231,2608,1606,2917,6533,5018,9565,5510,9659,8173,3304,7071,6717,2061,2314,2447,9622,8662,1090,7808,590,5900,2141,8326,7744,4364,2971,7023,1744],function(){return e(e.s=58925)}),_N_E=e.O()}]);