!function(){"use strict";const t=Object.prototype.toString,e=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Load failed","Network request failed","fetch failed","terminated"]);function n(n){var i;return!(!n||(i=n,"[object Error]"!==t.call(i))||"TypeError"!==n.name||"string"!=typeof n.message)&&("Load failed"===n.message?void 0===n.stack:e.has(n.message))}function i(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}l((i=i.apply(t,e||[])).next())}))}function o(t){return new Promise((function(e,n){t.oncomplete=t.onsuccess=function(){return e(t.result)},t.onabort=t.onerror=function(){return n(t.error)}}))}var s;function r(){return s||(s=function(t,e){var n=indexedDB.open(t);n.onupgradeneeded=function(){return n.result.createObjectStore(e)};var i=o(n);return function(t,n){return i.then((function(i){return n(i.transaction(e,t).objectStore(e))}))}}("keyval-store","keyval")),s}const a={WIDGET_CONFIG_KEY:{HOME:"home",PRICE_DROP:"price_drop",BACK_IN_STOCK:"back_in_stock"},EVENT_API_PATH:{PRICE_DROP:"price-drop",BACK_IN_STOCK:"back-in-stock"},ENVIRONMENT:{staging:"staging",production:"production"},STORAGE_KEYS:{NETWORK_REQUEST_QUEUE:"pushowl_network_request_queue",VISITOR_TOKEN:"pushowl_visitor_token",SESSION_TOKEN:"pushowl_session_token",SUBSCRIBER_TOKEN:"pushowl_subscriber_token",SUBSCRIPTION:"pushowl_subscription",SW_SUBSCRIPTION:"pushowl_sw_subscription",SW_SUBSCRIBER_TOKEN:"pushowl_sw_subscriber_token",EMAIL:"pushowl_email",BACK_IN_STOCK_SUBSCRIPTIONS:"pushowl_back_in_stock_subscriptions",PRICE_DROP_SUBSCRIPTIONS:"pushowl_price_drop_subscriptions",SYNCED_CART_JSON:"pushowl_synced_cart_json",SYNCED_CUSTOMER_ID:"pushowl_synced_customer_id",SYNCED_AC_EVENTS:"pushowl_ac_events",SESSION_PAGEVIEW_COUNT:"pushowl_session_pageview_count",SESSION_SUBSCRIBER_CHECK:"pushowl_session_subscriber_check",OPTIN_DEFERRED_UNTIL:"pushowl_optin_deferred_until",LOG_LEVEL:"pushowl_log_level",HAS_RAISED_UNSUBSCRIPTION_EVENT:"pushowl_has_raised_unsubscription_event",IS_PERMISSION_GRANTED:"pushowl_is_permission_granted",REFERRER:"pushowl_referrer",LANDING_PAGE_URL:"pushowl_landing_page_url",LANDING_PAGE_URL_PARAMS:"pushowl_landing_page_url_params",ORIGINAL_URL_PARAMS:"pushowl_original_url_params",IOS_STANDALONE_MODE_LOG:"pushowl_ios_standalone_mode_log",INSTALL_PROMPT_SEEN_COUNT:"pushowl_install_prompt_seen_count",INSTALL_PROMPT_DISMISSED:"pushowl_install_prompt_dismissed",CONSENT:"pushowl_channels_consent",PUSHOWL_SUBDOMAIN:"pushowl_subdomain",PUSHOWL_ENVIRONMENT:"pushowl_environment",CURRENT_CONFIG_KEY:"pushowl_current_config_key"},NOTIFICATION_PERMISSION:{DEFAULT:"default",GRANTED:"granted",DENIED:"denied",DISMISSED:"dismissed",SERVICE_WORKER_FAILURE:"service_worker_failure"},DEFAULT_TIMEOUT:{DEFAULT:0,MOBILE:10}},l={CLICK:"click",ANIMATION_END:"animationend",TRANSITION_END:"transitionend"},c={MINIMIZE:"minimize",MAXIMIZE:"maximize"},u={[a.ENVIRONMENT.staging]:"https://api-staging.pushowl.com",[a.ENVIRONMENT.production]:"https://api.pushowl.com"},d={[a.ENVIRONMENT.staging]:"https://cdn-staging.pushowl.com/config",[a.ENVIRONMENT.production]:"https://cdn.pushowl.com/config"},p={[a.ENVIRONMENT.staging]:"web.com.pushowl.staging",[a.ENVIRONMENT.production]:"web.com.pushowl.prod"},h={HOME:"home",COLLECTION:"collection",PRODUCT:"product",CART:"cart",CHECKOUT:"checkout",ORDER:"order",ORDERS:"orders",THANK_YOU:"thank_you"},m={CART:"cart",ACCOUNT:"account",ORDERS:"orders"},b="subscribe",g="unsubscribe",f="debug",_="disabled",w="browser-prompt",v="custom-prompt",S="optin-flyout",y="price-drop-flyout",E="back-in-stock-flyout",O="wordpress",T="prestashop";class I{constructor(t){this.key=t,window.localStorage.getItem(t)?this.subscriptions=window.localStorage.getItem(this.key).split(","):this.subscriptions=[]}subscribe(t){this.isSubscribed(t)||(this.subscriptions.push(t.id.toString()),window.localStorage[this.key]=this.subscriptions)}isSubscribed(t){return this.subscriptions.indexOf(t.id.toString())>-1}}class x{constructor(){this.back_in_stock=new I(a.STORAGE_KEYS.BACK_IN_STOCK_SUBSCRIPTIONS),this.price_drop=new I(a.STORAGE_KEYS.PRICE_DROP_SUBSCRIPTIONS),Promise.all([G.get(a.STORAGE_KEYS.SW_SUBSCRIPTION),G.get(a.STORAGE_KEYS.SW_SUBSCRIBER_TOKEN)]).then((t=>{var[e,n]=t;e&&n&&(this.sw_subscription_data=e,this.sw_subscriber_token=n)})).catch((t=>{mt("Error while fetching subscription data",t)}))}static getOrCreateToken(t,e){var n=t.getItem(e);if(n)return n;var i=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},o="".concat(i()+i(),"-").concat(i(),"-4").concat(i().substr(0,3),"-").concat(i(),"-").concat(i()).concat(i()).concat(i()).toLowerCase();return t.setItem(e,o),o}static get queue(){try{var t=localStorage.getItem(a.STORAGE_KEYS.NETWORK_REQUEST_QUEUE);return t?JSON.parse(t):[]}catch(t){return[]}}static set queue(t){t?localStorage.setItem(a.STORAGE_KEYS.NETWORK_REQUEST_QUEUE,JSON.stringify(t)):localStorage.removeItem(a.STORAGE_KEYS.NETWORK_REQUEST_QUEUE)}static get email(){return localStorage.getItem(a.STORAGE_KEYS.EMAIL)}static set email(t){localStorage.setItem(a.STORAGE_KEYS.EMAIL,t)}static set pushowlEnvironment(t){localStorage.setItem(a.STORAGE_KEYS.PUSHOWL_ENVIRONMENT,t)}static get consent(){var t=localStorage.getItem(a.STORAGE_KEYS.CONSENT);if(t)try{return JSON.parse(t)}catch(t){return[]}return[]}static set consent(t){localStorage.setItem(a.STORAGE_KEYS.CONSENT,JSON.stringify(t))}static get subscriberToken(){return this.sw_subscriber_token||localStorage.getItem(a.STORAGE_KEYS.SUBSCRIBER_TOKEN)}static set subscriberToken(t){t?(localStorage.setItem(a.STORAGE_KEYS.SUBSCRIBER_TOKEN,t),G.set(a.STORAGE_KEYS.SUBSCRIBER_TOKEN,t)):(localStorage.removeItem(a.STORAGE_KEYS.SUBSCRIBER_TOKEN),G.del(a.STORAGE_KEYS.SUBSCRIBER_TOKEN))}static get installPromptDismissed(){return Boolean(localStorage.getItem(a.STORAGE_KEYS.INSTALL_PROMPT_DISMISSED))}static set installPromptDismissed(t){localStorage.setItem(a.STORAGE_KEYS.INSTALL_PROMPT_DISMISSED,"".concat(t))}static get hasLoggediOSStandaloneMode(){return localStorage.getItem(a.STORAGE_KEYS.IOS_STANDALONE_MODE_LOG)}static set hasLoggediOSStandaloneMode(t){localStorage.setItem(a.STORAGE_KEYS.IOS_STANDALONE_MODE_LOG,t)}static get originalURLParams(){return localStorage.getItem(a.STORAGE_KEYS.ORIGINAL_URL_PARAMS)}static set originalURLParams(t){localStorage.setItem(a.STORAGE_KEYS.ORIGINAL_URL_PARAMS,t)}static get visitorToken(){return j()?this.getOrCreateToken(localStorage,a.STORAGE_KEYS.VISITOR_TOKEN):(localStorage.removeItem(a.STORAGE_KEYS.VISITOR_TOKEN),null)}static get sessionToken(){return this.getOrCreateToken(sessionStorage,a.STORAGE_KEYS.SESSION_TOKEN)}static get syncedCustomerId(){return localStorage.getItem(a.STORAGE_KEYS.SYNCED_CUSTOMER_ID)}static set syncedCustomerId(t){localStorage.setItem(a.STORAGE_KEYS.SYNCED_CUSTOMER_ID,t.toString())}static get synced_cart_json(){var t=localStorage.getItem(a.STORAGE_KEYS.SYNCED_CART_JSON);return t?JSON.parse(t):void 0}static set synced_cart_json(t){t&&("[object String]"!==Object.prototype.toString.call(t)&&(t=JSON.stringify(t)),localStorage.setItem(a.STORAGE_KEYS.SYNCED_CART_JSON,t))}static get ac_events(){try{return JSON.parse(localStorage.getItem(a.STORAGE_KEYS.SYNCED_AC_EVENTS))||[]}catch(t){return[]}}static set ac_events(t){var e="string"==typeof t?t:JSON.stringify(t);localStorage.setItem(a.STORAGE_KEYS.SYNCED_AC_EVENTS,e)}static get subscription(){var t=this.sw_subscription_data||localStorage.getItem(a.STORAGE_KEYS.SUBSCRIPTION),e=null;if(t)try{e=JSON.parse(t)}catch(n){e=t}return e}static set subscription(t){var e="string"==typeof t?t:JSON.stringify(t);localStorage.setItem(a.STORAGE_KEYS.SUBSCRIPTION,e),G.set(a.STORAGE_KEYS.SW_SUBSCRIPTION,e)}static get optinDeferredUntil(){return parseInt(localStorage.getItem(a.STORAGE_KEYS.OPTIN_DEFERRED_UNTIL)||0,10)}static set optinDeferredUntil(t){null===t?localStorage.removeItem(a.STORAGE_KEYS.OPTIN_DEFERRED_UNTIL):localStorage.setItem(a.STORAGE_KEYS.OPTIN_DEFERRED_UNTIL,t)}static get logLevel(){return localStorage.getItem(a.STORAGE_KEYS.LOG_LEVEL)}static set logLevel(t){localStorage.setItem(a.STORAGE_KEYS.LOG_LEVEL,t)}static get hasRaisedUnsubscriptionEvent(){return localStorage.getItem(a.STORAGE_KEYS.HAS_RAISED_UNSUBSCRIPTION_EVENT)}static set hasRaisedUnsubscriptionEvent(t){localStorage.setItem(a.STORAGE_KEYS.HAS_RAISED_UNSUBSCRIPTION_EVENT,t)}static get isPermissionGranted(){return"true"===localStorage.getItem(a.STORAGE_KEYS.IS_PERMISSION_GRANTED)}static set isPermissionGranted(t){t?localStorage.setItem(a.STORAGE_KEYS.IS_PERMISSION_GRANTED,t):localStorage.removeItem(a.STORAGE_KEYS.IS_PERMISSION_GRANTED)}static handlePostSubscription(t,e){x.subscription=t,x.subscriberToken=e,x.hasRaisedUnsubscriptionEvent=""}}const N=()=>{const t=new Error("network error");return t.name="TypeError",t},k=({path:t,method:e,appendPlatform:n=!0,url:o=null,payload:s=null,contentType:r="application/json",acceptType:a="application/json",retryCount:l=null})=>i(void 0,void 0,void 0,(function*(){const i=o?new URL(o):new URL(`${(()=>{const{subdomain:t}=B;return`${B.apiEndpoint}/api/v1/${t}`})()}${t}`);return n&&i.searchParams.append("platform",B.platform),l&&i.searchParams.append("retry_count",`${l}`),new Promise(((t,n)=>{let o=new XMLHttpRequest;o.open(e,i.href,!0),o.setRequestHeader("Content-Type",r),o.setRequestHeader("Accept",a),s?o.send(r.match(/json/)?JSON.stringify(s):s):o.send(),o.onload=function(){let e=o.responseText;if(429===o.status&&n(N()),o.status>=200&&o.status<400){const n=a.match(/json/)?JSON.parse(e):e;t(n)}else n(e)},o.onerror=function(){n(N())},o.onabort=function(){n("Request Aborted")}}))}));class C{static run(){(x.queue||[]).forEach((t=>{setTimeout((()=>{this._request(t)}),1e3*t.retryCount)}))}static _enqueue(t){let e=t;return void 0===t.id&&(e=Object.assign({id:lt()},t)),x.queue=[...x.queue.slice(0,5),e],e}static _retryRequest(t){return i(this,void 0,void 0,(function*(){const e=Object.assign(Object.assign({},t),{retryCount:((null==t?void 0:t.retryCount)||0)+1});if(e.retryCount>5){return gt("APIRequestEventually",{request:e,connectionType:navigator.connection?navigator.connection.effectiveType:"NA"}),Promise.reject()}const n=this._enqueue(e);setTimeout((()=>{this._request(n)}),1e3*n.retryCount)}))}static _dequeue(t){x.queue=x.queue.filter((e=>e.id!==t.id))}static _request(t){return i(this,void 0,void 0,(function*(){try{this._dequeue(t);return yield k(t)}catch(e){return n(e)?this._retryRequest(t):(gt("APIRequestEventuallyError",{error:e,request:t}),Promise.reject(e))}}))}static get(t){const e=this._enqueue(t);return this._request(Object.assign(Object.assign({},e),{method:"GET"}))}static post(t){const e=this._enqueue(t);return this._request(Object.assign(Object.assign({},e),{method:"POST"}))}static put(t){const e=this._enqueue(t);return this._request(Object.assign(Object.assign({},e),{method:"PUT"}))}}class P{constructor(){this.configKey="pushowl_shopify_config-".concat(1.5,"-").concat(B.guid),this.permissionKey="pushowl_permission_not_granted-".concat(1.5,"-").concat(B.guid),this.subscriptionVerifiedKey="pushowl_subscription_verified-".concat(1.5,"-").concat(B.guid),this.optinSeenCountKey="pushowl_optin_seen_count",window.sessionStorage.setItem(a.STORAGE_KEYS.CURRENT_CONFIG_KEY,this.configKey)}get config(){var t=window.sessionStorage.getItem(this.configKey),e=null;if(t)try{e=JSON.parse(t)}catch(t){e=null}return e}set config(t){var e="string"==typeof t?t:JSON.stringify(t);window.sessionStorage.setItem(this.configKey,e)}get isPermissionNotGranted(){return"true"===window.sessionStorage.getItem(this.permissionKey)}set isPermissionNotGranted(t){window.sessionStorage.setItem(this.permissionKey,t),window.localStorage.setItem(this.permissionKey,t)}get subscriptionVerified(){return!!window.sessionStorage.getItem(this.subscriptionVerifiedKey)}set subscriptionVerified(t){window.sessionStorage.setItem(this.subscriptionVerifiedKey,t)}get optinSeenCount(){return parseInt(window.sessionStorage.getItem(this.optinSeenCountKey)||0,10)}set optinSeenCount(t){window.sessionStorage.setItem(this.optinSeenCountKey,t)}static get installPromptSeenCount(){return parseInt(window.sessionStorage.getItem(a.STORAGE_KEYS.INSTALL_PROMPT_SEEN_COUNT)||0,10)}static set installPromptSeenCount(t){window.sessionStorage.setItem(a.STORAGE_KEYS.INSTALL_PROMPT_SEEN_COUNT,t)}static get landingPageURL(){return sessionStorage.getItem(a.STORAGE_KEYS.LANDING_PAGE_URL)}static set landingPageURL(t){sessionStorage.setItem(a.STORAGE_KEYS.LANDING_PAGE_URL,t)}static get referrer(){return sessionStorage.getItem(a.STORAGE_KEYS.REFERRER)}static set referrer(t){sessionStorage.setItem(a.STORAGE_KEYS.REFERRER,t)}static get landingPageURLParams(){return sessionStorage.getItem(a.STORAGE_KEYS.LANDING_PAGE_URL_PARAMS)}static set landingPageURLParams(t){sessionStorage.setItem(a.STORAGE_KEYS.LANDING_PAGE_URL_PARAMS,t)}static set windowVariablesForOwly(t){sessionStorage.setItem(a.STORAGE_KEYS.PUSHOWL_SUBDOMAIN,t)}}const R=t=>t.startsWith("https://")?t:t.replace("//cdn.shopify.com","https://cdn.shopify.com"),A=t=>"object"==typeof t&&null!==t&&"src"in t?R(t.src):"string"==typeof t?R(t):null;class D extends class{constructor(){}}{constructor(t){super(),this.id=t.id,this.name=t.name,this.price=t.price/100,this.available=t.available,this.featured_image=A(t.featured_image)}}class L extends class{constructor(){}currentVariant(){}}{constructor(t){super(),this.id=t.id,this.title=t.title,this.featured_image=A(t.featured_image),this.price=ft(t.price);const e=t.variants;this.variants=e.map((t=>new D(t)))}getVariant(t){return t=parseInt(t),this.variants.find((e=>e.id==t))}currentVariant(){const t=ot("variant");if(!t){for(const t of this.variants)if(t.available)return t;return this.variants[0]}return this.getVariant(t)}}const M=/checkouts\/c\/([^\/]*)\/thank_you/;class U extends class{constructor(){this.product=null}static get section(){return"home"}static get productAlias(){return"all"}static get customerId(){}static getCart(){}getProductDetails(t=!1,e){}getRawCurrentProductDetails(){}}{constructor(){super(),this.productCache={}}static get section(){try{let{pageType:t}=window.ShopifyAnalytics.meta.page;if(t)return t!==h.PRODUCT&&/\/products\/(\S)/.test(location.pathname)&&(t=h.PRODUCT),t}catch(t){}if(void 0!==window.Shopify&&window.Shopify.Checkout&&("thank_you"===window.Shopify.Checkout.page||"checkout_one_thank_you"===window.Shopify.Checkout.page))return h.THANK_YOU;const{hostname:t}=location,e=location.pathname,n=e.split("/")[0],i=e.split("/")[1];if(M.test(e))return h.THANK_YOU;if(""===n)return h.HOME;if(n===m.CART)return h.CART;if(n===m.ACCOUNT&&i===m.ORDERS)return h.ORDER;if("account"===n&&!n)return h.ORDERS;if("checkout.shopify.com"===t||"checkouts"===i||e.indexOf("checkouts")>=0)return h.CHECKOUT;if(void 0!==window.__st&&window.__st.s){const t=window.__st.s.split("-")[0];if("collections"===t)return h.COLLECTION;if("products"===t)return h.PRODUCT}}static get productAlias(){let t=location.pathname.split("/");t=t.filter((t=>t));const e=t.map((t=>t.toLocaleLowerCase())).lastIndexOf("products");return-1===e?"":t[e+1]}static get customerId(){if("headless"===B.mode)return window.pushowl?window.pushowl.customerId:"";let t=null;return void 0!==window.__st&&window.__st.cid?t=window.__st.cid:void 0!==window.Shopify&&void 0!==window.Shopify.checkout&&window.Shopify.checkout.customer_id&&(t=window.Shopify.checkout.customer_id.toString()),t}static getCart(){return at({url:`/cart.js?random=${Date.now()}`}).then((t=>(t.updated_at=(new Date).toISOString(),t)),(()=>"Cart API failed"))}static get pageName(){const t=window.location.pathname.match(/\/pages\/([a-z0-9_-]+)$/);return t?t[1]:void 0}static get collectionName(){const t=window.location.pathname.match(/collections\/([a-z0-9_-]+)$/);return t?t[1]:void 0}static get collectionId(){return window.ShopifyAnalytics&&window.ShopifyAnalytics.meta&&window.ShopifyAnalytics.meta.page?window.ShopifyAnalytics.meta.page.resourceId:null}getProductDetails(t=!1,e){const n=e||U.productAlias;return this.productCache[n]&&!t?Promise.resolve(this.productCache[n]):at({url:`/products/${n}.js`}).then((t=>this.productCache[n]=new L(t)))}getRawCurrentProductDetails(){return Promise.resolve(window.ShopifyAnalytics.meta.product)}}class B{static get scriptUrl(){let t=document.getElementsByTagName("script");for(let e=0;e<t.length;e++){let n=t[e].src||"";if(n.match(/pushowl-\w+.js/))return n.match(/^http/)||(n=n.replace(/^\/\//,"https://")),n}return window.location.href}static get environment(){if(!B.scriptUrl)return a.ENVIRONMENT.production;let t=it(new URL(B.scriptUrl).search.substring(1)).environment;t&&(t=a.ENVIRONMENT[t]);const e=window.pushowlEnvironment||t||a.ENVIRONMENT.production;return e!==a.ENVIRONMENT.production&&(x.pushowlEnvironment=e),e}static get isProduction(){return B.environment==a.ENVIRONMENT.production}static get apiEndpoint(){return u[B.environment]}static get configApiEndpoint(){return d[B.environment]}static get subdomain(){let t={};B.scriptUrl&&(t=it(new URL(B.scriptUrl).search.substring(1))),window.pushowl&&window.pushowl.subdomain&&(window.pushowlSubdomain=window.pushowl.subdomain);const e=window.pushowlSubdomain||t.subdomain;return window.pushowlSubdomain=e,window.pushowlSubdomain||t.subdomain}static get platform(){if(!B.scriptUrl)return"shopify";const t=it(new URL(B.scriptUrl).search.substring(1)).platform;return t&&!["shopify","sendinblue","bigcommerce"].includes(t)&&B.logToServer({message:"unknown platform detected",subdomain:B.subdomain,data:{platform:t,script_url:B.scriptUrl}}),t||"shopify"}static get plugin(){if(!B.scriptUrl)return null;return it(new URL(B.scriptUrl).search.substring(1)).plugin}static get guid(){if(!B.scriptUrl)return null;let t=it(new URL(B.scriptUrl).search.substring(1));return window.pushowlGUID||t.guid}static get visitorId(){if(!B.scriptUrl)return null;return it(new URL(B.scriptUrl).search.substring(1)).visitor_id}static get shopUrl(){return location.protocol+"//"+location.host}static serviceWorkerUrl(t={}){if("bigcommerce"===B.platform)return`${B.shopUrl}/pushowl-service-worker.js?v=2&subdomain=${this.subdomain}`;if("headless"===B.mode){const e=B.platform,n=B.plugin;return"enabled"===t.root_service_worker?`${window.location.origin}/service-worker.js?v=2&subdomain=${this.subdomain}`:"sendinblue"===e&&window.__st&&window.Shopify?`${B.shopUrl}/apps/sendinblue/service-worker.js?v=2&subdomain=${this.subdomain}`:"sendinblue"===e&&n===O?`${B.shopUrl}/wp-content/plugins/mailin/js/service-worker.js?v=2&subdomain=${this.subdomain}`:"sendinblue"===e&&n===T?`${B.shopUrl}/modules/sendinblue/views/js/service-worker.js?v=2&subdomain=${this.subdomain}`:`${B.shopUrl}/${"sendinblue"===e?"sendinblue":"pushowl"}/service-worker.js?v=2&subdomain=${this.subdomain}`}return"enabled"===t.should_log?`${B.shopUrl}/apps/pushowl/sdks/service-worker-logsink.js?v=2&subdomain=${this.subdomain}`:`${B.shopUrl}/apps/pushowl/sdks/service-worker.js?v=2&subdomain=${this.subdomain}`}static get isWorkerAvailable(){return st().isApnsSafari?Promise.resolve(!0):new Promise((t=>{const e=((new P).config||{}).flags,n=B.serviceWorkerUrl(e),i="enabled"===e.sw_get_request;fetch(n,{method:i?"GET":"HEAD"}).then((e=>{if(e.status>=200&&e.status<300)return t(!0);t(!1)}))}))}static get webPushId(){return p[this.environment]||p[a.ENVIRONMENT.production]}static getServiceWorkerUrlWithIntergrations(t,e={}){const n=Object.keys(e).filter((t=>"enabled"===e[t].status));if(!n.length)return t;return`${t}${new URL(t).search?"&":"?"}integrations=${n.join(",")}`}static logToServer({message:t,subdomain:e,sessionHash:n="session",data:i}){return C.post({url:`${B.apiEndpoint}/logs/v1/`,acceptType:"text/plain",payload:[{level:"warn",subscriber_token:window.localStorage&&window.localStorage.getItem("pushowl_subscriber_token"),subdomain:e,message:t,session_hash:n,timestamp:(new Date).toISOString(),data:Object.assign({release:"cdfcd55"},i)}]})}static getPreviewLib(t){const e=B.getPreviewBranch();return sessionStorage.setItem("pushowl_branch",e),"local"===e?`https://localhost:3008/latest/sdks/${t}?environment=staging&platform=${B.platform}`:null}static loadPreviewLib(t){const e=document.createElement("script"),n=this.getPreviewLib(t);e.onload=()=>{},n&&(e.src=n,e.setAttribute("async",""),document.head.appendChild(e),window.pushowlPreviewLoaded=!0)}static getPreviewBranch(){const t=new URLSearchParams(window.location.search).get("pushowl_branch")||sessionStorage.getItem("pushowl_branch");return window.pushowlPreviewLoaded?null:t}static isDisabled(){const t=new URLSearchParams(window.location.search).get("poTaskType")||sessionStorage.getItem("poTaskType");sessionStorage.setItem("pushowl_task_type",t);return t===_}}const j=()=>"shopify"!==B.platform||!B.guid||!!window.Shopify.customerPrivacy&&window.Shopify.customerPrivacy.userCanBeTracked(),F=({eventName:t,eventData:e})=>{try{const n=new P;if("enabled"===n.config.flags.brevo_email&&window.sendinblue){const i={};n.config.privacy&&U.customerId&&(i.customerId=U.customerId),x.email&&(i.email=x.email),window.sendinblue.track(t,i,e)}}catch(t){mt("Error in brevoTrack",t)}},H=()=>!!window.indexedDB;class G{static set(t,e){return i(this,void 0,void 0,(function*(){if(H())try{!function(t,e){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:r())("readwrite",(function(n){return n.put(e,t),o(n.transaction)}))}(t,e)}catch(t){mt("error in indexedDBUtil",t)}}))}static get(t){return i(this,void 0,void 0,(function*(){if(H())try{return function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:r())("readonly",(function(e){return o(e.get(t))}))}(t)}catch(t){return mt("error in indexedDBUtil",t),Promise.reject(t)}}))}static del(t){return i(this,void 0,void 0,(function*(){if(H())try{!function(t){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:r())("readwrite",(function(e){return e.delete(t),o(e.transaction)}))}(t)}catch(t){mt("error in indexedDBUtil",t)}}))}}var $,K;!function(t){t.CHROME="chrome",t.FIREFOX="firefox",t.SAFARI="safari",t.OTHER="other"}($||($={})),function(t){t.ONE_STEP="oneStep",t.TWO_STEP="twoStep",t.OFF="off"}(K||(K={}));var V,Y,q,z,W,Z;!function(t){t.CUSTOM_BUTTONS="custom-buttons",t.FLYOUT_WIDGET="flyout-widget",t.PARTNER_JS_API="partner-js-api"}(V||(V={})),function(t){t.NOT_SHOPIFY="not_shopify",t.STORAGE_NOT_DEFINED="storage_not_defined",t.LOCALSTORAGE_NOT_AVAILABLE="localstorage_not_available",t.IN_COMAPTIBLE_BROWSER="incompatible_browser",t.NO_SERVICE_WORKER="no_service_worker",t.NO_SUBDOMAIN="no_subdomain",t.OLD_IOS_DEVICE="old_ios_device",t.MICROSOFT_EDGE="microsoft_edge",t.NOT_ADDED_TO_HOME_SCREEN="not_added_to_home_screen",t.INCOGNITO="incognito",t.NOTIFICATION_NOT_DEFINED="notification_not_defined",t.NO_FILE_SYSTEM="no_file_system",t.DISABLED_RESYNC="disable_resync"}(Y||(Y={})),function(t){t.NO_SUBSCRIBER_TOKEN="no_subsriber_token",t.INVALID_SUBSCRIBER_TOKEN="invalid_subscriber_token",t.PERMISSION_DENIED="permission_denied",t.PERMISSION_NOT_GRANTED="permission_not_granted",t.INVALID_STATE_ERROR="InvalidStateError",t.UNKNOWN_EVENT="unknown_event"}(q||(q={})),function(t){t.BACK_IN_STOCK="back_in_stock",t.PRICE_DROP="price_drop"}(z||(z={})),function(t){t.SILENT="silent",t.DEBUG="debug"}(W||(W={})),function(t){t.CART_DELETED="cart_deleted",t.CART_UPDATED="cart_updated",t.PRODUCT_VIEWED="product_viewed"}(Z||(Z={}));const J=[{name:"track"},{name:"identify"},{name:"trackLink"},{name:"page"},{name:"viewProduct",isEcommerce:!0},{name:"viewCategory",isEcommerce:!0},{name:"search",isEcommerce:!0}],X=function(){function t(t){t=t||{};const e={url:location.href,headers:{"User-Agent":navigator.userAgent}};return{event_id:"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})),platform:"javascript",release:"cdfcd55",extra:t,request:e}}function e(t){return Math.random()<.95?Promise.resolve():fetch("https://o79286.ingest.sentry.io/api/1527936/store/?sentry_version=7&sentry_key=8f53de1cdf86490fb8e55518e1a5d035",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}function n(n,i){const o=t(i);return o.message=n,e(o)}return{log:n,logException:function(i,o){if(i)try{(o=o||{}).errorDump={str:String(i),stack:i&&i.stack};const n=t(o);return n.exception=function(t){const e=t.stack||"";if(!e)return;const n=e.split("\n").map((t=>t.trim())),i=n.filter((t=>t.startsWith("at"))),o=i.map((function(t){let e="",n=0,i=0,o="";const s=t.split(/[ ]+/);if("at"===s[0].trim()&&s.length>1){let t="";s.length>2?(e=s[1],t=s[2]):t=s[1],t=t.replace("(","").replace(")","");const r=t.split(":");r.length>1&&(n=parseInt(r[r.length-1],0),i=parseInt(r[r.length-2],0),o=r.slice(0,r.length-2).join(":"))}return{in_app:!0,function:e,colno:Number(n)||n,lineno:Number(i)||i,filename:o}}));return o.reverse(),{values:[{type:t.name||"Error",value:t.message||String(t),stacktrace:{frames:o}}]}}(i),e(n)}catch(t){n(String(t),t),n(String(i),i)}}}}();function Q({position:t,device:e,customConfig:n,isExpanded:i}){if("desktop"===e){const e="15px",o="15px",s="15px",r="15px",a=68,l=`calc(50% - ${568}px / 2)`,c=`calc(50% - ${a}px / 2)`,u=`calc(50% - ${a}px / 2)`;if(n.hasOwnProperty("bottom")&&25===n.bottom&&15===n.left&&"auto"===n.right)switch(t){case"bottom-left":return{bottom:o,left:s};case"bottom-right":return{bottom:o,right:r};case"bottom-center":return i?{bottom:o,left:l}:{bottom:o,left:c};case"top-left":return{top:e,left:s};case"top-right":return{top:e,right:r};case"top-center":return i?{top:e,left:l}:{top:e,left:c};case"center-left":return{top:u,left:s};case"center-right":return{top:u,right:r};default:return n}let d={left:s};for(let t in n)d[t]=`${n[t]}px`;return d}if("mobile"===e){const e="8px",i="8px",o="8px",s="8px",r=`calc(50% - ${48}px / 2)`;if(n.hasOwnProperty("bottom")&&n.hasOwnProperty("left")&&15===n.bottom&&15===n.left)switch(t){case"bottom-left":return{bottom:i,left:o};case"bottom-right":return{bottom:i,right:s};case"top-left":return{top:e,left:o};case"top-right":return{top:e,right:s};case"center-left":return{top:r,left:o};case"center-right":return{top:r,right:s};default:return n}let a={isCustomConfig:!0};for(let t in n)a[t]=`${n[t]}px`;return a}}function tt(t){let e=document.implementation.createHTMLDocument();return e.body.innerHTML=t,e.body.children[0]}function et(){let t=navigator.userAgent;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile|mobile|CriOS/i.test(t)}function nt(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(t){return null}}function it(t){return[...new URLSearchParams(t).entries()].reduce(((t,[e,n])=>Object.assign(Object.assign({},t),{[e]:n})),{})}function ot(t,e=null){e||(e=window.location.href);return it(new URL(e).search)[t]}function st(){let t=navigator.userAgent,e=t.search("Firefox")>=0,n=!!window.chrome;const i=void 0!==window.PushManager,o=(({ua:t,maxTouchPoints:e})=>{if(!(/iPad|iPhone|iPod|Mac OS X/.test(t)&&e>0))return!1;const n=t.match(/EdgiOS\/(\d+\.\d+)/);if(n&&n.length>=2)return parseFloat(n[1])>=112;const i=t.match(/Version\/(\d+\.\d+)/);if(i&&i.length>=2)return parseFloat(i[1])>=16.4;const o=t.match(/CPU iPhone OS (\d+_\d+)/);if(o&&o.length>=2)return parseFloat(o[1].replace("_","."))>=16.4;return!1})({ua:t,maxTouchPoints:navigator.maxTouchPoints});let s=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&!o,r=!!window.safari;return{isiOS:o,isSafari:r,isApnsSafari:r&&!i,isFirefox:e,isChrome:n,isOldIOS:s,name:n?$.CHROME:r?$.SAFARI:e?$.FIREFOX:$.OTHER}}function rt(t){const e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(e),i=new Uint8Array(n.length);for(let t=0;t<n.length;++t)i[t]=n.charCodeAt(t);return i}function at({method:t="GET",url:e,contentType:n="application/json",acceptType:i="application/json",payload:o}){return new Promise(((s,r)=>{let a=new XMLHttpRequest;a.open(t,e,!0),a.setRequestHeader("Content-Type",n),a.setRequestHeader("Accept",i),o?a.send(n.match(/json/)?JSON.stringify(o):o):a.send(),a.onload=function(){let t=a.responseText;if(a.status>=200&&a.status<400){const e=i.match(/json/)?JSON.parse(t):t;s(e)}else r(t)}}))}function lt(t=7){for(var e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_-",n="",i=t;i--;)n+=e[~~(Math.random()*e.length)];return n}function ct({name:t,value:e}){document.cookie=`${t}=${encodeURIComponent(e)};domain=${window.location.hostname}`}function ut({name:t,value:e,days:n=1,path:i="/"}){const o=new Date(Date.now()+864e5*n).toUTCString();document.cookie=t+"="+encodeURIComponent(e)+"; expires="+o+"; path="+i}function dt(t){return document.cookie.split("; ").reduce(((e,n)=>{const i=n.split("=");return i[0]===t?decodeURIComponent(i[1]):e}),"")}function pt(t,e){ut({name:t,value:"",days:-1,path:e})}const ht=[];function mt(...t){const e=console;ht.push(t),(localStorage.getItem("pushowl_log_level")===W.DEBUG||location.href.match(/poTaskType=debug/))&&e.log("%c🦉PushOwl","background: #fb446a; color: white; padding: 2px 0.5em; border-radius: 0.5em;",...t)}function bt(t,e){const n=console;ht.push([t,e]),(localStorage.getItem("pushowl_log_level")===W.DEBUG||location.href.match(/poTaskType=debug/))&&(t&&mt(t),n.table(e))}function gt(t,e={}){if(navigator.userAgent.match(/Instagram|FBAN/))return;if(n(t))return;if([Y.NOTIFICATION_NOT_DEFINED,Y.OLD_IOS_DEVICE,Y.MICROSOFT_EDGE,Y.NO_SERVICE_WORKER,Y.INCOGNITO,Y.NO_FILE_SYSTEM,Y.LOCALSTORAGE_NOT_AVAILABLE].includes(t))return;let i="";window.pushowl&&(i=window.pushowl.getSubdomain?window.pushowl.getSubdomain():window.pushowl.subdomain),X.logException("string"==typeof t?new Error(t):t,Object.assign({breadcrumbs:ht,subdomain:i,url:window.location.href},e))}const ft=t=>"number"==typeof t?t/100:t,_t=t=>{const e=(t=>2===Object.keys(t).length&&t.hasOwnProperty("items")&&(t.hasOwnProperty("token")||t.hasOwnProperty("checkout_token")))(t),n={id:void 0,data:void 0},i=0===t.item_count?Z.CART_DELETED:Z.CART_UPDATED,o=!e&&t.id?t.id:t.token||t.checkout_token;o&&(n.id=`cart:${o}`,n.data=t.id&&!e?t:(t=>({affiliation:B.subdomain,currency:ft(t.currency),discount:ft(t.total_discount),total:ft(t.total_price),discount_taxinc:"",items:t.items.map((t=>({available_now:!0,category:null,description_short:t.product_description,disc_amount:ft(t.discounted_price),disc_amount_taxinc:"",disc_rate:"",id:t.id,image:t.image,name:t.title,price:ft(t.price),price_predisc:"",price_predisc_taxinc:"",price_taxinc:"",quantity:t.quantity,size:"",sku:t.sku,tax_amount:"",tax_name:"",tax_rate:"",url:`${window.location.origin}${t.url}`,variant_id:t.variant_id,variant_id_name:t.variant_title}))),shipping:"",shipping_taxinc:"",subtotal:"",subtotal_predisc:"",subtotal_predisc_taxinc:"",subtotal_taxinc:"",tax:"",total_before_tax:"",url:`${window.location.origin}/cart`}))(t)),F({eventName:i,eventData:n})};function wt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function vt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?wt(Object(n),!0).forEach((function(e){Ot(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function St(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}function yt(t,e,n,i,o,s,r){try{var a=t[s](r),l=a.value}catch(t){return void n(t)}a.done?e(l):Promise.resolve(l).then(i,o)}function Et(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var s=t.apply(e,n);function r(t){yt(s,i,o,r,a,"next",t)}function a(t){yt(s,i,o,r,a,"throw",t)}r(void 0)}))}}function Ot(t,e,n){return(e=St(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tt(t,e){if(null==t)return{};var n,i,o=function(t,e){if(null==t)return{};var n,i,o={},s=Object.keys(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}class It{static _request(t){return i(this,void 0,void 0,(function*(){return yield k(t)}))}static get(t){return this._request(Object.assign(Object.assign({},t),{method:"GET"}))}static post(t){return this._request(Object.assign(Object.assign({},t),{method:"POST"}))}static put(t){return this._request(Object.assign(Object.assign({},t),{method:"PUT"}))}}class xt{static createRequestObj(t){let e=t;return void 0===t.id&&(e=Object.assign({id:lt()},t)),e}static _retryRequest(t){return i(this,void 0,void 0,(function*(){const e=Object.assign(Object.assign({},t),{retryCount:((null==t?void 0:t.retryCount)||0)+1});if(e.retryCount>5){return gt("APIRequestSimpleRetry",{request:e,connectionType:navigator.connection?navigator.connection.effectiveType:"NA"}),Promise.reject()}const n=this.createRequestObj(e);setTimeout((()=>{this._request(n)}),1e3*n.retryCount)}))}static _request(t){return i(this,void 0,void 0,(function*(){try{return yield k(t)}catch(e){if(n(e))return this._retryRequest(t);gt("APIRequestSimpleRetryError",{error:e,request:t}),Promise.reject(e)}}))}static get(t){return this._request(Object.assign(Object.assign({},t),{method:"GET"}))}static post(t){return this._request(Object.assign(Object.assign({},t),{method:"POST"}))}static put(t){return this._request(Object.assign(Object.assign({},t),{method:"PUT"}))}}class Nt{constructor(){var{subdomain:t}=B;this.endpoint=B.apiEndpoint,this.subscriber_refresh_endpoint="".concat(this.endpoint,"/api/v1/accounts/").concat(t,"/subscriber/refresh/"),this.checkout_sync_endpoint="".concat(this.endpoint,"/api/v1/").concat(t,"/subscriber/event/checkout-sync/"),G.set("subscriber_refresh_endpoint",this.subscriber_refresh_endpoint),P.landingPageURL||(P.landingPageURL=document.URL),P.referrer||(P.referrer=document.referrer),P.landingPageURLParams||(P.landingPageURLParams=window.location.search),x.originalURLParams||(x.originalURLParams=window.location.search)}config(){return"headless"===B.mode?It.get({path:"/subscriber/config/widget/?guid=".concat(B.guid)}):xt.get({url:"".concat(B.configApiEndpoint,"/api/v1/").concat(B.subdomain,"/subscriber/config/widget/?guid=").concat(B.guid)})}sendSubscription(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,s=new P;if(s.config&&s.config.flags&&"enabled"===s.config.flags.disable_resync&&e)return Promise.reject(Y.DISABLED_RESYNC);var r={};P.landingPageURLParams.slice(1).split("&").filter((t=>t.includes("utm_"))).forEach((t=>{var[e,n]=t.split("=");r[e]=n}));var a={};x.originalURLParams.slice(1).split("&").filter((t=>t.includes("po_"))).forEach((t=>{var[e,n]=t.split("=");a[e]=n}));var l=window.location.href,c=new URLSearchParams(window.location.search),u=!0;if(c.get("po_url")&&(u=!1,l=c.get("po_url")),st().isOldIOS)return mt("PushOwl does not support iOS before 16.4","platform: ".concat(navigator.platform),"Browser: ".concat(st().name)),Promise.reject(Y.OLD_IOS_DEVICE);var d={subscription:t,browser:st().name,previous_token:x.subscriberToken,website_push_id:n||B.webPushId,customer_id:s.config.privacy?U.customerId:null,language:window.navigator.language,timezone:nt(),dispatch_method:st().isApnsSafari?"apns":"vapid",user_agent:navigator.userAgent,guid:B.guid,optin_seen_count:s.optinSeenCount,context:vt(vt({isPushowlThemeAppExtentionEnabled:!!window.isPushowlThemeAppExtentionEnabled,isiOS:st().isiOS,is_resync:e,subscribe_url:l,session_token:x.sessionToken,visitor_token:x.visitorToken,sib_visitor_id:B.visitorId,widget_source:window.poSubscriptionSource,worker_available:u},r),{},{permanent:vt({},a),temporary:{referrer:P.referrer,landing_url:P.landingPageURL}}),source:i,source_id:o};return xt.post({url:"".concat(B.apiEndpoint,"/api/v2/accounts/").concat(B.subdomain,"/subscribers/webpush/"),payload:d}).then((t=>(t&&t.result||mt("Invalid /subscribe response. response:",t),t.result.token))).catch((()=>Promise.reject("Send Subscription API Failed")))}refreshSubscription(t,e,n){var i={previous_token:t,previous_subscription:e,current_subscription:n};return i.context={subscribe_url:window.location.href,session_token:x.sessionToken,visitor_token:x.visitorToken,sib_visitor_id:B.visitorId},st().isOldIOS?(mt("PushOwl does not support iOS before 16.4","platform: ".concat(navigator.platform),"Browser: ".concat(st().name)),Promise.reject(Y.OLD_IOS_DEVICE)):It.post({url:this.subscriber_refresh_endpoint,payload:i}).then((t=>t.result.token)).catch((()=>Promise.reject("Refresh Subscription API Failed")))}syncSubscriber(){var t={data:[{key:"customer_id",value:U.customerId}],token:x.subscriberToken,context:{subscribe_url:window.location.href,session_token:x.sessionToken,visitor_token:x.visitorToken}};return xt.put({url:"".concat(B.apiEndpoint,"/api/v1/accounts/").concat(B.subdomain,"/subscriber/"),payload:t})}syncCart(t,e){var n=new P,i={subscriber_token:x.subscriberToken,customer_id:n.config.privacy?e||U.customerId:null,browser:st().name,cart_json:t,origin:window.location.origin,store_root:((window.Shopify||{}).routes||{}).root||"/"};return It.post({path:"/subscriber/event/cart-sync/",payload:i})}syncProductView(t){var e={subscriber_token:x.subscriberToken,session:x.sessionToken,viewed_time:~~(Date.now()/1e3),product_data:t,store_root:((window.Shopify||{}).routes||{}).root||"/"};return It.post({path:"/subscriber/event/product-view/",payload:e})}sendEvent(t,e){return Et((function*(){return xt.post({path:"/subscriber/event/".concat(t,"/"),payload:e}).catch((t=>Promise.reject("Event Update failed")))}))()}unsubscribe(t){return C.post({url:"".concat(B.apiEndpoint,"/api/v1/accounts/").concat(B.subdomain,"/subscriber/unsubscribe/"),payload:{token:t,sib_visitor_id:B.visitorId}})}syncSubscriberTokenAndCheckoutId(t){var e=JSON.stringify({subscriber_token:x.subscriberToken,checkout_token:t});navigator.sendBeacon(this.checkout_sync_endpoint,e)}debugLog(t){return C.post({path:"/subscriber/debug/",payload:t})}subscribeThroughPopup(t){var{subscriptionData:e,flowId:n,nodeId:i}=t,o={subscription_data:e,token:x.subscriberToken,source:"optin_flows",source_id:i};return It.post({path:"/dashboard/optin-flows/".concat(n,"/subscribers/"),payload:o})}identifyBrevoContactThroughPhoneNumber(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(new P).config.brevo_ma_key,i=dt("sib_cuid");if(n&&i&&t)return It.post({url:"https://in-automate.brevo.com/p",appendPlatform:!1,payload:{key:n,sib_type:"identify",cuid:i,ma_url:document.location.href,contact:vt(vt({},e),{},{sms:t}),email_id:x.email?x.email:"".concat(t.replace(/\D/g,""),"@mailin-sms.com")}})}}class kt{constructor(t){this.inclusions=t.inclusions,this.exclusions=t.exclusions}}class Ct{constructor(t){this.url=new kt(t.url)}processCondition(t,e){var n=e.inclusions,i=e.exclusions;return n.some((e=>new RegExp(e).test(t)))&&!i.some((e=>new RegExp(e).test(t)))}processUrlActivationRule(){try{var t=this.url,e=window.location.href,n=this.processCondition(e,t);return mt("[Checking page url condition]","Condition: ",this.url," / Result: ".concat(n?"✅":"❌")),n}catch(t){return!0}}}class Pt{constructor(t){this.flyout=new Gt(t.flyout)}}class Rt{constructor(t){this.type=t.type,t.config&&(this.config=t.config,this.config.overlay=new At(this.config.overlay))}}class At{constructor(t){this.enabled=t.enabled,this.title=t.title,this.subtitle=t.description||t.subtitle,this.branding=t.branding}}class Dt{constructor(t){this.money_format=t.money_format}}class Lt{constructor(t){this.enabled=t.enabled,this.text=t.text}}class Mt{constructor(t){this.unsubscribe=new Lt(t.unsubscribe),this.access_data=new Lt(t.access_data),this.delete_data=new Lt(t.delete_data)}}class Ut{constructor(t){this.enabled=t.enabled,this.message=t.message,this.actions=new Mt(t.actions)}}class Bt{constructor(t){this.notification_preference=new Ut(t.notification_preference),this.customer_id=t.customer_id}}class jt{constructor(t){this.bottom=t.bottom||15,this.diameter=t.diameter||68,this.left=t.left||15,this.right=t.right||"auto"}}class Ft{constructor(t){this.bottom=t.bottom||15,this.left=t.left||15,this.diameter=t.diameter||48}}class Ht{constructor(t){this.desktop=new jt(t.desktop),this.mobile=new Ft(t.mobile),this.color=t.color||"rgb(51, 51, 51)",this.overlay=t.overlay}}class Gt{constructor(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.enabled=t.enabled,this.title=t.title,this.buttonText=t.button_text||t.buttonText,this.postSubscriptionTitle=t.post_subscription_message||t.postSubscriptionTitle,this.theme=t.theme,this.position=t.position,this.overlay=t.overlay}static create_instance(t){var e=new Gt;e.enabled=t.enabled;var n=t.metadata;return e.metadata=n,e.title=t.title||n.title,e.buttonText=t.buttonText||n.yes_button.text,e.postSubscriptionTitle=t.postSubscriptionTitle||n.post_subscription.post_subscription_widget.title,e}}class $t{constructor(t){t=this.preProcess(t),this.home=new Pt(t.home),this.optin=t.optin?new Rt(t.optin):null,this.brevo_ma_key=t.brevo_ma_key,this.price_drop=Gt.create_instance(t.price_drop),this.back_in_stock=Gt.create_instance(t.back_in_stock),this.shop=new Dt(t.shop),this.abandoned_cart_enabled=t.abandoned_cart_enabled,this.browse_abandonment_enabled=t.browse_abandonment_enabled,this.optin_report_enabled=t.optin_report_enabled,this.is_beta=t.is_beta||!1,this.privacy=new Bt(t.privacy),this.vapid_public_key=t.vapid_public_key,this.activation_rule=t.activation_rule&&new Ct(t.activation_rule),this.flyout_config=t.flyout_config&&new Ht(t.flyout_config),this.branding=void 0===t.branding||t.branding,this.logo=t.logo,this.flags=t.flags,this.wid=t.wid,this.integrations=t.integrations,this.website_push_id=t.website_push_id,this.service_worker=t.service_worker,this.ios_prompt=t.ios_prompt,this.optin_flows=t.optin_flows}preProcess(t){var e=void 0===t.branding||t.branding;return t.optin&&t.optin.config&&t.optin.config.overlay&&(t.optin.config.overlay.branding=e),t}}var Kt={get(t){var e=new P,n=new Nt;return new Promise((i=>{var o=t?null:e.config,s=()=>n.config().then((t=>{var n=new $t(t.result);e.config=n,i(n),mt("Config fetched: from backend.",n)})).catch((t=>{mt("Error on fetching config",t),gt(t)}));if(o){mt("Config fetched: from local cache.",o);try{i(new $t(o))}catch(t){s()}}else s()}))}};function Vt(t){var{subdomain:e}=t;return new Promise(((t,n)=>{"undefined"==typeof Storage&&n(Y.STORAGE_NOT_DEFINED),!0!==function(){let t="test";try{return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch(t){return!1}}()&&n(Y.LOCALSTORAGE_NOT_AVAILABLE),/Edge/.test(navigator.userAgent)&&n(Y.MICROSOFT_EDGE),e||n(Y.NO_SUBDOMAIN),t()}))}var Yt=()=>void 0===window.Notification?(mt(Y.NOTIFICATION_NOT_DEFINED),!1):st().isOldIOS||st().isApnsSafari||"serviceWorker"in navigator?st().isOldIOS?(mt(Y.OLD_IOS_DEVICE),!1):!(st().isiOS&&!navigator.standalone)||(mt(Y.NOT_ADDED_TO_HOME_SCREEN),!1):(mt(Y.NO_SERVICE_WORKER),!1);function qt(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=new Nt;return new Promise(((r,l)=>{s.sendSubscription(t,e,n,i,o).then((e=>{x.handlePostSubscription(t,e),ct({name:a.STORAGE_KEYS.SUBSCRIBER_TOKEN,value:e}),r(e)})).catch((t=>{mt("🔴 Send Subscription Failed",t),l(t)}))}))}var zt={validateOrSyncSubscription(t){var{subscription:e,websitePushId:n}=t;return new Promise(((t,i)=>{var o=x.subscription;if(o)if(e.endpoint===o.endpoint)t();else{var s=new Nt;mt("Refreshing old subscription on server..."),s.refreshSubscription(x.subscriberToken,o,e).then((n=>{x.handlePostSubscription(e,n),ct({name:a.STORAGE_KEYS.SUBSCRIBER_TOKEN,value:n}),t()})).catch((t=>{i(t)}))}else mt("Syncing new subscription to server"),qt(e,!1,n).then(t)}))},verifySubscriber(t){var{browserHandler:e}=t,n=new P;return mt("Verifying subscriber..."),new Promise(((t,i)=>{x.subscriberToken?x.subscriberToken.match(/failed/i)?(mt("🔴 Subscriber could not be verified. Reason: ",q.INVALID_SUBSCRIBER_TOKEN),i(q.INVALID_SUBSCRIBER_TOKEN)):n.subscriptionVerified?t():st().isApnsSafari?e.isPermissionGranted?t():i():B.isWorkerAvailable.then((n=>{n?e.getSubscription().then((e=>{this.validateOrSyncSubscription({subscription:e}).then((()=>{t(),mt("🟢 Subscriber verified.")})).catch((()=>{i(),mt("🔴 Subscriber could not be verified.")}))})).catch(((t,e)=>{i(t,e),mt("🔴 Subscription could not be fetched.",t,e)})):e.isPermissionGranted?t():i()})):(i(q.NO_SUBSCRIBER_TOKEN),mt("🔴 Subscriber could not be verified. Reason: ",q.NO_SUBSCRIBER_TOKEN))}))},handleSubscription(t){var{browserHandler:e,resolve:n,reject:i,areWeResyncing:o,websitePushId:s,showHintScreenOnError:r,hintscreenHandler:a,enableHintScreen:l,source:c,source_id:u}=t,d=new P,p=new Date;e.getSubscription().then((t=>{l&&a.purge(),qt(t,o,s,c,u).then((()=>{var{subscriberToken:t}=x;n({subscriberToken:t}),new BroadcastChannel("pushowl").postMessage({subscriberToken:t,subdomain:B.subdomain})})).catch(i),o?mt("🟢 Resync-subscription successfull. (bcoz permission was granted but didn't have a valid subscription)",t):(mt("🟢 Subscription successfull",t),document.dispatchEvent(new Event("SubscribedToPushOwl")),this.trackBrowserPromptAnalytics(new Date-p,"allowed"))})).catch((t=>{a&&a.purge(),r&&a.show(),d.isPermissionNotGranted=!0,mt("🔴 Subscription failed",t),o||this.trackBrowserPromptAnalytics(new Date-p,t),i(t)}))},subscribe(t){var{enableHintScreen:e=!1,hintScreenData:n=null,showHintScreenOnError:i=!1,websitePushId:o,browserHandler:s,source:r,source_id:a}=t,l=new P,c=s.isPermissionGranted;return new Promise(((t,u)=>{var d;e?Promise.resolve().then((function(){return Xe})).then((p=>{var{PushowlHintScreenHandler:h}=p;(d=new h({onDismiss:()=>{l.isPermissionNotGranted=!0,l.config.optin_report_enabled&&window.poAnalytics.track("BrowserPromptOverlayDismissed",{optinSeenCount:l.optinSeenCount})}})).show(n),this.handleSubscription({browserHandler:s,resolve:t,reject:u,areWeResyncing:c,websitePushId:o,showHintScreenOnError:i,hintscreenHandler:d,enableHintScreen:e,source:r,source_id:a})})):this.handleSubscription({browserHandler:s,resolve:t,reject:u,areWeResyncing:c,websitePushId:o,showHintScreenOnError:i,hintscreenHandler:null,enableHintScreen:e,source:r,source_id:a})})).catch((t=>{mt("Error encountered in loading Pushowl Hint Screen: ".concat(t.message))}))},subscribeIfNotAlready(t){var{enableHintScreen:e=!1,showHintScreenOnError:n=!0,websitePushId:i,browserHandler:o,hintScreenData:s=null}=t;return new Promise(((t,r)=>{o.isPermissionGranted?x.subscriberToken?t(!0):this.subscribe({enableHintScreen:!1,showHintScreenOnError:!1,websitePushId:i,browserHandler:o,hintScreenData:s}).then((()=>t(!0))).catch((t=>r(t))):this.subscribe({enableHintScreen:e,showHintScreenOnError:n,websitePushId:i,browserHandler:o,hintScreenData:s}).then((()=>t(!0))).catch((t=>r(t)))}))},update(t,e){var n=new Nt;return e.subscriber_token=x.subscriberToken,n.sendEvent(t,e)},subscribeProduct(t){var{context:e,automation:n,product:i,variant:o,source:s}=t;return this.subscribeIfNotAlready({enableHintScreen:!0,websitePushId:e.config.website_push_id,browserHandler:e.browserHandler}).then((()=>this.update(n,{product_id:i.id,product:i,variant:o,source:s,permission:window.Notification&&window.Notification.permission}).then((t=>{var{token:e}=t.result;e&&(x.subscriberToken=e),mt("Product subscribed for ".concat(n,". Product ").concat(i.id,". Variant ").concat(o.id,". Source: ").concat(s))})).catch(gt)))},unsubscribe(t){var e=new Nt;t.isPermissionGranted?e.unsubscribe(x.subscriberToken).then((()=>{mt("🟢 Unsubscription successfull")})).catch((t=>{mt("🔴 Unsubscription failed",t)})):mt("🟢 Unsubscription successfull")},trackBrowserPromptAnalytics(t,e){var n=new P;if(n.config.optin_report_enabled){window.poAnalytics.track("BrowserPromptShown",{delay:t,optinSeenCount:n.optinSeenCount});var i={allowed:"BrowserPromptAllowClicked",denied:"BrowserPromptDenyClicked",default:"BrowserPromptCloseClicked"};i[e]&&window.poAnalytics.track(i[e],{delay:t,optinSeenCount:n.optinSeenCount})}}},Wt=["type"];const Zt="po_visitor";class Jt{constructor({endpoint:t,props:e}){this.endpoint=t,this.meta={},this.initVisitor(),this.setVisitorProperties(e);let n=null;j()?n=dt(Zt):pt(Zt,"/"),this.setVisitorProperties({sessionId:n,language:navigator.language})}initVisitor(){let t=null;j()?t=dt(Zt):pt(Zt,"/"),t||(this.meta.isNewVisitor=!0,t=lt(12),j()&&ut({name:Zt,value:t,days:365})),this.visitorId=t}setVisitorProperties(t){this.properties=Object.assign(Object.assign({},this.properties),t)}track(t,e,n){if(j()&&this.visitorId&&this.properties.visitorToken)if(this.properties.wid)if(n){const n={sessionId:this.visitorId,sessionToken:this.properties.sessionToken,visitorToken:x.visitorToken,subdomain:B.subdomain,wid:this.properties.wid,language:this.properties.language,flowId:e.flowId,formId:e.formId,nodeId:e.nodeId,channelType:e.channelType,optinType:e.optinType,formStepType:e.formStepType,event:t,platform:B.platform,timestamp:(new Date).toISOString(),uuid:lt()};It.post({url:this.endpoint,payload:n,acceptType:"text/plain"})}else It.post({url:this.endpoint,payload:Object.assign(Object.assign({event:t,sessionId:this.visitorId,uuid:lt(15),properties:e},this.properties),{platform:B.platform,timestamp:(new Date).toISOString()}),acceptType:"text/plain"});else B.logToServer({message:"wid empty",subdomain:B.subdomain,data:Object.assign(Object.assign({},e),{breadcrumbs:ht})})}}var Xt={isSubscribed(t){var{context:e,product:n,featureStorageManager:i}=t;if(!n)return e.browserHandler.isPermissionGranted;if(i){var o=n.currentVariant();return e.browserHandler.isPermissionGranted&&i.isSubscribed(o)}return!1},handlePushOwlButtons(t){var{buttons:e,onClick:n,isSubscribed:i}=t;if(!(st().isiOS&&!navigator.standalone||st().isOldIOS))for(var o of Array.from(e)){var s=o.dataset.pushowlPreDisplay,r=o.dataset.pushowlPreVisibility,a=o.dataset.pushowlPostDisplay,l=o.dataset.pushowlPostVisibility,c=o.dataset.pushowlPostSubscriptionMessage;i?(a&&(o.style.display=a),l&&(o.style.visibility=l),c&&(o.innerText=c)):("none"===o.style.display&&(o.style.display=s||"block"),"hidden"===o.style.visibility&&(o.style.visibility=r||"visible")),o.addEventListener("click",n)}},subscribeButtons(t){var{context:e}=t,n=document.querySelectorAll(".js-pushowl--subscribe");mt("".concat(n.length," custom subscribe button(s) detected."),n),document.addEventListener("SubscribedToPushOwl",(()=>{n.forEach((t=>{var e=t.dataset.pushowlPostSubscriptionMessage;e&&(t.innerText=e)}))})),this.handlePushOwlButtons({buttons:n,onClick:t=>{zt.subscribeIfNotAlready({enableHintScreen:"false"!==t.target.dataset.pushowlOverlay,websitePushId:e.config.website_push_id,browserHandler:e.browserHandler}).then((()=>{var e=t.target.dataset.pushowlPostSubscriptionMessage;e&&(t.target.innerText=e)}),null)},isSubscribed:this.isSubscribed({context:e})})},priceDropButtons(t){var{context:e,onSuccess:n}=t,i=document.querySelectorAll(".js-pushowl--pd");i.length&&(mt("".concat(i.length," custom price drop button(s) detected."),i),e.storeLib.getProductDetails().then((t=>{this.handlePushOwlButtons({buttons:i,onClick:i=>{var o=t.currentVariant();zt.subscribeProduct({context:e,automation:a.EVENT_API_PATH.PRICE_DROP,product:t,variant:o,source:V.CUSTOM_BUTTONS}).then((()=>{e.storageManager.price_drop.subscribe(o);var s=i.target.dataset.pushowlPostSubscriptionMessage;s&&(i.target.innerText=s),n(t)})).catch(gt)},isSubscribed:this.isSubscribed({context:e,product:t,featureStorageManager:e.storageManager.price_drop})})})))},backInStockButtons(t){var{context:e,onSuccess:n}=t,i=document.querySelectorAll(".js-pushowl--bis");i.length&&(mt("".concat(i.length," custom back-in-stock button(s) detected."),i),e.storeLib.getProductDetails().then((t=>{this.handlePushOwlButtons({buttons:i,onClick:i=>{var o=t.currentVariant();zt.subscribeProduct({context:e,automation:a.EVENT_API_PATH.BACK_IN_STOCK,product:t,variant:o,source:V.CUSTOM_BUTTONS}).then((()=>{e.storageManager.back_in_stock.subscribe(o);var s=i.target.dataset.pushowlPostSubscriptionMessage;s&&(i.target.innerText=s),n(t)})).catch(gt)},isSubscribed:this.isSubscribed({context:e,product:t,featureStorageManager:e.storageManager.back_in_stock})})})))}};const Qt=(t,e,n)=>{let i=n.replace("{{amount}}",parseFloat(e).toFixed(2));return t.replace("{{product_price}}",i).replace("{{variant_price}}",i)};var te={renderFlyout(t){var{flyoutHandler:e,title:n,buttonText:i,automationType:o,buttonListener:s,theme:r,position:a,overlay:l}=t;document.querySelectorAll(".pushowl-widget-node").forEach((t=>{t&&t.remove()})),n&&(e.setState({title:n,buttonText:i,buttonListener:s,theme:r,position:a,overlay:l}),mt("Product flyout shown for: ",o),mt("🟠 Optin prompt was not shown. Reason: Product flyout shown"))},renderOptin(t){var{rootContext:e,flyoutHandler:n}=t,i=e.config.home.flyout,{title:o,theme:s,position:r,buttonText:a,overlay:l}=i;n.setState({title:o,buttonText:a,theme:s,position:r,overlay:l,buttonListener:()=>{window.poSubscriptionSource=S,zt.subscribeIfNotAlready({enableHintScreen:l&&l.enabled,websitePushId:e.config.website_push_id,browserHandler:e.browserHandler,hintScreenData:l}).then((()=>{n.setState({title:i.postSubscriptionTitle,position:r,theme:s})})).catch((t=>{gt(t)}))}}),mt("Flyout shown.","Config: ",i)},renderBackInStock(t){var{rootContext:e,flyoutHandler:n,product:i,variant:o}=t,s=new x,{back_in_stock:r,flyout_config:l}=e.config,c=r.enabled,u=s.back_in_stock.isSubscribed(o);if(c)if(window.Notification&&window.Notification.permission===a.NOTIFICATION_PERMISSION.GRANTED&&u){var d=Qt(r.postSubscriptionTitle,o.price,e.config.shop.money_format),{theme:p,position:h,overlay:m}=r.metadata;this.renderFlyout({flyoutHandler:n,title:d,theme:p,position:h,overlay:m,automationType:z.BACK_IN_STOCK})}else{var{theme:b,position:g,overlay:f}=r.metadata;this.renderFlyout({flyoutHandler:n,title:r.title,buttonText:r.buttonText,theme:b,position:g,overlay:f,buttonListener:()=>{n.setState({title:r.postSubscriptionTitle,position:g,theme:b});var{overlay:t}=r.metadata;window.Notification&&"default"===window.Notification.permission&&(window.poSubscriptionSource=E),zt.subscribeIfNotAlready({enableHintScreen:!!l.overlay,showHintScreenOnError:!!l.overlay,websitePushId:e.config.website_push_id,browserHandler:e.browserHandler,hintScreenData:t}).then((()=>{zt.update(a.EVENT_API_PATH.BACK_IN_STOCK,{product_id:i.id,product:i,variant:o,source:V.FLYOUT_WIDGET,permission:window.Notification&&window.Notification.permission}).then((t=>{s.back_in_stock.subscribe(o);var{token:e}=t.result;e&&(x.subscriberToken=e),mt("Product subscribed for ".concat(a.EVENT_API_PATH.BACK_IN_STOCK,". Product ").concat(i.id,". Variant ").concat(o.id,". Source: ").concat(V.FLYOUT_WIDGET))})).catch((t=>{gt(t)}))}))},automationType:z.BACK_IN_STOCK})}},renderPriceDrop(t){var{rootContext:e,flyoutHandler:n,product:i,variant:o}=t,s=new x,{price_drop:r,flyout_config:l}=e.config,c=r.enabled,u=s.price_drop.isSubscribed(o);if(c)if(window.Notification&&window.Notification.permission===a.NOTIFICATION_PERMISSION.GRANTED&&u){var{theme:d,position:p,overlay:h}=r.metadata;this.renderFlyout({flyoutHandler:n,theme:d,position:p,overlay:h,title:r.postSubscriptionTitle,automationType:z.PRICE_DROP})}else{var m=e.config.price_drop.metadata,{theme:b,position:g,overlay:f}=m;this.renderFlyout({theme:b,position:g,overlay:f,flyoutHandler:n,title:Qt(r.title,o.price,e.config.shop.money_format),buttonText:r.buttonText,buttonListener:()=>{n.setState({title:r.postSubscriptionTitle,position:g,theme:b});var{overlay:t}=r.metadata;window.Notification&&"default"===window.Notification.permission&&(window.poSubscriptionSource=y),zt.subscribeIfNotAlready({enableHintScreen:!!l.overlay,showHintScreenOnError:!!l.overlay,websitePushId:e.config.website_push_id,browserHandler:e.browserHandler,hintScreenData:t}).then((()=>{zt.update(a.EVENT_API_PATH.PRICE_DROP,{product_id:i.id,product:i,variant:o,subscribed_price:o.price,source:V.FLYOUT_WIDGET,permission:window.Notification&&window.Notification.permission}).then((t=>{s.price_drop.subscribe(o);var{token:e}=t.result;e&&(x.subscriberToken=e),mt("Product subscribed for ".concat(a.EVENT_API_PATH.PRICE_DROP,". Product ").concat(i.id,". Variant ").concat(o.id,". Source: ").concat(V.FLYOUT_WIDGET))})).catch((t=>{gt(t)}))}))},automationType:z.PRICE_DROP})}}};const ee={name:"Pushowl Web Notifications",short_name:"PushOwl",description:"",icons:[],start_url:"/",scope:"/",display:"standalone",orientation:"portrait",background_color:"#fff",theme_color:"#000000"};var ne,ie,oe;function se(t,e){if(oe=new Date,t.nodeType!==Node.ELEMENT_NODE)throw new Error("Can't generate CSS selector for non-element node type.");if("html"===t.tagName.toLowerCase())return"html";var n={root:document.body,idName:t=>!0,className:t=>!0,tagName:t=>!0,attr:(t,e)=>!1,seedMinLength:1,optimizedMinLength:2,threshold:1e3,maxNumberOfTries:1e4,timeoutMs:void 0};ne=vt(vt({},n),e),ie=function(t,e){if(t.nodeType===Node.DOCUMENT_NODE)return t;if(t===e.root)return t.ownerDocument;return t}(ne.root,n);var i=re(t,"all",(()=>re(t,"two",(()=>re(t,"one",(()=>re(t,"none")))))));if(i){var o=ge(fe(i,t));return o.length>0&&(i=o[0]),le(i)}throw new Error("Selector was not found.")}function re(t,e,n){for(var i=null,o=[],s=t,r=0,a=function(){var t=(new Date).getTime()-oe.getTime();if(void 0!==ne.timeoutMs&&t>ne.timeoutMs)throw new Error("Timeout: Can't find a unique selector after ".concat(t,"ms"));var a=he(function(t){var e=t.getAttribute("id");if(e&&ne.idName(e))return{name:"#"+CSS.escape(e),penalty:0};return null}(s))||he(...function(t){var e=Array.from(t.attributes).filter((t=>ne.attr(t.name,t.value)));return e.map((t=>({name:"[".concat(CSS.escape(t.name),'="').concat(CSS.escape(t.value),'"]'),penalty:.5})))}(s))||he(...function(t){return Array.from(t.classList).filter(ne.className).map((t=>({name:"."+CSS.escape(t),penalty:1})))}(s))||he(function(t){var e=t.tagName.toLowerCase();if(ne.tagName(e))return{name:e,penalty:2};return null}(s))||[{name:"*",penalty:3}],l=function(t){var e=t.parentNode;if(!e)return null;var n=e.firstChild;if(!n)return null;var i=0;for(;n&&(n.nodeType===Node.ELEMENT_NODE&&i++,n!==t);)n=n.nextSibling;return i}(s);if("all"==e)l&&(a=a.concat(a.filter(pe).map((t=>de(t,l)))));else if("two"==e)a=a.slice(0,1),l&&(a=a.concat(a.filter(pe).map((t=>de(t,l)))));else if("one"==e){var[c]=a=a.slice(0,1);l&&pe(c)&&(a=[de(c,l)])}else"none"==e&&(a=[{name:"*",penalty:3}],l&&(a=[de(a[0],l)]));for(var u of a)u.level=r;if(o.push(a),o.length>=ne.seedMinLength&&(i=ae(o,n)))return"break";s=s.parentElement,r++};s;){if("break"===a())break}return i||(i=ae(o,n)),!i&&n?n():i}function ae(t,e){var n=ge(be(t));if(n.length>ne.threshold)return e?e():null;for(var i of n)if(ue(i))return i;return null}function le(t){for(var e=t[0],n=e.name,i=1;i<t.length;i++){var o=t[i].level||0;n=e.level===o-1?"".concat(t[i].name," > ").concat(n):"".concat(t[i].name," ").concat(n),e=t[i]}return n}function ce(t){return t.map((t=>t.penalty)).reduce(((t,e)=>t+e),0)}function ue(t){var e=le(t);switch(ie.querySelectorAll(e).length){case 0:throw new Error("Can't select any node with this selector: ".concat(e));case 1:return!0;default:return!1}}function de(t,e){return{name:t.name+":nth-child(".concat(e,")"),penalty:t.penalty+1}}function pe(t){return"html"!==t.name&&!t.name.startsWith("#")}function he(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=e.filter(me);return i.length>0?i:null}function me(t){return null!=t}function*be(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(t.length>0)for(var n of t[0])yield*be(t.slice(1,t.length),e.concat(n));else yield e}function ge(t){return[...t].sort(((t,e)=>ce(t)-ce(e)))}function*fe(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{counter:0,visited:new Map};if(t.length>2&&t.length>ne.optimizedMinLength)for(var i=1;i<t.length-1;i++){if(n.counter>ne.maxNumberOfTries)return;n.counter+=1;var o=[...t];o.splice(i,1);var s=le(o);if(n.visited.has(s))return;ue(o)&&_e(o,e)&&(yield o,n.visited.set(s,!0),yield*fe(o,e,n))}}function _e(t,e){return ie.querySelector(le(t))===e}const we=({nodeId:t,flowId:e,channelType:n,optinType:i})=>({formId:o,event:s,stepType:r})=>{window.poAnalytics.track(s,{flowId:e,nodeId:t,formId:o,channelType:n,optinType:i,formStepType:r},!0)},ve=({event:t,optinType:e,flowId:n,nodeId:i,formId:o})=>{we({optinType:e,channelType:["webpush"],flowId:n,nodeId:i})({stepType:"step_1",event:t,formId:o})},Se=(t,e)=>{const n={};return Object.keys(t).forEach((i=>{e[i]&&(n[t[i].mapAttribute]=e[i])})),n},ye=t=>{const e=(new DOMParser).parseFromString(t,"text/html");return null==e?void 0:e.body},Ee=t=>"HTML"===(null==t?void 0:t.type),Oe=t=>{const e=t.children;if(!e)return"";const n=ye(e),i=(t=>{const e=(new DOMParser).parseFromString(t,"text/html").head.getElementsByTagName("style");let n="";for(const t of e)n+=t.textContent;return n})(e),o=document.createElement("style");o.textContent=i,n.appendChild(o);const s=t.attr.button,r=t.attr.input;if(s){const t=s.submit;if(t){const e=Object.keys(t);n.querySelectorAll("button").forEach((t=>{const i=se(t,{root:n});if(e.includes(i)){n.querySelector(i).setAttribute("type","submit")}else t.setAttribute("type","button")}))}}if(r){let t=[],e=[];r.email&&(t=Object.keys(r.email)),r.phone&&(e=Object.keys(r.phone));const i=Object.keys(r).filter((t=>"email"!==t&&"phone"!==t));n.querySelectorAll("input:not([type=radio]), input:not([type=checkbox])").forEach((o=>{const s=se(o,{root:n});t.includes(s)?(o.setAttribute("type","email"),o.setAttribute("name","email")):e.includes(s)?(o.setAttribute("type","tel"),o.setAttribute("name","phone")):i.forEach((t=>{Object.keys(r[t]).includes(s)&&o.setAttribute("name",t)}))}))}return n.innerHTML};var Te=t=>{var{channels:e,consent:n}=t;return e.every((t=>n.includes(t)))},Ie=(t,e)=>et()?void 0!==(null==t?void 0:t.mobile)?t.mobile:e:void 0!==(null==t?void 0:t.default)?t.default:e,xe=t=>{t>0&&(x.optinDeferredUntil=Date.now()+86400*parseInt(t,10)*1e3)},Ne={showNativePrompt(t){var{hintScreenConfig:e,subscribeCallback:n,source:i,nodeId:o,trackWebPushDenied:s,trackWebPushSubmission:r}=t;function a(){return window.poSubscriptionSource=w,n(e,i,o,s,r)}var{isSafari:l,isFirefox:c,isiOS:u}=st();if(!l&&!c&&!u)return a();var d=document.querySelector("body");return mt("This is Safari/Firefox browser. The prompt will only show after the website is clicked somewhere"),new Promise((t=>{d.addEventListener("click",(()=>{a().then(t)}))}))},oldRender(t){var e,{config:n,subscribeCallback:i}=t,o=new P;if(!o.isPermissionNotGranted&&window.Notification&&window.Notification.permission===a.NOTIFICATION_PERMISSION.DEFAULT){if(n.optin.type!==K.OFF){var s=n.optin.config,r=s.timeout,l=r.default,c=n.optin.type,u=s.overlay;et()&&(l=r.mobile);var d=o.optinSeenCount;-1===l?mt('🟠 Optin prompt was not shown. Reason: timeout set to "never"'):d>=s.maxCountPerSession?mt("🟠 Optin prompt was not shown. Reason: maximum count per session limit reached (".concat(d," / ").concat(s.maxCountPerSession,")")):Date.now()<x.optinDeferredUntil?mt("🟠 Optin prompt was not shown. Reason: deferred till ".concat(new Date(x.optinDeferredUntil))):setTimeout((()=>{Notification.permission!==a.NOTIFICATION_PERMISSION.DEFAULT||x.isPermissionGranted?mt("🟠 Optin prompt was not shown. Reason: permission not default"):c===K.TWO_STEP?Promise.all([Promise.resolve().then((function(){return tn})),Promise.resolve().then((function(){return un}))]).then((t=>{var[{OptinPromptWidget:e},{NewCustomPromptWidget:r}]=t,{position:a}=s,l=e,c=new l;if(l===r)c.setState(vt(vt({},s),{},{logo:n.logo})),setTimeout((()=>{i(null),c.changeState(et()?"mobile-fade":"down"),setTimeout(et()?c.destroy.bind(c):()=>{c.changeState("fade-top"),setTimeout(c.destroy.bind(c),300)},5e3)}),5e3);else{var d=document.querySelector(".pushowl-optin");d&&(B.logToServer({message:"duplicate custom prompt",subdomain:B.subdomain,data:{breadcrumbs:ht}}),d.remove()),c.setState({multilingual_title:s.multilingual_title,multilingual_description:s.multilingual_description,yesButton:s.yesButton,noButton:s.noButton,theme:s.theme,logo:n.logo,branding:n.branding,position:a,autoFocus:n.flags.custom_prompt_screenreader_support,yesButtonListener:()=>{i(u),setTimeout((()=>{c.destroy()}),100),window.poSubscriptionSource=v,n.optin_report_enabled&&window.poAnalytics.track("PNOptinAllowClicked",{optinSeenCount:o.optinSeenCount})},noButtonListener:()=>{setTimeout((()=>{c.destroy()}),100),o.isPermissionNotGranted=!0,n.optin_report_enabled&&window.poAnalytics.track("PNOptinLaterClicked",{optinSeenCount:o.optinSeenCount})}})}o.optinSeenCount+=1,n.optin_report_enabled&&window.poAnalytics.track("PNOptinShown",{optinSeenCount:o.optinSeenCount}),mt("Custom Prompt shown. Config: ",n.optin),xe(s.deferForDays)})).catch((t=>{mt("Error encountered in loading Optin prompt: ".concat(t.message))})):(this.showNativePrompt({hintScreenConfig:u,subscribeCallback:i}),o.optinSeenCount+=1,mt("Browser Prompt shown. Config: ",n.optin),xe(s.deferForDays))}),1e3*l)}}else o.isPermissionNotGranted?e="prompt was dismissed in this session":window.Notification&&window.Notification.permission!==a.NOTIFICATION_PERMISSION.DEFAULT&&(e="permission already ".concat(window.Notification.permission)),mt("🟠 Optin prompt was not shown. Reason: ".concat(e))},renderPopup:t=>Et((function*(){var{showNextForm:e,deferForDays:n,node:i,shouldIncrementFrequency:o,waitTime:s,flowId:r,openShadowDOM:a}=t;try{var{OptinForm:l}=yield Promise.resolve().then((function(){return li})),c=new l(i,e,r,we({nodeId:i.id,flowId:r,channelType:i.channels,optinType:"popup"}),a);if(setTimeout((()=>c.render()),1e3*s),xe(n),o)(new P).optinSeenCount+=1}catch(t){mt("Error encountered in loading New Optin: ".concat(t.message))}}))(),showBrowserPrompt(t){var{subscribeCallback:e,hintScreenConfig:n,shouldIncrementFrequency:i,deferForDays:o,waitTime:s,flowId:r,nodeId:a,formId:l}=t;if(Yt()){ve({event:"optin_viewed",optinType:"browser_webpush",flowId:r,nodeId:a,formId:l});var c=()=>ve({event:"optin_submitted",optinType:"browser_webpush",flowId:r,nodeId:a,formId:l}),u=()=>ve({event:"optin_denied",optinType:"browser_webpush",flowId:r,nodeId:a,formId:l});if(setTimeout((()=>{this.showNativePrompt({hintScreenConfig:n,subscribeCallback:e,source:"optin_flows",nodeId:a,trackWebPushDenied:u,trackWebPushSubmission:c})}),1e3*s),i)(new P).optinSeenCount+=1;xe(o)}},showCustomPrompt:t=>Et((function*(){var{waitTime:e,shouldIncrementFrequency:n,flowId:i,deferForDays:o,config:s,subscribeCallback:r,custom_prompt_screenreader_support:a,nodeId:l,formId:c,logo:u}=t;try{if(!Yt())return;var{OptinPromptWidget:d}=yield Promise.resolve().then((function(){return tn})),p=()=>ve({event:"optin_submitted",optinType:"custom_webpush",flowId:i,nodeId:l,formId:c}),h=()=>ve({event:"optin_denied",optinType:"custom_webpush",flowId:i,nodeId:l,formId:c}),m=new d,b=new P;if(setTimeout((()=>m.setState(vt(vt({},s),{},{autoFocus:a,yesButtonListener:()=>{r(s.overlay,"optin_flows",l,h,p),setTimeout((()=>{m.destroy()}),100),window.poSubscriptionSource=v},noButtonListener:()=>{h(),setTimeout((()=>{m.destroy()}),100),b.isPermissionNotGranted=!0},logo:u}))),1e3*e),ve({event:"optin_viewed",optinType:"custom_webpush",flowId:i,nodeId:l,formId:c}),xe(o),n)(new P).optinSeenCount+=1}catch(t){mt("Error encountered in loading Custom prompt: ".concat(t.message))}}))(),processNewConfig(t){var e=t.find((t=>"active"===t.status));if(!e)return[];for(var n=[],i=e.flow_nodes||[],o=0;o<i.length;o+=1){var s=i[o-1];if(o%2!=0){var r=s.wait_times?Ie(s.wait_times,s.wait_time):s.wait_time;i[o].wait_time=r,n.push(i[o])}}return[vt(vt({},e),{},{flow_nodes:n})]},newRender(t){var e=this,{config:n,shouldIncrementFrequency:i,subscribeCallback:o,skippedNodes:s=[]}=t,r=this.processNewConfig(n.optin_flows||[]).find((t=>"active"===t.status))||{};if(r.flow_nodes){var{flow_nodes:l}=r,{activation_rule:c}=n,u=new P,{optinSeenCount:d}=u,{consent:p}=x,h=r&&l&&(t=>{var{activation_rule:e}=t;return!e||new Ct(e).processUrlActivationRule()})({activation_rule:c})&&(t=>{var{deferForDays:e,shouldIncrementFrequency:n}=t;return!(n&&e>0&&Date.now()<x.optinDeferredUntil&&(mt("🟠 Optin prompt was not shown. Reason: deferred till ".concat(new Date(x.optinDeferredUntil))),1))})({deferForDays:r.defer_for_days,shouldIncrementFrequency:i})&&(t=>{var{frequency:e,optinSeenCount:n,shouldIncrementFrequency:i}=t;return!i||n<e||(mt("🟠 Optin prompt was not shown. Reason: Optin seen count exceeded"),!1)})({frequency:r.frequency,optinSeenCount:d,shouldIncrementFrequency:i});mt("Can Optin Render",h);for(var m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;e.newRender({config:n,shouldIncrementFrequency:!1,subscribeCallback:o,skippedNodes:t?[...s,t]:s})},b=0;b<l.length;b+=1){var g=l[b],f=s.includes(g.id);if(h&&!f&&!Te({consent:p,channels:g.channels})){if(-1===g.wait_time)continue;if("popup"===g.optin_type)return mt("Can render popup"),void this.renderPopup({node:g,shouldIncrementFrequency:i,showNextForm:m,deferForDays:r.defer_for_days,waitTime:g.wait_time,flowId:r.id,openShadowDOM:"enabled"===n.flags.open_shadow_dom});if("browser_webpush"===g.optin_type)return void this.showBrowserPrompt({subscribeCallback:o,waitTime:g.wait_time,hintScreenConfig:g.forms[0].config.oneStep.overlay,shouldIncrementFrequency:i,deferForDays:r.defer_for_days,flowId:r.id,nodeId:g.id,formId:g.forms[0].id});if("custom_webpush"===g.optin_type&&window.Notification&&window.Notification.permission===a.NOTIFICATION_PERMISSION.DEFAULT&&!x.isPermissionGranted){var _=g.forms[0];return void this.showCustomPrompt({config:vt(vt({},_.config.twoStep),{},{position:{default:_.desktop_position,mobile:_.mobile_position}}),waitTime:g.wait_time,flowId:r.id,shouldIncrementFrequency:i,deferForDays:r.defer_for_days,subscribeCallback:o,custom_prompt_screenreader_support:n.flags.custom_prompt_screenreader_support,nodeId:g.id,formId:g.forms[0].id,logo:n.logo})}}}}else mt("Optin is set to OFF")}};class ke{constructor(t){var{wid:e,websitePushId:n}=t;this.wid=e,this.subdomain=B.subdomain,this.webPushId=n||B.webPushId,this.getSubscription=this.getSubscription.bind(this)}webServiceUrl(){return"".concat(B.apiEndpoint,"/safari/v2/").concat(this.wid)}getSubscription(){return new Promise(((t,e)=>{var n=i=>{mt("PermissionData:",i.permission),"default"===i.permission?setTimeout((()=>window.safari.pushNotification.requestPermission(this.webServiceUrl(),this.webPushId,{domain:window.location.origin},n)),0):"denied"===i.permission?e(a.NOTIFICATION_PERMISSION.DENIED):"granted"===i.permission&&t(i.deviceToken)},i=window.safari.pushNotification.permission(this.webPushId);n(i)}))}}class Ce{constructor(t){var{vapidPublicKey:e,integrations:n,serviceWorkerConfig:i}=t;this.getSubscription=this.getSubscription.bind(this),this.vapid_public_key=e,this.integrations=n,this.serviceWorkerConfig=i}getServiceWorkerParams(t){return this.serviceWorkerConfig?{url:this.serviceWorkerConfig.url,options:{scope:this.serviceWorkerConfig.scope}}:{url:B.getServiceWorkerUrlWithIntergrations(B.serviceWorkerUrl(t),this.integrations),options:{}}}getSubscription(t){return new Promise(((e,n)=>{("granted"===Notification.permission?Promise.resolve("granted"):Notification.requestPermission()).then((i=>{if(i===a.NOTIFICATION_PERMISSION.GRANTED){var o=this.getServiceWorkerParams(t),s=o.options;0!==o.url.indexOf("http")&&(o.url="".concat(location.protocol,"//").concat(location.host).concat(o.url)),navigator.serviceWorker.register(o.url,o.options).then((t=>{var i;"shopify"===B.platform&&("/"===s.scope?navigator.serviceWorker.getRegistrations().then((function(t){t.forEach((function(t){t.scope.match(/pushowl\/sdks\//)&&(t.unregister(),mt("Found stale service worker on subpath scope",t))}))})):navigator.serviceWorker.getRegistrations().then((function(t){t.forEach((function(t){t.active&&t.active.scriptURL.match(/pushowl/)&&!t.scope.match(/pushowl\//)&&(t.unregister(),mt("Found stale service worker on root scope",t))}))}))),t.installing?i=t.installing:t.waiting?i=t.waiting:t.active&&(i=t.active),i&&("activated"===i.state?this._serviceWorkerSubscriber(t,e,n):i.addEventListener("statechange",(i=>{"activated"===i.target.state&&this._serviceWorkerSubscriber(t,e,n)})))})).catch((t=>{gt(t),n(t)}))}else i!==a.NOTIFICATION_PERMISSION.DENIED&&i!==a.NOTIFICATION_PERMISSION.DEFAULT||n(i)}))}))}_serviceWorkerSubscriber(t,e,n){var i={userVisibleOnly:!0,applicationServerKey:rt(this.vapid_public_key)};t.pushManager.subscribe(i).then((t=>{e(t)})).catch((i=>{i.toString().indexOf("InvalidStateError")>=0?t.pushManager.getSubscription().then((i=>{i.unsubscribe().then((i=>{t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:rt(this.vapid_public_key)}).then((t=>{e(t)})).catch((t=>{n(t)}))})).catch((t=>{n(t)}))})):(gt(i),n(i))}))}}class Pe{constructor(t){var{flags:e,vapidPublicKey:n,integrations:i,websitePushId:o,wid:s,serviceWorkerConfig:r}=t;if(this.getSubscription=null,st().isApnsSafari){var a=new ke({websitePushId:o,wid:s});this.getSubscription=a.getSubscription.bind(this,e)}else{var l=new Ce({vapidPublicKey:n,integrations:i,serviceWorkerConfig:r});this.getSubscription=l.getSubscription.bind(this,e)}}get isPermissionGranted(){return window.Notification&&window.Notification.permission===a.NOTIFICATION_PERMISSION.GRANTED||x.isPermissionGranted}get isPermissionDefault(){return B.isWorkerAvailable.then((t=>"default"===window.Notification.permission)).catch((()=>!1))}}var Re,Ae,De;function Le(t,e){window.sib&&window.sib[t]?window.sib[t](...e):window.sib.equeue.push({[t]:e})}if(!window.poAnalytics){var Me={storeConfigGUID:B.guid,subdomain:B.subdomain,visitorToken:x.visitorToken,sessionToken:x.sessionToken};window.poAnalytics=new Jt({endpoint:"".concat(B.apiEndpoint,"/event/v1/events")}),window.poAnalytics.setVisitorProperties(Me),mt("Analytics initialized with data: ",Me)}class Ue extends class{constructor(){}get cartId(){return""}}{constructor(t){super(),this.token=t.token,this.checkout_token=t.checkout_token,this.item_count=t.item_count,this.items=t.items}get cartId(){const t=[this.token||this.checkout_token||""];let e=[];const n={};for(const t of this.items)e.push(t.variant_id),n[t.variant_id]=t.quantity;e=e.sort(((t,e)=>t-e));for(const i of e){const e=n[i];t.push(`${i}:${e}`)}return t.concat(t).join("-")}}class Be extends class{constructor(){var t;this.subdomain=B.subdomain,this.environment=B.environment,this.apiEndpoint=B.apiEndpoint,this.apiClient=new Nt,this.webPushId=B.webPushId,this.config=null,this.storageManager=new x,this.sessionManager=new P,this.storeLib=new(this.getStoreLibClass()),this.subscriberTokenExists=!!x.subscriberToken,this.tokenType=this.subscriberTokenExists?"subscriber":"visitor",this.tokenValue=this.subscriberTokenExists?x.subscriberToken:x.visitorToken,this.customLog=console,window.sessionStorage&&navigator.serviceWorker&&(t=this.getConfig()).then((t=>{this.config=t,(({logoURL:t})=>{try{const e=Object.assign(Object.assign({},ee),{name:document.title,short_name:document.title}),n=document.querySelector('meta[name="theme-color"]');n&&(e.theme_color=n.getAttribute("content")||ee.theme_color);const i=document.querySelector('meta[property="og:site_name"]');if(i){const t=i.getAttribute("content")||document.title;e.name=t,e.short_name=t}const o=document.querySelector('meta[property="og:description"]');o&&(e.description=o.getAttribute("content")||"");const s=JSON.stringify(e),r=new Blob([s],{type:"application/json"}),a=URL.createObjectURL(r),l=document.createElement("link");l.rel="manifest",l.href=a;const c=document.getElementsByTagName("head")[0];document.querySelector("link[rel=manifest]")||c.insertBefore(l,c.firstChild);const u=document.querySelector("link[rel=apple-touch-icon]");if(t&&!u){const e=document.createElement("link");e.rel="apple-touch-icon",e.href=t,c.insertBefore(e,c.firstChild)}}catch(t){mt("Unable to create manifest")}})({logoURL:t.logo}),bt("Status",{ACR:t.abandoned_cart_enabled?"🟢":"🔴","Browse abandonment":t.browse_abandonment_enabled?"🟢":"🔴","Price drop":t.price_drop.enabled?"🟢":"🔴","Back in stock":t.back_in_stock.enabled?"🟢":"🔴","optin type":{off:"🔴",oneStep:"Browser prompt",twoStep:"Custom prompt"}[t.optin.type],"Notification permission":window.Notification?Notification.permission:null,"Store section":this.getStoreLibClass().section,"Notification Preferences":t.privacy.notification_preference.enabled?"🟢":"🔴"}),this.handleIOS(),this.load3PIntegrations()})),this.ready=new Promise((e=>{this.init(t).then((()=>{if((!this.config.flags||"disabled"!==this.config.flags.status)&&((this.environment!==a.ENVIRONMENT.production||!this.config.flags||!1!==this.config.flags.console_message&&"disabled"!==this.config.flags.console_message)&&this.customLog.log("[PushOwl Web Push Notifications] Starting up"),this.browserHandler=new Pe({flags:this.config.flags,vapidPublicKey:this.config.vapid_public_key,integrations:this.config.integrations,websitePushId:this.config.website_push_id,wid:this.config.wid,serviceWorkerConfig:this.config.service_worker}),this.isAllowed())){var t={subdomain:this.subdomain,browserHandler:this.browserHandler,config:this.config,storeLib:this.storeLib,storageManager:this.storageManager,sessionManager:this.sessionManager};this.context=t,this.browserHandler.isPermissionGranted||!x.subscriberToken||x.hasRaisedUnsubscriptionEvent||(this.config.optin_report_enabled&&window.poAnalytics.track("Unsubscribed"),x.hasRaisedUnsubscriptionEvent=!0),this.browserHandler.isPermissionGranted?zt.verifySubscriber({browserHandler:this.browserHandler}).then((()=>{this.syncCustomerId(),this.onSubscriberVerifiedOnPageLoad()})).catch(((t,e)=>{mt(t),t===q.NO_SUBSCRIBER_TOKEN||t===q.INVALID_SUBSCRIBER_TOKEN?zt.subscribe({browserHandler:this.browserHandler,websitePushId:this.config.website_push_id}).catch((t=>{gt(t)})):t===q.INVALID_STATE_ERROR&&zt.validateOrSyncSubscription({subscription:e,websitePushId:this.config.website_push_id})})):this.isBrevoEnabled()&&this.onSubscriberVerifiedOnPageLoad(),this.browserHandler.isPermissionDefault.then((t=>{t&&this.handlePushNotificationUnsubscription()})),this.customTasks(),Xt.subscribeButtons({context:t}),this.checkPushowlSession(),this.onCanRun(),e()}})).catch((t=>{gt(t)}))})),this.debugCustomTask(),this.onScriptLoad(),C.run()}handlePushNotificationUnsubscription(){var{consent:t}=x;1===t.length&&"webpush"===t[0]&&(x.subscriberToken=null,G.del("pushowl_sw_subscriber_token")),x.isPermissionGranted=!1,x.consent=x.consent.filter((t=>"webpush"!==t))}isBrevoEnabled(){return"enabled"===this.config.flags.brevo_email&&!!this.config.brevo_ma_key}handleIOS(){var t;st().isiOS&&navigator.standalone&&!x.subscriberToken&&!x.hasLoggediOSStandaloneMode&&(x.hasLoggediOSStandaloneMode=!0),this.isAllowed()&&st().isiOS&&!navigator.standalone&&P.installPromptSeenCount<3&&!x.installPromptDismissed&&null!==(t=this.config.ios_prompt)&&void 0!==t&&t.enabled&&(Promise.resolve().then((function(){return di})).then((t=>{var e,n,{IOSInstallWidget:i}=t,o=new i({title:null===(e=this.config.ios_prompt)||void 0===e?void 0:e.title,description:null===(n=this.config.ios_prompt)||void 0===n?void 0:n.description});setTimeout((()=>{o.init()}),2e3)})),P.installPromptSeenCount+=1)}get flyoutHandler(){return new Promise((t=>{Promise.resolve().then((function(){return bi})).then((e=>{var{FlyoutWidgetHandler:n}=e;t(new n(this.config.flyout_config))})).catch((t=>{mt("Error encountered in loading Flyout widget: ".concat(t.message))}))}))}onScriptLoad(){}onConfigLoaded(){}onCanRun(){}onSubscriberVerifiedOnPageLoad(){}onSuccessfullSubscription(){}getStoreLibClass(){}getStoreCartClass(){}getCurrentProduct(){}isAllowed(){var{activation_rule:t}=this.config;return!t||t.processUrlActivationRule()}init(t){return new Promise((e=>{this.isEnabled().then((()=>{(t||this.getConfig()).then((t=>{this.config=t,"enabled"===t.flags.subscriber_tracking&&x.subscriberToken&&(window.poAnalytics.setVisitorProperties({wid:this.config.wid,pagePath:window.location.href,pageURL:window.location.origin+window.location.pathname,subscriberToken:x.subscriberToken,browserNotificationPermission:window.Notification?window.Notification.permission:null}),window.poAnalytics.track("subscriber_page_visited")),window.poAnalytics.setVisitorProperties({wid:this.config.wid,optinConfig:this.config.optin}),mt("Analytics visitor props set: ",{wid:this.config.wid,optinConfig:this.config.optin}),window.poAnalytics.meta.isNewVisitor&&this.config.optin_report_enabled&&window.poAnalytics.track("SessionCreated"),e(t)}))})).catch((t=>{gt(t),mt("🔴 Shutting down. Reason: ".concat(t))}))}))}getConfig(){return Kt.get()}isEnabled(){return Vt({subdomain:this.subdomain})}debugCustomTask(){var t=ot("poTaskType");t===f&&(mt("Task type",t),this.isEnabled().then((t=>{!function(t){var{subdomain:e,StoreLibClass:n,isEnabled:i}=t,o=a.STORAGE_KEYS,s=new P,r=new x,l=new Nt,c={notification_permission:window.Notification&&window.Notification.permission};c.localStorage={[o.VISITOR_TOKEN]:x.visitorToken,[o.SESSION_TOKEN]:x.sessionToken,[o.SUBSCRIBER_TOKEN]:x.subscriberToken,[o.SUBSCRIPTION]:x.subscription,[o.BACK_IN_STOCK_SUBSCRIPTIONS]:r.back_in_stock.subscriptions,[o.PRICE_DROP_SUBSCRIPTIONS]:r.price_drop.subscriptions,[o.SYNCED_CART_JSON]:x.synced_cart_json,[o.SYNCED_CUSTOMER_ID]:x.syncedCustomerId,[o.SYNCED_AC_EVENTS]:x.ac_events,[o.OPTIN_DEFERRED_UNTIL]:x.optinDeferredUntil},c.sessionStorage={[s.subscriptionVerifiedKey]:s.subscriptionVerified,[s.permissionKey]:s.isPermissionNotGranted,[s.optinSeenCountKey]:s.optinSeenCount},c.subdomain=e,c.debug_url=window.location.href,c.user_agent=navigator.userAgent,c.logs=ht,Promise.all([new Promise((t=>{navigator.serviceWorker.getRegistrations().then((function(e){t(e.map((function(t){return{scope:t.scope,active:t.active}})))}))})),i,n?n.getCart():Promise.resolve()]).then((t=>{var[e,n,i]=t;i&&(c.current_cart_json=i),e&&e.length&&(c.serviceWorkers=e),"string"==typeof n&&(c.pushowl_not_enabled_reason=n),l.debugLog(c),window.prompt("Send this to PushOwl Support",JSON.stringify(c,!1,2))}))}({subdomain:this.subdomain,StoreLibClass:this.getStoreLibClass(),isEnabled:t})})))}customTasks(){var t=ot("poTaskType");t&&(mt("Task type",t),t===b?zt.subscribeIfNotAlready({enableHintScreen:!0,websitePushId:this.config.website_push_id,browserHandler:this.browserHandler}):t===g&&zt.unsubscribe(this.browserHandler))}checkPushowlSession(){"pushowl"===ot("utm_source")&&function(t){var{privacy:e}=t.config;if(e.notification_preference.enabled){var n=document.querySelector("body"),i={subdomain:t.subdomain,subscriberToken:x.subscriberToken};Promise.all([Promise.resolve().then((function(){return He})),Promise.resolve().then((function(){return Ge}))]).then((t=>{var[{NotificationPreference:o},{NotificationPreferenceToggle:s}]=t,r=new o(n,i,e.notification_preference);new s(n,e.notification_preference,r).render(),mt("Notification Preference shown.")})).catch((t=>{mt("Error encountered in loading Notif preferences: ".concat(t.message))}))}}(this.context)}syncCustomerId(){var t=this.getStoreLibClass();if(t.customerId&&t.customerId!==x.syncedCustomerId&&this.config.privacy.customer_id){if(window.Shopify&&!x.subscriberToken){var e=dt(a.STORAGE_KEYS.SUBSCRIBER_TOKEN);e&&(x.subscriberToken=e)}this.apiClient.syncSubscriber().then((()=>{x.syncedCustomerId=t.customerId})).catch((()=>{gt("Subscriber not synced")}))}}initiateDefaultPrompt(t,e,n,i,o){var s=!(!t||et())&&t.enabled;return B.isWorkerAvailable.then((r=>{if(r)return zt.subscribe({enableHintScreen:s,hintScreenData:t,websitePushId:this.config.website_push_id,browserHandler:this.browserHandler,source:e,source_id:n}).then((t=>{if(t&&t.subscriberToken){var{consent:e}=x;return x.consent=[...e,"webpush"],o&&o(),this.onSuccessfullSubscription(),t}return i&&i(),t})).catch((t=>{})).finally((()=>{var t=document.querySelector(".js-custom-prompt-2");t&&t.remove()}));var a=this.subdomain.replace(/\./g,"-");return window.open("https://".concat(a,".powl.co/subscribe?po_url=").concat(encodeURIComponent(window.location.href),"&env=").concat(this.environment,"&subdomain=").concat(this.subdomain,"&platform=").concat(B.platform),"","width=700,height=500"),new Promise((t=>{window.addEventListener("message",(e=>{var n=e.data;if(n&&"subscriptionFinish"===n.type){var i=n.data;i&&"granted"===i.status&&(x.subscriberToken=i.subscriberToken,x.isPermissionGranted=!0,t({subscriberToken:i.subscriberToken}))}}))}))}))}render(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.getStoreLibClass();if(!this.config)throw"Pushowl Config not initialised";n.section===h.HOME?this.defaultRender(e):n.section===h.PRODUCT?this.storeLib.getProductDetails(t).then((t=>{this.productSectionRender(t)})):n.section===h.CHECKOUT?mt("🟠 Optin prompt was not shown. Reason: Checkout page"):this.defaultRender(e)}optinFlows(t){var e=Ne.processNewConfig(this.config.optin_flows||[]).find((t=>"active"===t.status))||{};((t,e)=>{var{scrollDepth:n,exitIntent:i,exclusionUrls:o,inclusionUrls:s,exclusionUrlsEnabled:r,inclusionUrlsEnabled:a,scrollDepthEnabled:l,timeSpent:c,timeSpentEnabled:u}=t;mt("Processing Optin flow rules",t);var d=!1,p=null;function h(){d||(d=!0,mt("🟢 Triggering Optin flows after processing rules"),e(),window.removeEventListener("scroll",g),document.removeEventListener("mouseleave",f),p&&clearTimeout(p))}function m(t,e){var n=e.replace(/^https?:\/\//,""),i=t.url.replace(/^https?:\/\//,"");switch(t.type){case"contains":return n.includes(i);case"exact":return n===i;default:return!1}}function b(){var t=window.location.href,e=!a;if(r&&(null==o?void 0:o.length)>0)for(var n of o)if(m(n,t))return!1;if(a&&(null==s?void 0:s.length)>0)for(var i of(e=!1,s))if(m(i,t)){e=!0;break}return e}var g=()=>{(window.pageYOffset||document.documentElement.scrollTop)/(document.documentElement.scrollHeight-document.documentElement.clientHeight)*100>=n&&b()&&(mt("🟢 Triggering Optin flows Reason: scroll depth exceeded"),h())},f=t=>{t.clientY<0&&b()&&(mt("🟢 Triggering Optin flows Reason: exit intent triggered"),h())};b()?l||i||u?(n>0&&l&&window.addEventListener("scroll",g),i&&document.body.addEventListener("mouseleave",f),c>=0&&u&&(p=setTimeout((()=>{b()&&(mt("🟢 Triggering Optin flows Reason: time spent exceeded"),h())}),1e3*c))):(mt("🟢 Triggering Optin flows immediately Reason: no rules are applicable"),h()):mt("🟠 Optin prompt was not shown. Reason: URL targeting rules prevent it")})({scrollDepth:e.scroll_depth,exitIntent:e.exit_intent,exclusionUrls:e.exclusion_urls||[],inclusionUrls:e.inclusion_urls||[],exclusionUrlsEnabled:e.exclusion_urls_enabled,inclusionUrlsEnabled:e.inclusion_urls_enabled,scrollDepthEnabled:e.scroll_depth_enabled,timeSpent:Ie(e.time_spent||{},0),timeSpentEnabled:e.time_spent_enabled},(()=>{Ne.newRender({config:this.config,shouldIncrementFrequency:t,subscribeCallback:this.initiateDefaultPrompt.bind(this)})}))}defaultRender(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e={isOptinRendered:!1,isFlyoutRendered:!1};"sendinblue"===B.platform?Ne.oldRender({config:this.config,subscribeCallback:this.initiateDefaultPrompt.bind(this)}):this.optinFlows(t),e.isOptinRendered=!0;var n=this.config.home.flyout;return Yt()&&n.enabled&&window.Notification.permission!==a.NOTIFICATION_PERMISSION.GRANTED?(this.flyoutHandler.then((t=>{te.renderOptin({rootContext:{config:this.config,browserHandler:this.browserHandler},flyoutHandler:t})})),e.isFlyoutRendered=!0):mt("Flyout was not shown. Reason: ".concat(n.enabled?"permission already granted":"flyout is disabled"),"Config: ",this.config.home.flyout),e}productSectionRender(t){if(Yt()){var e=t.currentVariant();bt("Current product",{id:e.id,name:e.name,"Is in stock?":e.available?"✅":"❌",price:e.price});var{back_in_stock:n,price_drop:i}=this.config,o={config:this.config,browserHandler:this.browserHandler};this.flyoutHandler.then((s=>{var r={rootContext:o,flyoutHandler:s,product:t,variant:e};if(!e.available&&n.enabled)te.renderBackInStock(r);else if(e.available&&i.enabled)te.renderPriceDrop(r);else{var{isFlyoutRendered:a}=this.defaultRender();a||s.remove()}}))}}showBrowserPrompt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{overlay:{enabled:!1}};return Ne.showNativePrompt({hintScreenConfig:t,subscribeCallback:t=>this.initiateDefaultPrompt(t)})}showCustomPrompt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;Promise.resolve().then((function(){return tn})).then((n=>{var{OptinPromptWidget:i}=n,o=this.config.optin.config,s=new i,r={multilingual_title:t.title?{default:t.title}:o.multilingual_title,multilingual_description:t.description?{default:t.description}:o.multilingual_description,yesButton:t.yesButton&&t.yesButton.label?{multilingual_label:{default:t.yesButton.label}}:o.yesButton,noButton:t.noButton&&t.noButton.label?{multilingual_label:{default:t.noButton.label}}:o.noButton};s.setState(vt(vt({},r),{},{theme:t.theme||o.theme,logo:t.logo||o.logo,position:t.position||o.position,autoFocus:this.config.flags.custom_prompt_screenreader_support,yesButtonListener:()=>{e&&(window.poSubscriptionSource=v,this.config.optin_report_enabled&&window.poAnalytics.track("PNOptinAllowClicked",{optinSeenCount:this.sessionManager.optinSeenCount})),this.initiateDefaultPrompt(void 0===t.overlay?o.overlay:t.overlay).then((()=>{"function"==typeof t.yesButtonListener&&t.yesButtonListener()})),setTimeout((()=>{s.destroy()}),100)},noButtonListener:()=>{setTimeout((()=>{s.destroy()}),100),this.sessionManager.isPermissionNotGranted=!0,e&&this.config.optin_report_enabled&&window.poAnalytics.track("PNOptinLaterClicked",{optinSeenCount:this.sessionManager.optinSeenCount}),"function"==typeof t.noButtonListener&&o.noButtonListener()}})),e&&this.config.optin_report_enabled&&window.poAnalytics.track("PNOptinShown",{optinSeenCount:this.sessionManager.optinSeenCount})})).catch((t=>{mt("Error encountered in loading Optin Prompt widget (API): ".concat(t.message))}))}load3PIntegrations(){}klaviyoIntegration(){var t=function(){var t=Et((function*(t){var e=t&&t.detail&&t.detail.metaData&&t.detail.metaData.$email;"stepSubmit"===t.detail.type&&e&&(x.email=e,window.sendinblue&&window.sendinblue.identify(e))}));return function(e){return t.apply(this,arguments)}}();window.addEventListener("klaviyoForms",t)}trackPage(t){window.sendinblue&&(t?window.sendinblue.page(t):window.sendinblue.page())}loadBrevoTracker(){if("enabled"===this.config.flags.brevo_email&&this.config.brevo_ma_key&&(window.sib={equeue:[],client_key:this.config.brevo_ma_key},window.sendinblue={ecommerce:{}},x.email&&(window.sib.email_id=x.email),J.forEach((function(t){var e=t.name;t.isEcommerce?window.sendinblue.ecommerce[e]=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];Le(e,n)}:window.sendinblue[e]=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];Le(e,n)}})),j())){var t=document.createElement("script");return t.type="text/javascript",t.id="sendinblue-js",t.async=!0,t.src="https://sibautomation.com/sa.js?key=".concat(window.sib.client_key),document.body.appendChild(t),this.trackPage(),!0}return!1}syncAbandonedCart(t,e){(t?Promise.resolve(t):this.getStoreLibClass().getCart()).then((t=>{!function(t){var{cartJson:e,CartClass:n,options:i={pushowl:!0,brevo:!1}}=t;if(e){var o=new n(e),s=new Nt,r=o.token?"token":"checkout_token",a=["Cart Token:",o[r],"Cart Items",o.item_count,"Last synced Cart:",x.synced_cart_json,"AC Events:",x.ac_events],l=x.synced_cart_json,c=l?new n(l):null;e.updated_at=e.updated_at||(new Date).toISOString(),o.item_count>0&&(!c||o.cartId!==c.cartId)||0===o.item_count&&c&&c[r]===o[r]&&c.cartId!==o.cartId?(i.pushowl?s.syncCart(o).then((t=>{x.synced_cart_json=e,x.ac_events=t.result;var{token:n}=t.result;n&&(x.subscriberToken=n),mt("Cart synced successfully. Response: ",t)})).catch((t=>{gt(t),mt("🔴 Cart sync failed. Error: request failed. ",t,...a)})):x.synced_cart_json=e,i.brevo&&_t(e)):mt("Cart was not synced. Reason: No change since last sync.",...a)}}({cartJson:t,CartClass:this.getStoreCartClass(),options:e})})).catch((t=>{gt(t),mt("🔴 Cart sync failed. Error: cart could not be synced.  ",t)}))}syncCart(t){this.browserHandler.isPermissionGranted&&this.config.abandoned_cart_enabled&&zt.verifySubscriber({browserHandler:this.browserHandler}).then((()=>{this.syncAbandonedCart(t,{pushowl:!0,brevo:this.isBrevoEnabled()})}))}syncProductView(){var t=this.getStoreLibClass(),e=this.config.browse_abandonment_enabled;t.section===h.PRODUCT&&this.getCurrentProduct().then((t=>{this.isBrevoEnabled()&&this.storeLib.getProductDetails().then((e=>{var n=e.currentVariant()||{};F({eventName:Z.PRODUCT_VIEWED,eventData:{id:"".concat(t.id),data:vt(vt({},t),{},{title:e.title,featured_image:n.featured_image||e.featured_image,price:n.price||e.price,currency:window.Shopify?window.Shopify.currency.active:"",url:window.location.href})}}),window.sendinblue&&(n?window.sendinblue.ecommerce.viewProduct(String(n.id)):window.sendinblue.ecommerce.viewProduct(String(t.id)))})),e&&x.subscriberToken&&this.apiClient.syncProductView(t).then((t=>{var{token:e}=t.result;e&&(x.subscriberToken=e),mt("Product synced",t)})).catch((t=>{gt(t)}))})).catch((t=>{gt(t)}))}subscriberLog(t){var e=Object.entries(t).map((t=>{var[e,n]=t;return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(n))})).join("&");return C.get({path:"/log/?".concat(e)})}setCustomerId(t){window.pushowl.customerId=t,this.browserHandler.isPermissionGranted&&zt.verifySubscriber({browserHandler:this.browserHandler}).then((()=>{this.syncCustomerId()}))}setCheckoutId(t){this.browserHandler.isPermissionGranted&&zt.verifySubscriber({browserHandler:this.browserHandler}).then((()=>{this.apiClient.syncSubscriberTokenAndCheckoutId(t)}))}showBackInStock(t,e){this.flyoutHandler.then((n=>{te.renderBackInStock({rootContext:this.context,flyoutHandler:n,product:t,variant:e})}))}showPriceDrop(t,e){this.flyoutHandler.then((n=>{te.renderPriceDrop({rootContext:this.context,flyoutHandler:n,product:t,variant:e})}))}identify(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}}{constructor(){B.mode="headless",super()}onCanRun(){this.defaultRender()}getStoreLibClass(){return U}getStoreCartClass(){return Ue}}if(B.getPreviewBranch())B.loadPreviewLib("pushowl-sib.js");else if(B.isDisabled())mt("Pushowl is disabled in your store");else{var je=new Be,Fe=(Re=je,Ae={LOG_LEVELS:W,setLogLevel:t=>{x.logLevel=t,mt("Log level set to: ".concat(t))},push(t){Re.ready.then((()=>{t()}))},getSubdomain:()=>Re.subdomain,isEnabled:()=>Re.isEnabled(),subscriberLog:t=>Re.subscriberLog(t),subscribe(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return zt.subscribeIfNotAlready({enableHintScreen:t,websitePushId:Re.config.website_push_id,browserHandler:Re.browserHandler})},registerForEvent(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(((i,o)=>{zt.subscribeIfNotAlready({enableHintScreen:e,websitePushId:Re.config.website_push_id,browserHandler:Re.browserHandler}).then((()=>{Re.storeLib.getProductDetails(!1,n.productAlias).then((e=>{var s=n.productVariantId?e.getVariant(n.productVariantId):e.currentVariant(),r=null,l=null;if(t===z.BACK_IN_STOCK)r=a.EVENT_API_PATH.BACK_IN_STOCK,l=Re.storageManager.back_in_stock;else{if(t!==z.PRICE_DROP)return void o(q.UNKNOWN_EVENT);r=a.EVENT_API_PATH.PRICE_DROP,l=Re.storageManager.price_drop}zt.update(r,{product_id:e.id,product:e,variant:s,source:V.PARTNER_JS_API,permission:window.Notification&&window.Notification.permission}).then((()=>{Re.productSectionRender(e),l.subscribe(s);var t={};t[a.STORAGE_KEYS.SUBSCRIBER_TOKEN]=x.subscriberToken,i(t)})).catch((t=>{gt(t)}))}))})).catch((()=>{o({error_code:q.PERMISSION_NOT_GRANTED})}))}))},isProductVariantSubscribed:(t,e)=>"price_drop"===t?Re.storageManager.price_drop.isSubscribed({id:e}):"back_in_stock"===t&&Re.storageManager.back_in_stock.isSubscribed({id:e}),showBrowserPrompt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{overlay:{enabled:!1}};return Re.showBrowserPrompt(t)},showCustomPrompt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.overlay=null,Re.showCustomPrompt(t)},showWidget(t){var{type:e}=t,n=Tt(t,Wt);switch(e){case"browserPrompt":return Re.showBrowserPrompt(n);case"customPrompt":return Re.showCustomPrompt(n,!0);case"priceDrop":return n.variant.name=n.variant.title,delete n.variant.title,Re.showPriceDrop(n.product,n.variant);case"backInStock":return n.variant.name=n.variant.title,delete n.variant.title,Re.showBackInStock(n.product,n.variant);case"optinFlows":return Re.optinFlows(!0)}},syncCart:t=>(t.item_count=t.items.length,t.items.forEach((t=>{t.variantId&&(t.variant_id=t.variantId,delete t.variantId),t.productId&&(t.product_id=t.productId,delete t.productId)})),t.checkoutToken&&(t.checkout_token=t.checkoutToken,delete t.checkoutToken),Re.syncCart(t)),syncPageName:t=>Re.syncPageName(t),syncProductView:t=>(t.productId&&(t.product_id=t.productId,delete t.productId),Re.syncProductView(t)),setCustomerId:t=>Re.setCustomerId(t),setCheckoutId:t=>Re.setCheckoutId(t),getCurrentPermission:()=>x.isPermissionGranted?Promise.resolve(a.NOTIFICATION_PERMISSION.GRANTED):window&&window.Notification?Promise.resolve(Notification.permission):void 0,identify:t=>Re.identify(t),trackCategoryPage:t=>Re.trackCategoryPage(t)},De={get(t,e){if(!t[e]&&Re[e]){mt("🟠 Internal property accessed: ".concat(e));var n=Re[e];return"function"==typeof n?n.bind(Re):n}return Reflect.get(...arguments)}},new Proxy(Ae,De));window.pushowl&&window.pushowl.queue&&Array.isArray(window.pushowl.queue)&&(window.pushowl.queue.forEach((t=>{var{taskName:e,taskData:n,promise:i}=t;Fe[e]?je.ready.then((()=>{var t=Fe[e](n);t instanceof Promise?t.then(i.resolve):i.resolve(t)})):i.reject("unsupportedCall")})),window.pushowl.trigger=function(t,e){return je.ready.then((()=>Fe[t](e)))},window.pushowl.setLogLevel=Fe.setLogLevel)}var He=Object.freeze({__proto__:null,NotificationPreference:class{constructor(t,e,n){this.container=t,this.data=e,this.notificationPreference=n}get accessMyDataForm(){var{data:t}=this,e=window.location.origin;return"https://access-push-data.paperform.co/?blpf8=".concat(t.subscriberToken,"&17vii=").concat(e,"&afg4h=").concat(t.subdomain)}get deleteMyDataForm(){var{data:t}=this,e=window.location.origin;return"https://delete-push-data.paperform.co/?7uv2c=".concat(t.subscriberToken,"&9e21s=").concat(e,"&2te0r=").concat(t.subdomain)}get unsubscribeForm(){return"http://docs.pushowl.com/subscribers/unsubscribing-from-push"}remove(){this.node.parentNode.removeChild(this.node)}render(){this.node=this.createNode(),this.container.appendChild(this.node),this.npContainer=this.node.querySelector(".js-po-np--container"),mt(this.accessMyDataForm),this.access=this.node.querySelector(".js-po-np--access"),this.delete=this.node.querySelector(".js-po-np--delete"),this.unsubscribe=this.node.querySelector(".js-po-np--unsubscribe"),this.close=this.node.querySelector(".js-po-np--close"),this.access&&this.access.addEventListener("click",(()=>{window.open(this.accessMyDataForm)})),this.delete&&this.delete.addEventListener("click",(()=>{window.open(this.deleteMyDataForm)})),this.unsubscribe&&this.unsubscribe.addEventListener("click",(()=>{window.open(this.unsubscribeForm)})),this.close.addEventListener("click",(()=>{this.remove()})),this.node.addEventListener("click",(()=>{this.remove()})),this.npContainer.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation()}))}createNode(){var t,e=this.notificationPreference,n=this.notificationPreference.actions,i="cursor: pointer; white-space: nowrap; min-width: 100px; padding: 8px 14px; font-size:14px; border-radius:4px; border:0; color: #fff; background-color:#686565;";return t='\n    <div class="js-po-np--overlay"\n      style="position: fixed;top: 0;bottom: 0;left: 0;right: 0;background: rgba(0,0,0,0.65);z-index: 9999999;">\n      <div class="js-po-np--container"\n        style="background:#fff; box-shadow:0 10px 30px 0 rgba(0, 0, 0, 0.16); border-radius:8px; padding: 25px 50px; position:absolute; top:50%; transform:translateY(-70%) translateX(-50%); left: 50%;"\n      >\n        <button \n          class="js-po-np--close"\n          style="display:flex; position: absolute; top:0; right:0px; cursor:pointer; background:transparent; border:0; padding:8px;"\n          aria-label="Close push notification preferences"\n        >\n          <svg style="width:24px;height:24px" viewBox="0 0 24 24">\n            <path fill="currentColor" d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" />\n          </svg>\n        </button>\n        <div class="js-po-np--text"\n          style="font-size:16px; padding-bottom:2px; border-bottom:6px solid #cacaca; margin-bottom:30px; text-align:center;"\n        >\n          '.concat(e.message,'\n        </div>\n\n        <div class="js-po-np--buttons" style="text-align:center;">\n    '),n.access_data.enabled&&(t+='<div style="margin-top: 10px;">\n                      <button class="js-po-np--access"\n                        style="'.concat(i,';background-color: #188675;">\n                        ').concat(n.access_data.text,"\n                      </button>\n                    </div>")),n.delete_data.enabled&&(t+='<div style="margin-top: 10px;">\n                      <button class="js-po-np--delete"\n                        style="'.concat(i,'">\n                        ').concat(n.delete_data.text,"\n                      </button>\n                    </div>")),n.unsubscribe.enabled&&(t+='<div style="margin-top: 10px;">\n                      <button class="js-po-np--unsubscribe"\n                        style="'.concat(i,'">\n                        ').concat(n.unsubscribe.text,"\n                      </button>\n                    </div>")),tt(t+="\n          </div>\n        </div>\n      </div>")}}});var Ge=Object.freeze({__proto__:null,NotificationPreferenceToggle:class{constructor(t,e,n){this.container=t,this.npWidget=n,this.notificationPreference=e}render(){this.node=this.createNode(),this.container.appendChild(this.node),this.close=this.node.querySelector(".js-po-np-toggle--close"),this.node.addEventListener("click",(()=>{this.npWidget.render()})),this.close.addEventListener("click",(t=>{this.node.parentNode.removeChild(this.node),t.preventDefault(),t.stopPropagation()}))}createNode(){var t=this.notificationPreference;return tt('\n    <div class="js-po-np-toggle" style="cursor:pointer;z-index:2147483646;position:fixed;bottom:0;right:10px;border-radius:4px 4px 0 0;background-color: rgba(0,0,0,0.7);box-shadow: 0 2px 4px 0 rgba(0,0,0,0.5);color: #FFFFFF; font-size:14px; padding:0; display:flex; align-items:center;">\n      <button\n        style="padding: 8px; cursor:pointer; background:transparent; border:0; color:#ccc; font-size:inherit;"\n        aria-label="Open push notification preferences"\n      >\n        '.concat(t.message,'\n      </button>\n      <button \n        class="js-po-np-toggle--close"\n        style="display:flex; cursor:pointer; background:transparent; border:0; padding: 8px; color:#ccc; font-size:inherit;"\n        aria-label="Close push notification preferences toggle"\n      >\n        <svg style="width:20px;height:20px" viewBox="0 0 24 24">\n          <path fill="currentColor" d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" />\n        </svg>\n      </button>\n    </div>'))}}});const $e={GRANT_PERMISSION:"grantPermission",DENIED_PERMISSION:"deniedPermission"},Ke={CHROME:"chrome",FIREFOX:"firefox",SAFARI:"safari"},Ve={DESKTOP:"desktop",ANDROID:"android"},Ye={START_REFERENCE:"start_reference"},qe={HS_CONTAINER:"po-hint-screen-widget-container",HS_SCREEN:"po-hint-screen",HS_CONTENT:"po-hs-content",HS_OVERLAY:"po-hs-overlay"},ze={dismissOnOverlay:!0};class We{constructor(t={}){this.container=document.querySelector("body"),this.widget=null,this.purge(),this.options=Object.assign(Object.assign({},ze),t)}render(t=$e.GRANT_PERMISSION,e=null){try{if(this.purge(),this._getDeviceType()===Ve.ANDROID&&t===$e.GRANT_PERMISSION)return;let n=this._screenData(t);if(e){let{title:t,subtitle:i,hintMediaUrl:o,branding:s}=e;n.title=t||n.title,n.subtitle=i||n.subtitle,n.hintMediaUrl=o||n.hintMediaUrl,n.branding=!(!1===s)}let i=this._deviceScreenNodeFactory();this.widget=i(n),this.container.appendChild(this.widget),this.content=this.widget.querySelector(`.${qe.HS_CONTENT}`),this.hintScreen=this.widget.querySelector(`.${qe.HS_SCREEN}`),this.options.dismissOnOverlay&&this.hintScreen.addEventListener("click",(()=>{this.purge(),"function"==typeof this.options.onDismiss&&this.options.onDismiss()})),setTimeout((()=>{this._getDeviceType(),Ve.DESKTOP}),10)}catch(t){}}purge(){let t=this.container.querySelector(`.${qe.HS_CONTAINER}`);t&&this.container.removeChild(t)}_deviceArrowConfig(t){let e=this._getBrowser();return{[$e.GRANT_PERMISSION]:{[Ke.CHROME]:{[Ye.START_REFERENCE]:{x:375,y:100},padding:20},[Ke.FIREFOX]:{[Ye.START_REFERENCE]:{x:311,y:148},padding:20}},[$e.DENIED_PERMISSION]:{[Ke.CHROME]:{[Ye.START_REFERENCE]:{x:131,y:0},padding:0},[Ke.FIREFOX]:{[Ye.START_REFERENCE]:{x:60,y:0},padding:0}}}[t][e]}_get_arrow_node(t=$e.GRANT_PERMISSION){let e=this._deviceArrowConfig(t),n=e[Ye.START_REFERENCE],i=(window.innerWidth-this.content.getBoundingClientRect().width)/2,o=(window.innerHeight-this.content.getBoundingClientRect().height)/2;if("object"!=typeof n)return;let s=Math.sqrt(Math.pow(n.x-i,2)+Math.pow(n.y-o,2)),r=Math.max(.1*s,15),a=n.x,l=n.y+1*r+e.padding,c=i-20,u=Math.max(o+40,l+40),d=c-a,p=u-l,h=`M ${c} ${u} q ${-1*d} ${p}, -${d} ${-1*p}`,m=`M ${a-r} ${l+r} q ${r} -${3*r}, ${2*r} 0`,b=`<div class="po-helper-arrow-container">\n    <style>\n        .po-helper-arrow {\n            position: fixed;\n            top: 0;\n            left: 0;\n        }\n    </style>\n    <div class="po-helper-arrow">\n        <svg width="${window.innerWidth}px" height="${window.innerHeight}px" viewBox="0 0 ${window.innerWidth} ${window.innerHeight}" version="1.1"\n             xmlns="http://www.w3.org/2000/svg">\n            <desc>Arrow</desc>\n            <defs></defs>\n            <g id="Interaction-Flow" stroke-width="5" stroke-linecap="round" fill="none" fill-rule="evenodd">\n                <path d="${h}" id="tail" stroke="#FFFFFF"></path>\n                <path d="${m}" id="head" stroke="#FFFFFF"></path>\n            </g>\n        </svg>\n    </div>\n</div>`;return We._parseHTML(b)}_deviceScreenNodeFactory(){return this._getDeviceType()===Ve.DESKTOP?this._desktopScreenNode:this._mobileScreenNode}_desktopScreenNode(t){let{title:e,subtitle:n,hintMediaUrl:i,branding:o}=t,s=`<div class="${qe.HS_CONTAINER}">\n    <style>\n        .po-hint-screen-widget * {\n            font-family: "Roboto", sans-serif;\n            line-height: 1em;\n        }\n\n        .${qe.HS_CONTENT} {\n            width: 462px;\n        }\n\n        .${qe.HS_OVERLAY} {\n            position: fixed;\n            top: 0;\n            left: 0;\n            width: 100vw;\n            height: 100vh;\n            background-color: rgba(0, 0, 0, .8);\n            z-index: 2147483646;\n        }\n\n        .${qe.HS_SCREEN} {\n            position: fixed;\n            top: 0;\n            left: 0;\n            width: 100vw;\n            height: 100vh;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            z-index: 2147483647;\n        }\n\n        @media (max-height: 700px) {\n            .po-hs-content {\n                transform: scale(0.7);\n            }\n        }\n\n        .${qe.HS_CONTENT} .title {\n            font-size: 47px;\n            color: white;\n        }\n\n        .${qe.HS_CONTENT} .sub-title {\n            font-size: 17px;\n            color: white;\n            margin-top: 35px;\n        }\n\n        .${qe.HS_CONTENT} .hint-media {\n            margin-top: 35px;\n        }\n\n        .${qe.HS_CONTENT} .hint-media img {\n            width: 100%;\n        }\n\n        .po-branding {\n            position: fixed;\n            bottom: 20px;\n            width: 100%;\n            display: flex;\n            justify-content: center;\n            z-index: 2147483647;\n        }\n\n    </style>\n    <div class="po-hint-screen-widget">\n        <div class="${qe.HS_OVERLAY}">\n            <div class="${qe.HS_SCREEN}">\n                <div class="${qe.HS_CONTENT}">\n                    <div class="hint-content">\n                        <div class="title">${e}</div>\n                        <div class="sub-title">${n}</div>\n                        <div class="hint-media">\n                            <img src="${i}">\n                        </div>\n                    </div>\n                </div>`;return!1!==o&&(s+='\n                <div class="po-branding">\n                    <a href="https://pushowl.com?ref=hint-screen-branding" target="_blank">\n                    <svg xmlns="http://www.w3.org/2000/svg" width="113" height="49" viewBox="0 0 226 98">\n                      <g fill="#FFF" fill-rule="evenodd">\n                      <text font-family="Roboto-Regular, Roboto, sans-serif" font-size="18" transform="translate(-14 -4)" font-weight="normal">\n                        <tspan x="21.82" y="17">Powered By</tspan>\n                      </text>\n                      <path d="M221.702 71.477V48.622H226v22.855h-4.298Zm-11.404 0-2.952-11.58-2.932 11.58h-4.62l-5.239-17.18h4.376l3.141 13.056 3.143-13.057h4.56l3.082 13.026 3.141-13.026h4.16l-5.237 17.181h-4.623Zm-18.131-2.28c-1.705 1.636-3.818 2.453-6.338 2.452-2.52 0-4.618-.818-6.293-2.452-1.674-1.634-2.51-3.777-2.51-6.427 0-2.648.846-4.78 2.54-6.396 1.695-1.614 3.798-2.421 6.31-2.422 2.51 0 4.613.807 6.306 2.422 1.695 1.615 2.542 3.747 2.542 6.396s-.853 4.791-2.557 6.427Zm-3.178-10.215a4.231 4.231 0 0 0-3.145-1.335 4.134 4.134 0 0 0-3.115 1.335c-.847.89-1.271 2.163-1.272 3.819 0 1.655.423 2.928 1.272 3.818a4.11 4.11 0 0 0 3.1 1.336 4.24 4.24 0 0 0 3.145-1.351c.878-.899 1.317-2.172 1.318-3.819 0-1.644-.434-2.912-1.303-3.803Zm-17.98 3.046c0-1.34-.371-2.365-1.05-3.075s-1.609-1.065-2.784-1.065c-1.176 0-2.109.355-2.798 1.065-.689.71-1.101 1.736-1.101 3.075v9.451l-4.295-.002V48.622l4.295.001v8.25c1.093-1.874 2.93-2.754 5.384-2.754 1.957 0 3.555.643 4.792 1.93 1.238 1.287 1.856 3.073 1.855 5.36v10.068l-4.298.002v-9.451Zm-20.629-.655c.968.187 1.931.42 2.89.7a5.425 5.425 0 0 1 2.458 1.49c.68.712 1.02 1.66 1.02 2.84 0 1.552-.655 2.814-1.963 3.787-1.309.974-2.978 1.46-5.008 1.46s-3.694-.482-4.992-1.444c-1.3-.963-2.007-2.425-2.131-4.226h4.468c.132 1.444 1.064 2.255 2.732 2.255.805 0 1.454-.181 1.947-.543a1.69 1.69 0 0 0 .743-1.428c0-.592-.34-1.057-1.021-1.398a9.466 9.466 0 0 0-2.473-.792 35.005 35.005 0 0 1-2.89-.682 5.448 5.448 0 0 1-2.458-1.445c-.68-.693-1.02-1.598-1.019-2.717 0-1.49.629-2.742 1.885-3.757 1.257-1.014 2.926-1.521 5.008-1.52 2.081 0 3.75.501 5.008 1.505 1.258 1.005 1.907 2.445 1.99 4.164h-4.468c-.093-1.461-.975-2.253-2.623-2.253-.825 0-1.463.165-1.916.496-.443.31-.7.824-.68 1.365 0 .58.34 1.036 1.02 1.366a9.89 9.89 0 0 0 2.473.777Zm-14.146 7.463c-1.093 1.877-2.876 2.815-5.35 2.815-1.938 0-3.526-.644-4.762-1.933-1.236-1.29-1.855-3.078-1.856-5.367V54.296l4.297-.002v9.452c0 1.34.372 2.358 1.053 3.08.68.721 1.608 1.082 2.784 1.082 1.175 0 2.107-.36 2.798-1.083.69-.721 1.098-1.739 1.098-3.079v-9.452l4.298.002v17.138h-4.36v-2.598Zm-21.768 2.784c-2.327 0-4.04-.974-5.322-3.062v10.998h-4.467l-.001-25.433h4.468v2.75c1.22-1.943 2.918-2.92 5.275-2.92 2.358 0 4.302.82 5.833 2.464 1.531 1.643 2.294 3.761 2.294 6.355 0 2.593-.765 4.715-2.294 6.368-1.53 1.653-3.46 2.48-5.786 2.48Zm2.296-12.553a4.444 4.444 0 0 0-6.36.015c-.9.899-1.258 2.062-1.258 3.633 0 1.57.357 2.877 1.258 3.775a4.405 4.405 0 0 0 6.36-.015c.899-.91 1.348-2.149 1.349-3.719 0-1.57-.45-2.8-1.35-3.69ZM85.74 53.019a22.392 22.392 0 0 1 1.694 8.575c0 12.477-10.139 22.593-22.639 22.593-12.507 0-22.64-10.116-22.64-22.593C42.156 49.118 52.289 39 64.794 39h22.68a14.348 14.348 0 0 0-2.8 8.553 14.493 14.493 0 0 0 1.067 5.466Zm-20.945-8.326c-9.33.018-16.88 7.593-16.868 16.923.012 9.33 7.582 16.886 16.912 16.88 9.33-.006 16.89-7.572 16.89-16.902-.01-9.342-7.591-16.909-16.934-16.9Zm-.002 16.805a2.45 2.45 0 0 0-2.452 2.45h-3.585a6.037 6.037 0 0 1 12.074 0h-3.584a2.45 2.45 0 0 0-2.453-2.45Zm-42.114 0a2.45 2.45 0 0 0-2.453 2.45h-3.584a6.037 6.037 0 0 1 12.074 0H25.13a2.45 2.45 0 0 0-2.452-2.45Zm18.94 12.48a.01.01 0 0 1-.003.005 26.354 26.354 0 0 0 12.995 11.81c-2.82 4.187-6.525 8.004-10.919 11.314-5.466-4.114-9.86-9.015-12.839-14.437.028-.012.055-.026.083-.036a22.622 22.622 0 0 1-8.256 1.553C10.173 84.187.036 74.071.036 61.594a22.457 22.457 0 0 1 1.732-8.674A14.504 14.504 0 0 0 2.8 47.553 14.348 14.348 0 0 0 0 39h22.68a22.637 22.637 0 0 1 18.94 10.21 25.937 25.937 0 0 0-2.686 7.648 16.902 16.902 0 1 0 0 9.47 25.92 25.92 0 0 0 2.686 7.65Z"/></g></svg>\n                    </a>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'),s+="  </div>\n                      </div>\n                    </div>\n                </div>\n                ",We._parseHTML(s)}_mobileScreenNode(t){let{title:e,subtitle:n,hintMediaUrl:i,showInstructions:o}=t,s=o?0:130,r=window.outerHeight-s,a=`<div class="${qe.HS_CONTAINER}">\n    <style>\n        .po-hint-screen-widget * {\n            font-family: "Roboto";\n            line-height: 1em;\n        }\n        \n        .${qe.HS_CONTENT} {\n            width: 325px;\n        }\n        \n        .${qe.HS_OVERLAY} {\n            position: fixed;\n            top: 0;\n            left: 0;\n            width: 100vw;\n            height: 100vh;\n            background-color: rgba(0, 0, 0, .8);\n            z-index: 2147483646;\n        }\n\n        .${qe.HS_SCREEN} {\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            z-index: 2147483647;\n            flex-grow: 1;\n            height: ${r}px;\n        }\n        \n        .${qe.HS_CONTENT} .title {\n            font-size: 30px;\n            color: white;\n            margin-top: 50px;\n        }\n        \n        .${qe.HS_CONTENT} .sub-title {\n            font-size: 14px;\n            line-height: 16px;\n            color: white;\n            margin-top: 35px;\n        }\n        \n        .po-branding {\n            z-index: 2147483647;\n        }\n        \n        .instructions {\n            display: ${o?"block":"none"};\n        }\n        \n        .filler-container .padding-box {\n            display: ${o?"none":"block"};\n        }\n        \n        .instructions ul {\n            list-style-type: none;\n            padding-left: 0;\n        }\n        \n        .instructions ul li {\n            color: white;\n            font-size: 14px;\n            line-height: 16px;\n        }\n        \n        .filler-container {\n            position: fixed;\n            top: 0;\n            left: 0;\n            width: 100vw;\n            height: 100vh;\n            z-index: 2147483647;\n        }\n       \n    </style>\n    <div class="po-hint-screen-widget">\n        <div class="${qe.HS_OVERLAY}"></div>\n        <div class="filler-container">\n            <div class="${qe.HS_SCREEN}">\n                <div class="${qe.HS_CONTENT}">\n                    <div class="hint-content">\n                        <div class="po-branding">\n                            <a href="https://pushowl.com?ref=hint-screen-branding" target="_blank">\n                              <svg xmlns="http://www.w3.org/2000/svg" width="30" height="20"><path fill="#FFF" fill-rule="evenodd" d="m14.282 12.008.001-.002a8.77 8.77 0 0 1-.91-2.59 5.723 5.723 0 1 1 0-3.207 8.77 8.77 0 0 1 .91-2.59A7.67 7.67 0 0 0 7.867.161H.183a4.9 4.9 0 0 1 .6 4.714 7.667 7.667 0 0 0 9.88 10.063l-.027.011c1.009 1.837 2.497 3.496 4.349 4.89a16.114 16.114 0 0 0 3.699-3.832 8.925 8.925 0 0 1-4.402-3.999Zm-8.46-3.399h1.213a.83.83 0 0 1 1.662 0h1.215a2.045 2.045 0 0 0-4.09 0Zm23.412-3.688-.005-.012A4.908 4.908 0 0 1 29.817.16h-7.683a7.651 7.651 0 1 0 7.1 4.76Zm-7.1 8.615a5.724 5.724 0 1 1 5.737-5.723 5.731 5.731 0 0 1-5.737 5.723Zm0-6.967a2.043 2.043 0 0 0-2.045 2.04h1.214a.83.83 0 0 1 1.662 0h1.214a2.043 2.043 0 0 0-2.045-2.04Z"/></svg>\n                            </a>\n                        </div>\n                        <div class="title">${e}</div>\n                        <div class="sub-title">${n}</div>\n                        <div class="instructions">\n                            <ul>\n                                <li>1. \tClick on the lock icon \n                                    <span>\n                                      <svg width="12px" height="17px" viewBox="0 0 12 17" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                                        <path d="M10.5 6h-.75V4.5C9.75 2.43 8.07.75 6 .75 3.93.75 2.25 2.43 2.25 4.5V6H1.5C.675 6 0 6.675 0 7.5V15c0 .825.675 1.5 1.5 1.5h9c.825 0 1.5-.675 1.5-1.5V7.5c0-.825-.675-1.5-1.5-1.5zM6 12.75c-.825 0-1.5-.675-1.5-1.5s.675-1.5 1.5-1.5 1.5.675 1.5 1.5-.675 1.5-1.5 1.5zM8.325 6h-4.65V4.5A2.327 2.327 0 016 2.175 2.327 2.327 0 018.325 4.5V6z" fill-rule="nonzero" fill="#FFF"/>\n                                      </svg>\n                                    </span> in the address bar above.</li>\n                                <li>2. \tClick on ‘Permission Settings’.</li>\n                                <li>3. \tChange Notifications permission to ‘Allow’.</li>\n                            </ul>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="padding-box" style="height: ${s}px; width: 100%;"></div>\n        </div>\n\n    </div>\n</div>\n`;return We._parseHTML(a)}_getDeviceType(){return/(android)/i.test(navigator.userAgent)?Ve.ANDROID:Ve.DESKTOP}_getBrowser(){const{name:t}=st();return t}_screenData(t=$e.GRANT_PERMISSION){let e={[Ve.DESKTOP]:{[Ke.CHROME]:{[$e.GRANT_PERMISSION]:{title:"One more step to go!",subtitle:"Click ‘Allow’ to receive updates from us. Rest assured - we hate spam as much as you do.",hintMediaUrl:"https://static.pushowl.com/sdks/hint-screen/ChromeSubscriptionGIF.gif",branding:!1},[$e.DENIED_PERMISSION]:{title:"Change your settings to allow notifications",subtitle:"Change notifications permission to ‘Allow’ to receive updates from us. No spam, pinky promise.",hintMediaUrl:"https://static.pushowl.com/sdks/hint-screen/ChromeDesktopUnblock.gif",branding:!1}},[Ke.FIREFOX]:{[$e.GRANT_PERMISSION]:{title:"One more step to go!",subtitle:"Click ‘Allow’ to receive updates from us. Rest assured - we hate spam as much as you do.",hintMediaUrl:"https://static.pushowl.com/sdks/hint-screen/FirefoxSubscriptionGIF.gif",branding:!1},[$e.DENIED_PERMISSION]:{title:"Change your settings to allow notifications",subtitle:"Remove ‘Blocked’ from notification permissions to receive updates from us. No spam, pinky promise.",hintMediaUrl:"https://storage.googleapis.com/pushowl/sdk/general/hint-screen/FirefoxDesktopUnblock.gif",branding:!1}},[Ke.SAFARI]:{[$e.DENIED_PERMISSION]:{title:"Change your settings to allow notifications",subtitle:"Change notifications permission to ‘Allow’ to receive updates from us. No spam, pinky promise.",hintMediaUrl:"https://static.pushowl.com/sdks/hint-screen/SafariDesktopUnblock.gif",branding:!1}}},[Ve.ANDROID]:{[Ke.CHROME]:{[$e.GRANT_PERMISSION]:{title:"One more step to go!",subtitle:"Click ‘Allow’ to receive updates from us. Rest assured - we hate spam as much as you do.",hintMediaUrl:"https://static.pushowl.com/sdks/hint-screen/ChromeSubscriptionGIF.gif",branding:!1},[$e.DENIED_PERMISSION]:{title:"Change your settings to allow notifications",subtitle:"Change notifications permission to ‘Allow’ to receive updates from us. No spam, pinky promise.",hintMediaUrl:"https://static.pushowl.com/sdks/hint-screen/ChromeDesktopUnblock.gif",showInstructions:!0,branding:!1}}}},n=this._getDeviceType(),i=this._getBrowser();return e[n][i][t]}static _parseHTML(t){let e=document.implementation.createHTMLDocument();return e.body.innerHTML=t,e.body.children[0]}}var Ze,Je,Xe=Object.freeze({__proto__:null,PushowlHintScreenHandler:class{constructor(t={}){this.hintscreen=new We({onDismiss:t.onDismiss})}show(t){let e=$e;this.hintscreen.purge(),!st().isSafari&&window.Notification&&window.Notification.permission===a.NOTIFICATION_PERMISSION.DEFAULT&&this.hintscreen.render(e.GRANT_PERMISSION,t),window.Notification&&window.Notification.permission===a.NOTIFICATION_PERMISSION.DENIED&&this.hintscreen.render(e.DENIED_PERMISSION),window.Notification&&window.Notification.permission===a.NOTIFICATION_PERMISSION.GRANTED&&this.hintscreen.purge()}purge(){this.hintscreen.purge()}}});!function(t){t.BOX="BOX",t.TEXT="TEXT",t.INPUT="INPUT",t.IMAGE="IMAGE",t.BUTTON="BUTTON",t.CHECKBOX="CHECKBOX",t.DATE="DATE",t.HTML="HTML"}(Ze||(Ze={})),function(t){t.CENTERED="centered",t.BOTTOM_LEFT="bottom_left",t.BOTTOM_CENTERED="bottom_centered",t.BOTTOM_RIGHT="bottom_right",t.TOP_LEFT="top_left",t.TOP_CENTERED="top_centered",t.TOP_RIGHT="top_right"}(Je||(Je={}));const Qe=()=>window.innerWidth<=444;var tn=Object.freeze({__proto__:null,OptinPromptWidget:class{constructor(t){this.config=t,this.node=null,this.container=document.body,this.state={multilingual_title:null,multilingual_description:null,theme:{},yesButtonListener:null,noButtonListener:null,branding:!0,logo:null,position:{default:"top-center",mobile:"top"},autoFocus:!1},this.rendered=!1}init(){this.node=this._createNode(),this.container.appendChild(this.node),this.title=this.node.querySelector(".js-pushowl-title"),this.description=this.node.querySelector(".js-pushowl-description"),this.yesButton=this.node.querySelector(".js-pushowl-yes-button"),this.noButton=this.node.querySelector(".js-pushowl-no-button"),this.node.querySelector(".js-pushowl-btn-container").setAttribute("dir","auto"),this.node.querySelector(".js-pushowl-title-desc-container").setAttribute("dir","auto");var t=0;window.addEventListener("click",(e=>(Date.now()-t<1e3||this.clickHandler(e),!0)),!0),window.addEventListener("touchend",(e=>(t=Date.now(),this.clickHandler(e),!0)),!0)}clickHandler(t){const e=t.target;this.yesButton.contains(e)?this.state.yesButtonListener&&this.state.yesButtonListener():this.noButton.contains(e)&&this.state.noButtonListener&&this.state.noButtonListener()}getPositionCss(t){switch(t){case Je.CENTERED:return Qe()?"\n          top: 0 !important;\n          bottom: auto !important;\n          left: 0 !important;\n        ":"\n        top: 0 !important;\n        left: calc(50vw - 210px) !important;\n      ";case Je.TOP_CENTERED:case"top-center":return"\n        top: 0 !important;\n        left: calc(50vw - 210px) !important;\n      ";case Je.TOP_LEFT:case"top-left":return"\n        top: 0 !important;\n        left: 0 !important;\n      ";case Je.TOP_RIGHT:case"top-right":return"\n        top: 0 !important;\n        right: 0 !important;\n      ";case Je.BOTTOM_CENTERED:case"bottom-center":return"\n        bottom: 0 !important;\n        left: calc(50vw - 210px) !important;\n      ";case Je.BOTTOM_LEFT:case"bottom-left":return"\n        bottom: 0 !important;\n        left: 0 !important;\n      ";case Je.BOTTOM_RIGHT:case"bottom-right":return"\n        bottom: 0 !important;\n        right: 0 !important;\n      ";case"top":return"\n        top: 0 !important;\n        bottom: auto !important;\n        left: 0 !important;\n      ";case"bottom":return"\n        top: auto !important;\n        bottom: 0 !important;\n        left: 0 !important;\n      ";default:return""}}getMultiLingualLabel(t,e,n="default"){return t[e]||t[n]}render(){this.rendered||(this.init(),this.rendered=!0);const{language:t}=function(){const[t,e]=navigator.language.split("-");return{language:t,region:e}}();this.title.textContent=this.getMultiLingualLabel(this.state.multilingual_title,t),this.description.textContent=this.getMultiLingualLabel(this.state.multilingual_description,t),this.yesButton.textContent=this.getMultiLingualLabel(this.state.yesButton.multilingual_label,t),this.noButton.textContent=this.getMultiLingualLabel(this.state.noButton.multilingual_label,t),this.state.autoFocus&&this.title.focus()}setState(t){const e={};Object.keys(t).filter((e=>void 0!==t[e])).map((n=>e[n]=t[n])),this.state=Object.assign(Object.assign({},this.state),e),this.render()}destroy(){this.node.remove()}_createNode(){const t=this.state.theme.yesButtonBgColor||"hsl(223, 71%, 52%)",e=this.state.theme.yesButtonColor||"white";let n;return n=`<div>\n    <style>\n        @keyframes show-up {\n          from {\n            opacity: 0;\n            transform: translateY(${this.state.position[Qe()?"mobile":"default"].match(/top/)?"-20px":"20px"});\n          }\n\n          to {\n            opacity: 1;\n            transform: translateY(0);\n          }\n        }\n        .pushowl-optin {\n            all: initial;\n            display: block !important;\n            z-index: 2147483647 !important;\n            position: fixed !important;\n            width: 420px !important;\n            margin: 12px !important;\n            box-sizing: border-box !important;\n            background: rgb(255, 255, 255) !important;\n            border-radius: 4px !important;\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif !important;\n            align-items: center !important;\n            font-size: 14px !important;\n            box-shadow: 0px 12px 13px rgba(0, 0, 0, 0.21)!important;\n            ${this.getPositionCss(this.state.position.default)}\n            animation-duration: 0.6s;\n            animation-name: show-up;\n        }\n        .pushowl-optin * {\n            width: initial !important;\n            font-family: inherit !important;\n            letter-spacing: initial !important;\n            box-sizing: border-box !important;\n            line-height: initial !important;\n            font-weight: normal !important;\n            -webkit-font-smoothing: initial !important;\n            text-shadow: initial !important;\n            border: initial !important;\n            background: initial !important;\n            padding: initial !important;\n            text-align: initial !important;\n            box-shadow: initial !important;\n            min-width: initial !important;\n            text-transform: initial !important;\n        }\n        .pushowl-optin svg {\n          width: initial;\n          height: initial;\n          stroke: initial;\n          fill: initial;\n        }\n        @media screen and (max-width: 444px) {\n            .pushowl-optin {\n                width: calc(100% - 24px) !important;\n                ${this.getPositionCss(this.state.position.mobile)}\n            }\n        }\n        .pushowl-optin__content {\n            padding: 16px !important;\n        }\n        h2.pushowl-optin__title {\n            text-transform: initial !important;\n            text-align: initial !important;\n            letter-spacing: 0.3px !important;\n            font-size: 16px !important;\n            margin-top: 0 !important;\n            margin-bottom: 8px !important;\n            color: #343946 !important;\n            font-weight: 500 !important;\n            padding: 0 !important;\n        }\n        .pushowl-optin__description {\n            color: #637381 !important;\n            margin: 0 !important;\n            padding: 0 !important;\n            font-size: inherit !important;\n        }\n        .pushowl-optin__image {\n            border-radius: 50% !important;\n            flex-shrink: 0 !important;\n            margin-right: 16px !important;\n            padding: 8px !important;\n        }\n        .pushowl-optin__image img {\n          width: 40px !important;\n        }\n        .pushowl-optin__button {\n            width: initial !important;\n            min-width: initial !important;\n            height: initial !important;\n            min-height: initial !important;\n            text-transform: initial !important;\n            margin: initial !important;\n            cursor: pointer !important;\n            font-size: inherit !important;\n            padding: 6px 20px !important;\n            max-width: 150px !important;\n            border-radius: 4px !important;\n            border: none !important;\n            white-space: nowrap !important;\n            overflow: hidden !important;\n            text-overflow: ellipsis !important;\n        }\n        .pushowl-optin__yes-button {\n            background: ${t} !important;\n            color: ${e} !important;\n        }\n        .pushowl-optin__no-button {\n            background: transparent !important;\n            border: 0 !important;\n            color: #637381 !important;\n        }\n        .pushowl-optin__footer {\n            display: flex !important;\n            justify-content: flex-end !important;\n            align-items: center !important;\n            margin-top: 16px !important;\n        }\n        .pushowl-optin__footer-btn-wrap {\n          display: flex !important;\n          align-items: center !important;\n        }\n    </style>\n    <dialog class="pushowl-optin" open>\n        <div class="pushowl-optin__content">\n            <div style="display:flex;align-items:flex-start;" class="js-pushowl-title-desc-container">\n                <div class="pushowl-optin__image">\n                    ${this.state.logo?`<img src="${this.state.logo}" alt="" />`:'<svg width="40" height="42" fill="none" xmlns="http://www.w3.org/2000/svg"><ellipse cx="20" cy="2.53" rx="2" ry="2.024" fill="#E5843B"/><path d="M.265 34.41h39.47a.18.18 0 00.167-.247l-5.264-13.241a42.729 42.729 0 01-2.395-8.492l-.162-.936a12.261 12.261 0 00-24.162 0l-.162.936a42.723 42.723 0 01-2.395 8.492L.098 34.162a.18.18 0 00.167.247z" fill="#F8CE53"/><ellipse cx="20" cy="34.916" rx="20" ry="7.084" fill="#ECA248"/><mask id="a" maskUnits="userSpaceOnUse" x="0" y="27" width="40" height="15"><ellipse cx="20" cy="34.916" rx="20" ry="7.084" fill="#ECA248"/></mask><g mask="url(#a)"><ellipse cx="20" cy="28.084" rx="7" ry="7.084" fill="#E5843B"/></g></svg>'}\n                </div>\n                <div style="flex:1">\n                    <h2 class="js-pushowl-title pushowl-optin__title" tabindex="-1"></h2>\n                    <p class="js-pushowl-description pushowl-optin__description">Description will come here...</p>\n                </div>\n            </div>\n            <div class="pushowl-optin__footer">\n                <div class="pushowl-optin__footer-btn-wrap js-pushowl-btn-container">\n                    <button class="js-pushowl-no-button pushowl-optin__button pushowl-optin__no-button">Later</button>\n                    <button class="js-pushowl-yes-button pushowl-optin__button pushowl-optin__yes-button">Allow</button>\n                </div>\n            </div>\n        </div>\n    </dialog>\n </div>\n        `,tt(n)}}});const en=window.innerWidth<=365||et();var nn,on,sn,rn,an,ln,cn,un=Object.freeze({__proto__:null,NewCustomPromptWidget:class{constructor(t){this.config=t,this.node=null,this.container=document.body,this.state={title:null,yesButtonText:"",noButtonText:"",theme:{},yesButtonListener:null,noButtonListener:null,logo:null,position:{default:"top-left",mobile:"bottom"}},this.rendered=!1}init(){this.node=this._createNode(),this.container.appendChild(this.node),this.title=this.node.querySelector(".js-pushowl-title")}getPositionCss(){switch(en?"bottom":"top-left"){case"top-left":return"\n        top: 10px !important;\n        left: 125px !important;\n      ";case"bottom":return"\n        top: auto !important;\n        bottom: 0 !important;\n        left: 0 !important;\n      ";default:return""}}render(){this.rendered||(this.init(),this.rendered=!0),this.title.textContent=this.state.title}setState(t){const e={};Object.keys(t).filter((e=>void 0!==t[e])).forEach((n=>{e[n]=t[n]})),this.state=Object.assign(Object.assign({},this.state),e),this.render()}destroy(){this.node.remove()}changeState(t){this.node.dataset.state=t}_createNode(){const t=this.state.theme.borderColor||"#919eab";return tt(`<div class="js-custom-prompt-2">\n    <style>\n        @keyframes show-up {\n          from {\n            opacity: 0;\n            transform: scale(0.8);\n          }\n\n          to {\n            opacity: 1;\n            transform: scale(1);\n          }\n        }\n        .pushowl-optin {\n            all: initial;\n            display: block !important;\n            z-index: 2147483647 !important;\n            position: fixed !important;\n            width: 345px !important;\n            box-sizing: border-box !important;\n            background: rgb(255, 255, 255) !important;\n            border-radius: 12px !important;\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif !important;\n            align-items: center !important;\n            font-size: 14px !important;\n            box-shadow: 12px 12px 24px rgba(0, 0, 0, 0.16)!important;\n            border: 2px solid ${t};\n            ${this.getPositionCss()}\n            animation-duration: 0.3s;\n            animation-name: show-up;\n            transition: 0.3s ease;\n\n            ${en?"\n                margin: 10px !important;\n                width: calc(100% - 20px) !important;\n                ":""}\n        }\n        .pushowl-optin * {\n            width: initial !important;\n            font-family: inherit !important;\n            letter-spacing: initial !important;\n            box-sizing: border-box !important;\n            line-height: initial !important;\n            font-weight: normal !important;\n            -webkit-font-smoothing: initial !important;\n            text-shadow: initial !important;\n            border: initial !important;\n            background: initial !important;\n            padding: initial !important;\n            text-align: initial !important;\n            box-shadow: initial !important;\n            min-width: initial !important;\n        }\n        .pushowl-optin svg {\n          width: initial;\n          height: initial;\n          stroke: initial;\n          fill: initial;\n        }\n        .pushowl-optin__content {\n            padding: 16px !important;\n        }\n        .pushowl-optin__title {\n            text-transform: initial !important;\n            text-align: initial !important;\n            letter-spacing: 0.3px !important;\n            font-size: 16px !important;\n            margin-top: 0 !important;\n            margin-bottom: 8px !important;\n            color: #343946 !important;\n            font-weight: 500 !important;\n            padding: 0 !important;\n        }\n        .pushowl-optin__image {\n            border-radius: 50% !important;\n            flex-shrink: 0 !important;\n            margin-right: 16px !important;\n            padding: 8px !important;\n        }\n        .pushowl-optin__image img {\n          width: 40px !important;\n        }\n        .pushowl-optin:before,\n        .pushowl-optin:after {\n          content: '';\n          display: block !important;\n          position: absolute;\n          left: 20px;\n          top: -12px;\n          background: white;\n          width: 30px;\n          height: 30px;\n          border: 2px solid ${t};\n          transition: 0.3s ease;\n          border-radius: 8px;\n          clip-path: polygon(0 0, 87% 0, 0 87%);\n          transform: rotate(45deg) translateY(5px);\n          opacity: 0;\n        }\n       \n        [data-state="down"] .pushowl-optin {\n          transform: translateY(140px);\n        }\n        [data-state="down"] .pushowl-optin:before {\n          opacity: 1;\n          transform: rotate(45deg) translateY(0);\n        }\n        [data-state="fade-top"] .pushowl-optin {\n          opacity: 0;\n          transform: translateY(0);\n        }\n\n        [data-state="mobile-fade"] .pushowl-optin {\n          opacity: 0;\n          transform: translateY(-40vh)\n        }\n    </style>\n    <div class="pushowl-optin">\n        <div class="pushowl-optin__content">\n            <div style="display:flex;align-items:center">\n                <div class="pushowl-optin__image">\n                    ${this.state.logo?`<img src="${this.state.logo}" alt="" />`:'<svg width="40" height="42" fill="none" xmlns="http://www.w3.org/2000/svg"><ellipse cx="20" cy="2.53" rx="2" ry="2.024" fill="#E5843B"/><path d="M.265 34.41h39.47a.18.18 0 00.167-.247l-5.264-13.241a42.729 42.729 0 01-2.395-8.492l-.162-.936a12.261 12.261 0 00-24.162 0l-.162.936a42.723 42.723 0 01-2.395 8.492L.098 34.162a.18.18 0 00.167.247z" fill="#F8CE53"/><ellipse cx="20" cy="34.916" rx="20" ry="7.084" fill="#ECA248"/><mask id="a" maskUnits="userSpaceOnUse" x="0" y="27" width="40" height="15"><ellipse cx="20" cy="34.916" rx="20" ry="7.084" fill="#ECA248"/></mask><g mask="url(#a)"><ellipse cx="20" cy="28.084" rx="7" ry="7.084" fill="#E5843B"/></g></svg>'}\n                </div>\n                <div style="flex:1">\n                    <h2 class="js-pushowl-title pushowl-optin__title"></h2>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n        `)}}}),dn={},pn=[],hn=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,mn=Array.isArray;function bn(t,e){for(var n in e)t[n]=e[n];return t}function gn(t){var e=t.parentNode;e&&e.removeChild(t)}function fn(t,e,n){var i,o,s,r={};for(s in e)"key"==s?i=e[s]:"ref"==s?o=e[s]:r[s]=e[s];if(arguments.length>2&&(r.children=arguments.length>3?nn.call(arguments,2):n),"function"==typeof t&&null!=t.defaultProps)for(s in t.defaultProps)void 0===r[s]&&(r[s]=t.defaultProps[s]);return _n(t,r,i,o,null)}function _n(t,e,n,i,o){var s={type:t,props:e,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==o?++sn:o};return null==o&&null!=on.vnode&&on.vnode(s),s}function wn(t){return t.children}function vn(t,e){this.props=t,this.context=e}function Sn(t,e){if(null==e)return t.__?Sn(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e)return n.__e;return"function"==typeof t.type?Sn(t):null}function yn(t){var e,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return yn(t)}}function En(t){(!t.__d&&(t.__d=!0)&&rn.push(t)&&!On.__r++||an!==on.debounceRendering)&&((an=on.debounceRendering)||ln)(On)}function On(){var t,e,n,i,o,s,r,a,l;for(rn.sort(cn);t=rn.shift();)t.__d&&(e=rn.length,i=void 0,o=void 0,s=void 0,a=(r=(n=t).__v).__e,(l=n.__P)&&(i=[],o=[],(s=bn({},r)).__v=r.__v+1,An(l,r,s,n.__n,void 0!==l.ownerSVGElement,null!=r.__h?[a]:null,i,null==a?Sn(r):a,r.__h,o),Dn(i,r,o),r.__e!=a&&yn(r)),rn.length>e&&rn.sort(cn));On.__r=0}function Tn(t,e,n,i,o,s,r,a,l,c,u){var d,p,h,m,b,g,f,_,w,v=0,S=i&&i.__k||pn,y=S.length,E=y,O=e.length;for(n.__k=[],d=0;d<O;d++)null!=(m=n.__k[d]=null==(m=e[d])||"boolean"==typeof m||"function"==typeof m?null:"string"==typeof m||"number"==typeof m||"bigint"==typeof m?_n(null,m,null,null,m):mn(m)?_n(wn,{children:m},null,null,null):m.__b>0?_n(m.type,m.props,m.key,m.ref?m.ref:null,m.__v):m)?(m.__=n,m.__b=n.__b+1,-1===(_=Nn(m,S,f=d+v,E))?h=dn:(h=S[_]||dn,S[_]=void 0,E--),An(t,m,h,o,s,r,a,l,c,u),b=m.__e,(p=m.ref)&&h.ref!=p&&(h.ref&&Mn(h.ref,null,m),u.push(p,m.__c||b,m)),null!=b&&(null==g&&(g=b),(w=h===dn||null===h.__v)?-1==_&&v--:_!==f&&(_===f+1?v++:_>f?E>O-f?v+=_-f:v--:v=_<f&&_==f-1?_-f:0),f=d+v,"function"!=typeof m.type||_===f&&h.__k!==m.__k?"function"==typeof m.type||_===f&&!w?void 0!==m.__d?(l=m.__d,m.__d=void 0):l=b.nextSibling:l=xn(t,b,l):l=In(m,l,t),"function"==typeof n.type&&(n.__d=l))):(h=S[d])&&null==h.key&&h.__e&&(h.__e==l&&(l=Sn(h)),Un(h,h,!1),S[d]=null);for(n.__e=g,d=y;d--;)null!=S[d]&&("function"==typeof n.type&&null!=S[d].__e&&S[d].__e==n.__d&&(n.__d=S[d].__e.nextSibling),Un(S[d],S[d]))}function In(t,e,n){for(var i,o=t.__k,s=0;o&&s<o.length;s++)(i=o[s])&&(i.__=t,e="function"==typeof i.type?In(i,e,n):xn(n,i.__e,e));return e}function xn(t,e,n){return null==n||n.parentNode!==t?t.insertBefore(e,null):e==n&&null!=e.parentNode||t.insertBefore(e,n),e.nextSibling}function Nn(t,e,n,i){var o=t.key,s=t.type,r=n-1,a=n+1,l=e[n];if(null===l||l&&o==l.key&&s===l.type)return n;if(i>(null!=l?1:0))for(;r>=0||a<e.length;){if(r>=0){if((l=e[r])&&o==l.key&&s===l.type)return r;r--}if(a<e.length){if((l=e[a])&&o==l.key&&s===l.type)return a;a++}}return-1}function kn(t,e,n){"-"===e[0]?t.setProperty(e,null==n?"":n):t[e]=null==n?"":"number"!=typeof n||hn.test(e)?n:n+"px"}function Cn(t,e,n,i,o){var s;t:if("style"===e)if("string"==typeof n)t.style.cssText=n;else{if("string"==typeof i&&(t.style.cssText=i=""),i)for(e in i)n&&e in n||kn(t.style,e,"");if(n)for(e in n)i&&n[e]===i[e]||kn(t.style,e,n[e])}else if("o"===e[0]&&"n"===e[1])s=e!==(e=e.replace(/(PointerCapture)$|Capture$/,"$1")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+s]=n,n?i||t.addEventListener(e,s?Rn:Pn,s):t.removeEventListener(e,s?Rn:Pn,s);else if("dangerouslySetInnerHTML"!==e){if(o)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==e&&"height"!==e&&"href"!==e&&"list"!==e&&"form"!==e&&"tabIndex"!==e&&"download"!==e&&"rowSpan"!==e&&"colSpan"!==e&&e in t)try{t[e]=null==n?"":n;break t}catch(t){}"function"==typeof n||(null==n||!1===n&&"-"!==e[4]?t.removeAttribute(e):t.setAttribute(e,n))}}function Pn(t){return this.l[t.type+!1](on.event?on.event(t):t)}function Rn(t){return this.l[t.type+!0](on.event?on.event(t):t)}function An(t,e,n,i,o,s,r,a,l,c){var u,d,p,h,m,b,g,f,_,w,v,S,y,E,O,T=e.type;if(void 0!==e.constructor)return null;null!=n.__h&&(l=n.__h,a=e.__e=n.__e,e.__h=null,s=[a]),(u=on.__b)&&u(e);t:if("function"==typeof T)try{if(f=e.props,_=(u=T.contextType)&&i[u.__c],w=u?_?_.props.value:u.__:i,n.__c?g=(d=e.__c=n.__c).__=d.__E:("prototype"in T&&T.prototype.render?e.__c=d=new T(f,w):(e.__c=d=new vn(f,w),d.constructor=T,d.render=Bn),_&&_.sub(d),d.props=f,d.state||(d.state={}),d.context=w,d.__n=i,p=d.__d=!0,d.__h=[],d._sb=[]),null==d.__s&&(d.__s=d.state),null!=T.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=bn({},d.__s)),bn(d.__s,T.getDerivedStateFromProps(f,d.__s))),h=d.props,m=d.state,d.__v=e,p)null==T.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(null==T.getDerivedStateFromProps&&f!==h&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(f,w),!d.__e&&(null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(f,d.__s,w)||e.__v===n.__v)){for(e.__v!==n.__v&&(d.props=f,d.state=d.__s,d.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.forEach((function(t){t&&(t.__=e)})),v=0;v<d._sb.length;v++)d.__h.push(d._sb[v]);d._sb=[],d.__h.length&&r.push(d);break t}null!=d.componentWillUpdate&&d.componentWillUpdate(f,d.__s,w),null!=d.componentDidUpdate&&d.__h.push((function(){d.componentDidUpdate(h,m,b)}))}if(d.context=w,d.props=f,d.__P=t,d.__e=!1,S=on.__r,y=0,"prototype"in T&&T.prototype.render){for(d.state=d.__s,d.__d=!1,S&&S(e),u=d.render(d.props,d.state,d.context),E=0;E<d._sb.length;E++)d.__h.push(d._sb[E]);d._sb=[]}else do{d.__d=!1,S&&S(e),u=d.render(d.props,d.state,d.context),d.state=d.__s}while(d.__d&&++y<25);d.state=d.__s,null!=d.getChildContext&&(i=bn(bn({},i),d.getChildContext())),p||null==d.getSnapshotBeforeUpdate||(b=d.getSnapshotBeforeUpdate(h,m)),Tn(t,mn(O=null!=u&&u.type===wn&&null==u.key?u.props.children:u)?O:[O],e,n,i,o,s,r,a,l,c),d.base=e.__e,e.__h=null,d.__h.length&&r.push(d),g&&(d.__E=d.__=null)}catch(t){e.__v=null,(l||null!=s)&&(e.__e=a,e.__h=!!l,s[s.indexOf(a)]=null),on.__e(t,e,n)}else null==s&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=Ln(n.__e,e,n,i,o,s,r,l,c);(u=on.diffed)&&u(e)}function Dn(t,e,n){for(var i=0;i<n.length;i++)Mn(n[i],n[++i],n[++i]);on.__c&&on.__c(e,t),t.some((function(e){try{t=e.__h,e.__h=[],t.some((function(t){t.call(e)}))}catch(t){on.__e(t,e.__v)}}))}function Ln(t,e,n,i,o,s,r,a,l){var c,u,d,p=n.props,h=e.props,m=e.type,b=0;if("svg"===m&&(o=!0),null!=s)for(;b<s.length;b++)if((c=s[b])&&"setAttribute"in c==!!m&&(m?c.localName===m:3===c.nodeType)){t=c,s[b]=null;break}if(null==t){if(null===m)return document.createTextNode(h);t=o?document.createElementNS("http://www.w3.org/2000/svg",m):document.createElement(m,h.is&&h),s=null,a=!1}if(null===m)p===h||a&&t.data===h||(t.data=h);else{if(s=s&&nn.call(t.childNodes),u=(p=n.props||dn).dangerouslySetInnerHTML,d=h.dangerouslySetInnerHTML,!a){if(null!=s)for(p={},b=0;b<t.attributes.length;b++)p[t.attributes[b].name]=t.attributes[b].value;(d||u)&&(d&&(u&&d.__html==u.__html||d.__html===t.innerHTML)||(t.innerHTML=d&&d.__html||""))}if(function(t,e,n,i,o){var s;for(s in n)"children"===s||"key"===s||s in e||Cn(t,s,null,n[s],i);for(s in e)o&&"function"!=typeof e[s]||"children"===s||"key"===s||"value"===s||"checked"===s||n[s]===e[s]||Cn(t,s,e[s],n[s],i)}(t,h,p,o,a),d)e.__k=[];else if(Tn(t,mn(b=e.props.children)?b:[b],e,n,i,o&&"foreignObject"!==m,s,r,s?s[0]:n.__k&&Sn(n,0),a,l),null!=s)for(b=s.length;b--;)null!=s[b]&&gn(s[b]);a||("value"in h&&void 0!==(b=h.value)&&(b!==t.value||"progress"===m&&!b||"option"===m&&b!==p.value)&&Cn(t,"value",b,p.value,!1),"checked"in h&&void 0!==(b=h.checked)&&b!==t.checked&&Cn(t,"checked",b,p.checked,!1))}return t}function Mn(t,e,n){try{"function"==typeof t?t(e):t.current=e}catch(t){on.__e(t,n)}}function Un(t,e,n){var i,o;if(on.unmount&&on.unmount(t),(i=t.ref)&&(i.current&&i.current!==t.__e||Mn(i,null,e)),null!=(i=t.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(t){on.__e(t,e)}i.base=i.__P=null,t.__c=void 0}if(i=t.__k)for(o=0;o<i.length;o++)i[o]&&Un(i[o],e,n||"function"!=typeof t.type);n||null==t.__e||gn(t.__e),t.__=t.__e=t.__d=void 0}function Bn(t,e,n){return this.constructor(t,n)}nn=pn.slice,on={__e:function(t,e,n,i){for(var o,s,r;e=e.__;)if((o=e.__c)&&!o.__)try{if((s=o.constructor)&&null!=s.getDerivedStateFromError&&(o.setState(s.getDerivedStateFromError(t)),r=o.__d),null!=o.componentDidCatch&&(o.componentDidCatch(t,i||{}),r=o.__d),r)return o.__E=o}catch(e){t=e}throw t}},sn=0,vn.prototype.setState=function(t,e){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=bn({},this.state),"function"==typeof t&&(t=t(bn({},n),this.props)),t&&bn(n,t),null!=t&&this.__v&&(e&&this._sb.push(e),En(this))},vn.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),En(this))},vn.prototype.render=wn,rn=[],ln="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,cn=function(t,e){return t.__v.__b-e.__v.__b},On.__r=0;var jn,Fn=0;function Hn(t,e,n,i,o,s){var r,a,l={};for(a in e)"ref"==a?r=e[a]:l[a]=e[a];var c={type:t,props:l,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--Fn,__source:o,__self:s};if("function"==typeof t&&(r=t.defaultProps))for(a in r)void 0===l[a]&&(l[a]=r[a]);return on.vnode&&on.vnode(c),c}!function(t){t.CONSENT_EMAIL_COPY="consent-email-copy",t.CONSENT_SMS_COPY="consent-sms-copy"}(jn||(jn={})),jn.CONSENT_EMAIL_COPY,jn.CONSENT_SMS_COPY;const Gn={email:"Enter your Email address",phone:"+19123456789"},$n=({size:t="15",isTeaser:e=!1,onDismiss:n})=>Hn("button",Object.assign({className:"pushowl-optin-dismiss-button",onClick:n,type:"button",style:Object.assign(Object.assign({},{position:"absolute",border:"none",cursor:"pointer",outline:"none",zIndex:3,color:"black",display:"grid",placeItems:"center",background:"none"}),e?{right:"8px",top:"50%",transform:"translateY(-50%) scale(1.5)"}:{right:"8px",top:"8px",backgroundColor:"#ffffffaf",padding:"3px",borderRadius:"50%",filter:"invert(0.1)"})},{children:Hn("svg",Object.assign({width:t,height:t,viewBox:"0 0 24 24"},{children:[Hn("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),Hn("path",{fill:"none",d:"M0 0h24v24H0z"})]}))})),Kn=(t,e=14)=>{const n={textOverflow:"ellipsis",overflow:"hidden",fontSize:`${e}px`,lineHeight:1.2*e+"px",paddingBlockEnd:"0px"};if(!t)return n;const i={"4xl":"10px","3xl":"10px","2xl":"8px",xl:"6px",lg:"2px",md:"0px",sm:"0px",xs:"0px",0:"0px"}[t]||"0px",o={xs:10,sm:12,md:16,lg:20,xl:26,"2xl":30,"3xl":36,"4xl":42,0:0}[t]||e,s=o>16?"bold":"normal";return Object.assign(Object.assign({},n),{fontSize:`${o}px`,lineHeight:1.2*o+"px",fontWeight:s,paddingBlockEnd:i})},Vn=(t,e)=>{if(t)switch(e){case"step_1":case"step_2":return{minWidth:"90%",minHeight:"450px"};case"teaser":return{minWidth:"90%",minHeight:"64px"};default:return{minWidth:"100%",minHeight:"450px"}}return"teaser"===e?{minWidth:"360px",minHeight:"64px"}:{maxWidth:"530px",minWidth:"530px",minHeight:"500px"}},Yn=t=>{const e="12px",n="50%";switch(t){case Je.CENTERED:return{left:n,top:n,transform:"translate(-50%, -50%)"};case Je.BOTTOM_LEFT:return{left:e,bottom:e};case Je.BOTTOM_RIGHT:return{right:e,bottom:e};case Je.TOP_RIGHT:return{right:e,top:e};case Je.TOP_LEFT:return{left:e,top:e};case Je.TOP_CENTERED:return{top:e,left:n,transform:"translateX(-50%)"};case Je.BOTTOM_CENTERED:return{bottom:e,left:n,transform:"translateX(-50%)"};default:return{left:n,top:n,transform:"translate(-50%, -50%)"}}},qn=t=>t.startsWith("custom_field"),zn=t=>{const e={},n=t=>{if(qn(t.id)&&(e[t.id]=t.attr),t.children){if(!Array.isArray(t.children))return e;t.children.forEach((t=>n(t)))}};return n(t),e},Wn=t=>{switch(t){case"DD/MM/YYYY":return"^(0[1-9]|[12][0-9]|3[01])/(0[1-9]|1[0-2])/([0-9]{4})$";case"MM/DD/YYYY":return"^(0[1-9]|1[0-2])/(0[1-9]|[12][0-9]|3[01])/([0-9]{4})$";case"YYYY/MM/DD":return"^([0-9]{4})/(0[1-9]|1[0-2])/(0[1-9]|[12][0-9]|3[01])$"}},Zn=({node:t,children:e,isSmallScreen:n})=>{const i=((t,e)=>{const{align:n,dir:i,bgUrl:o,pad:s,bgColor:r,css:a,fill:l}=t.attr||{},c=o&&e,u=((t,e)=>{if(!t||0===(null==t?void 0:t.length))return{};const n={},i="string"==typeof t?[t]:t;return"LR"===e?(i.forEach((t=>{switch(t){case"center":n.alignItems="center";break;case"left":n.justifyContent="flex-start";break;case"right":n.justifyContent="flex-end";break;case"bottom":n.alignItems="flex-end";break;case"top":n.alignItems="flex-start";break;default:return n}return{}})),n):(i.forEach((t=>{switch(t){case"center":n.justifyContent="center";break;case"left":n.alignItems="flex-start";break;case"right":n.alignItems="flex-end";break;case"bottom":n.justifyContent="flex-end";break;case"top":n.justifyContent="flex-start";break;default:return n}return{}})),n)})(n,i),d=((t,e)=>t?{flexDirection:"column"}:{flexDirection:"LR"===e?"row":"column"})(e,i),p=c?{}:(h=o)?{backgroundImage:`url("${h}")`,backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center center"}:{};var h;const m=(b=s)?{padding:`${null!==(g={xs:2,sm:4,md:6,lg:8,xl:10,"2xl":12,"3xl":14,"4xl":16,0:0}[b])&&void 0!==g?g:6}px`}:{padding:"6px"};var b,g;const f=(t=>"string"==typeof t?t:"boolean"==typeof t?t?"50%":"":"50%")(l);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({position:"relative",background:r||"#fff",display:c?"none":"flex",flex:f,flexShrink:o?0:1,minWidth:0},d),m),u),p),a||{})})(t,n);return Hn("div",Object.assign({style:Object.assign({},i)},{children:e}))},Jn=({node:t})=>{var e,n;return Hn("button",Object.assign({type:"submit"===t.id?"submit":"button",className:"pushowl-optin-button",name:t.id,style:{background:null===(e=t.attr)||void 0===e?void 0:e.bgColor,color:null===(n=t.attr)||void 0===n?void 0:n.color}},{children:t.children}))},Xn=({node:t})=>{const{color:e,css:n,size:i}=t.attr||{},o=Kn(i);return Hn("div",Object.assign({style:{display:"flex",alignItems:"flex-start",padding:"6px 0"}},{children:[Hn("input",{required:!0,type:"checkbox",id:t.id,name:t.id,style:{marginLeft:"0",marginRight:"0"}}),Hn("label",Object.assign({htmlFor:t.id,style:Object.assign(Object.assign({color:e||"#000",paddingLeft:"5px"},o),n||{})},{children:t.children}))]}))},Qn=({node:t})=>{var e,n,i,o;const s=(null===(e=t.attr)||void 0===e?void 0:e.dateFormat)||"MM/DD/YYYY";return Hn("div",Object.assign({style:{display:"flex",flexDirection:"column",width:"100%",padding:"5px 0 0 0",gap:"5px",minHeight:"70px"}},{children:[Hn("label",Object.assign({htmlFor:t.id,style:{color:null===(n=t.attr)||void 0===n?void 0:n.color,fontSize:"14px",textOverflow:"ellipsis",overflow:"hidden",display:"inline-block",width:"100%"}},{children:t.children})),Hn("input",{onInput:t=>{try{new RegExp(Wn(s)).test(t.target.value)&&t.target.setCustomValidity("")}catch(t){}const{cursorPosition:e,formattedValue:n}=((t,e,n)=>{const i=[31,28,31,30,31,30,31,31,30,31,30,31];let o="",s=e.replace(/\D/g,"");const r=(t,e,n,i=!1)=>(t.length===(i?4:2)||!i&&1===t.length&&parseInt(t)>Math.floor(n/10)?(t=Math.min(parseInt(t),n).toString().padStart(i?4:2,"0"),o+=t+(e<2?"/":"")):t.length>0&&(o+=t),t.length),a=(t,e)=>2===t&&(t=>t%4==0&&t%100!=0||t%400==0)(e)?29:i[t-1];let l=[0,0,0];if("MM/DD/YYYY"===t){let t=s.slice(0,2),e=s.slice(2,4),n=s.slice(4,8);l[0]=r(t,0,12),2===t.length?l[1]=r(e,1,a(parseInt(t),parseInt(n)||(new Date).getFullYear())):(o+=e,l[1]=e.length),o+=n,l[2]=n.length}else if("DD/MM/YYYY"===t){let t=s.slice(0,2),e=s.slice(2,4),n=s.slice(4,8);if(l[0]=r(t,0,31),l[1]=r(e,1,12),2===t.length&&2===e.length){let i=a(parseInt(e),parseInt(n)||(new Date).getFullYear());parseInt(t)>i&&(t=i.toString(),o=t+"/"+o.split("/")[1]+"/",l[0]=2)}o+=n,l[2]=n.length}else if("YYYY/MM/DD"===t){let t=s.slice(0,4),e=s.slice(4,6),n=s.slice(6,8);if(l[0]=r(t,0,9999,!0),l[1]=r(e,1,12),4===t.length&&2===e.length){let i=a(parseInt(e),parseInt(t));l[2]=r(n,2,i)}else o+=n,l[2]=n.length}let c=n;for(let t=0;t<3;t++){if(n>s.length-l[2]-l[1]){c=o.length;break}if(n>s.length-l[2]-l[1]-l[0]){c=o.length-l[2];break}if(n>0){c=o.length-l[2]-l[1];break}}return{formattedValue:o,cursorPosition:c}})(s,t.target.value,t.target.selectionStart);t.target.value=n,t.target.setSelectionRange(e,e)},id:t.id,onKeyDown:t=>{if("Backspace"===t.key){const e=t.target.value,n=t.target.selectionStart;n>0&&"/"===e[n-1]&&(t.target.value=e.slice(0,n-1)+e.slice(n),t.target.setSelectionRange(n-1,n-1))}},name:t.id,type:"text",required:null===(i=t.attr)||void 0===i?void 0:i.required,title:`Please enter a date in the format ${s}`,onInvalid:t=>t.target.setCustomValidity(`Please enter a date in the format ${s}`),placeholder:t.attr.placeholder||s,pattern:Wn(s),style:Object.assign({height:"40px",border:"1px solid grey",borderRadius:"4px",padding:"0 8px"},(null===(o=t.attr)||void 0===o?void 0:o.css)||{})}),Hn("span",{id:`${t.id}-error`,style:{display:"none",margin:0,color:"#ee2b2b",fontSize:"14px"}})]}))},ti=({node:t})=>{var e,n,i,o;const s=(t=>{switch(t){case"email":return"email";case"phone":return"tel";default:return}})(t.id)||(null===(e=null==t?void 0:t.attr)||void 0===e?void 0:e.fieldType)||"text";return Hn("div",Object.assign({style:Object.assign({display:"flex",flexDirection:"column",width:"100%",padding:"5px 0 0 0",gap:"5px"},qn(t.id)?{minHeight:"70px"}:{height:"80px"})},{children:[Hn("label",Object.assign({htmlFor:t.id,style:{color:null===(n=t.attr)||void 0===n?void 0:n.color,fontSize:"14px",textOverflow:"ellipsis",overflow:"hidden",display:"inline-block",width:"100%"}},{children:t.children})),Hn("input",{onInput:t=>{"tel"!==s?"number"!==s||(t.target.value=t.target.value.replace(/[^0-9.]/g,"")):t.target.value=t.target.value.replace(/[^0-9+]/g,"")},required:null===(i=t.attr)||void 0===i?void 0:i.required,id:t.id,name:t.id,type:s,placeholder:t.attr.placeholder||(Gn[t.id]||t.id).toLowerCase(),style:Object.assign({height:"40px",border:"1px solid grey",borderRadius:"4px",padding:"0 8px"},(null===(o=t.attr)||void 0===o?void 0:o.css)||{})}),Hn("span",{id:`${t.id}-error`,style:{display:"none",margin:0,color:"#ee2b2b",fontSize:"14px"}})]}))},ei=({node:t,overrideNode:e})=>{const{color:n,css:i,size:o}=t.attr||{},s=Kn(o),r={whiteSpace:(a="flyout"===t.id)?"nowrap":"normal",width:a?"calc(100% - 25px)":"unset"};var a;const l=Object.assign(Object.assign(Object.assign({margin:0,color:n||"#000"},r),s),i||{});return e&&"string"!=typeof e?e({defaultStyles:l,node:t}):Hn("p",Object.assign({style:l},{children:e||t.children}))},ni=(t,e,n)=>{if(!t)return null;switch(t.type){case Ze.BOX:return Hn(Zn,Object.assign({node:t,isSmallScreen:e},{children:(t.children||[]).map((t=>ni(t,e,n)))}));case Ze.TEXT:return Hn(ei,{node:t,overrideNode:null==n?void 0:n[t.id]});case Ze.CHECKBOX:return Hn(Xn,{node:t});case Ze.INPUT:return Hn(ti,{node:t});case Ze.DATE:return Hn(Qn,{node:t});case Ze.BUTTON:return Hn(Jn,{node:t});default:return null}},ii=({nodeTree:t,isSmallScreen:e,overrideNodes:n})=>ni(t,e,n),oi=({handleSubmit:t,form:e,handleDismiss:n})=>{const i=et(),o=Vn(i,e.step_type),s=Yn(i?e.mobile_position:e.desktop_position),r=Ee(e.config);return Hn("form",Object.assign({className:"pushowl-optin-container",style:Object.assign(Object.assign({},o),s),onSubmit:e=>{r||t(e)},onClick:i=>r&&(({event:t,attributes:e,handleDismiss:n,DOMTree:i,handleSubmit:o})=>{var s;if(!(null===(s=Object.keys(e||{}))||void 0===s?void 0:s.length))return;const r=t.target,a=se(r,{root:i});Object.entries(e).forEach((([t,e])=>{switch(t){case"dismiss":Object.keys(e).forEach((t=>{t===a&&n()}));break;case"submit":Object.keys(e).forEach((t=>{if(t===a){const t=r.closest("form");t&&t.addEventListener("submit",(function(e){e.preventDefault();const n={};t.querySelectorAll("input, select, textarea").forEach((t=>{const e=t.getAttribute("name");if(e)n[e]=t.value;else{const e=t.getAttribute("id");n[e]=t.value}})),o(null,n)}))}}))}}))})({event:i,attributes:e.config.attr.button,DOMTree:ye(e.config.children),handleDismiss:()=>n({formId:e.id}),handleSubmit:(e,n)=>{t(e,n)}}),onInput:t=>r&&(({event:t,attributes:e,DOMTree:n})=>{var i;if(!(null===(i=Object.keys(e||{}))||void 0===i?void 0:i.length))return;const o=t.target;if("submit"===o.getAttribute("type"))return;const s=se(o,{root:n});Object.entries(e).forEach((([t,e])=>{"phone"===t?Object.keys(e).forEach((t=>{t===s&&(o.value=o.value.replace(/[^0-9+]/g,""))})):Object.keys(e).forEach((t=>{if(t===s){const e=n.querySelector(t);"number"===e.type&&(e.value=e.value.replace(/[^0-9]/g,""))}}))}))})({event:t,attributes:e.config.attr.input,DOMTree:ye(e.config.children)})},{children:r?Hn("div",{dangerouslySetInnerHTML:{__html:Oe(e.config)}}):Hn(wn,{children:[Hn($n,{isTeaser:!1,onDismiss:n}),Hn(ii,{nodeTree:e.config,isSmallScreen:i,overrideNodes:{[jn.CONSENT_EMAIL_COPY]:({defaultStyles:t,node:e})=>Hn("p",Object.assign({style:t},{children:e.children||"By checking this box, I consent to receive marketing emails at the\n              email address provided. Consent is not a condition to purchase."})),[jn.CONSENT_SMS_COPY]:({defaultStyles:t,node:e})=>Hn("p",Object.assign({style:t},{children:e.children||"By checking this box, I consent to receive marketing text messages\n              through an automatic telephone dialing system at the number\n              provided. Consent is not a condition to purchase. Text STOP to\n              unsubscribe or HELP for help. Msg and data rates may apply."}))}})]})}))},si=(t=!1)=>`\n  .pushowl-optin-container {\n    color: initial;\n    letter-spacing: initial;\n    font-weight: initial;\n    line-height: initial;\n    z-index: 2147483647 !important;\n    position: fixed !important;\n    box-sizing: border-box !important;\n    margin: initial !important;\n    display: flex !important;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif !important;\n    ${t?"":"box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.1);"}\n  }\n  \n  .pushowl-optin-button {\n    cursor: pointer;\n    border: none;\n    border-radius: 6px;\n    height: 42px;\n    font-family: inherit;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    margin: 10px 0px;\n  }`,ri=({handleOpenTeaserState:t,handleDismiss:e,teaserStateConfig:n})=>{const i=et(),o=Vn(i,"teaser"),s=Yn(i?n.mobile_position:n.desktop_position);return Hn("div",Object.assign({class:"pushowl-optin-container",style:Object.assign(Object.assign({cursor:"pointer"},o),s),onClick:t},{children:[Hn($n,{isTeaser:!0,onDismiss:()=>e({formId:n.id})}),Hn(ii,{nodeTree:n.config,isSmallScreen:i})]}))},ai=({form:t,teaserStateConfig:e,isTeaserStateActive:n,handleDismiss:o,handleOpenTeaserState:s,handleSubmit:r,nodeId:a,flowId:l,shadowRef:c})=>Hn(wn,{children:[Hn("style",{children:si(Ee(t.config))}),Hn("style",{children:window.pushowlOptinStyles}),n?Hn(ri,{handleDismiss:o,teaserStateConfig:e,handleOpenTeaserState:s}):Hn(oi,{handleDismiss:o,form:t,handleSubmit:(e,n=null)=>i(void 0,void 0,void 0,(function*(){let o;if(e){e.preventDefault();const t=new FormData(e.target);o=Object.fromEntries(t.entries())}else o=n;yield(e=>i(void 0,void 0,void 0,(function*(){try{const n=new Nt;let i={};"email"in e&&(i.email=e.email),"phone"in e&&(i.phone=e.phone),Ee(t.config)&&(i=Object.assign(Object.assign({},i),e));const{result:o}=yield n.subscribeThroughPopup({subscriptionData:i,flowId:l,nodeId:a});x.subscriberToken=o.token,x.consent=o.consent,r({stepType:t.step_type,formId:t.id,isCustomOptin:Ee(t.config)});const s=zn(t.config),c=Se(s,e);if(e.email){x.email=e.email;const n=zn(t.config),i=Se(n,e);window.sendinblue&&window.sendinblue.identify(e.email,Object.assign(Object.assign({},i),{subscribe_url:window.location.href}))}e.phone&&window.sendinblue&&(yield n.identifyBrevoContactThroughPhoneNumber(e.phone,Object.assign(Object.assign({},c),{subscribe_url:window.location.href})))}catch(t){if("phone"in e){const t=c.querySelector("#phone-error");t&&(t.innerHTML="Please enter a valid phone number",t.style.display="block")}if("email"in e){const t=c.querySelector("#email-error");t&&(t.innerHTML="Please enter a valid email",t.style.display="block")}mt("Error encountered while submitting new optin form: ",t.message)}})))(o)}))})]});var li=Object.freeze({__proto__:null,OptinForm:class{constructor(t,e,n,i,o){this.handleFormSorting=t=>{const e=[...t].sort(((t,e)=>"teaser"===t.step_type&&"teaser"!==e.step_type?1:"teaser"!==t.step_type&&"teaser"===e.step_type?-1:t.step_type.localeCompare(e.step_type)));return e},t.forms=this.handleFormSorting(t.forms),this.container=null,this.rootElement=document.body,this.config=t,this.step=0,this.isTeaserStateActive=!1,this.teaserStateConfig=t.forms.find((t=>"teaser"===t.step_type)),this.showNextForm=e,this.flowId=n,this.trackForm=i,this.openShadowDOM=o,this.init()}_createShadowContainer(){const t=document.createElement("div");return t.setAttribute("id","pushowl-shadow-host"),t.style.display="block",this.container=t,t}init(){const t=this._createShadowContainer();window.Cypress||this.openShadowDOM?this.shadowRef=t.attachShadow({mode:"open"}):this.shadowRef=t.attachShadow({mode:"closed"}),this.rootElement.appendChild(t),this.trackForm({event:"optin_viewed",stepType:this.config.forms[this.step].step_type,formId:this.config.forms[this.step].id})}handleSubmit({stepType:t,formId:e,isCustomOptin:n=!1}){this.trackForm({stepType:t,formId:e,event:"optin_submitted"}),n?(this.destroy(),this.showNextForm()):(this.step++,this.render())}shouldShowTeaser(){return!!this.config.forms.find((t=>"teaser"===t.step_type&&"active"===t.status))}handleDismiss({formId:t}){1===this.step&&x.consent.includes(this.config.channels[0])&&(this.destroy(),this.showNextForm()),this.isTeaserStateActive?(this.trackForm({formId:t,event:"optin_dismissed",stepType:"teaser"}),this.destroy(),this.showNextForm(this.config.id),this.render()):this.shouldShowTeaser()?(this.isTeaserStateActive=!0,this.render()):(this.trackForm({formId:t,event:"optin_dismissed",stepType:this.config.forms[this.step].step_type}),this.destroy(),this.showNextForm(this.config.id),this.render())}handleOpenTeaserState(){this.isTeaserStateActive=!1,this.render()}destroy(){this.container.remove()}render(){const t=[...this.config.forms];!function(t,e,n){var i,o,s,r;on.__&&on.__(t,e),o=(i="function"==typeof n)?null:n&&n.__k||e.__k,s=[],r=[],An(e,t=(!i&&n||e).__k=fn(wn,null,[t]),o||dn,dn,void 0!==e.ownerSVGElement,!i&&n?[n]:o?null:e.firstChild?nn.call(e.childNodes):null,s,!i&&n?n:o?o.__e:e.firstChild,i,r),Dn(s,t,r)}(fn(ai,{form:t[this.step],handleDismiss:this.handleDismiss.bind(this),handleSubmit:this.handleSubmit.bind(this),handleOpenTeaserState:this.handleOpenTeaserState.bind(this),teaserStateConfig:this.teaserStateConfig,isTeaserStateActive:this.isTeaserStateActive,nodeId:this.config.id,flowId:this.flowId,shadowRef:this.shadowRef}),this.shadowRef)}}});const ci='<svg class="pushowl-ios-share-icon" width="12" height="16" viewBox="0 0 12 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.24902 10.1436C6.52197 10.1436 6.75684 9.91504 6.75684 9.64844V3.12939L6.71875 2.17725L7.14404 2.62793L8.10889 3.65625C8.19775 3.75781 8.32471 3.80859 8.45166 3.80859C8.71191 3.80859 8.91504 3.61816 8.91504 3.35791C8.91504 3.22461 8.85791 3.12305 8.7627 3.02783L6.61719 0.958496C6.49023 0.831543 6.38232 0.787109 6.24902 0.787109C6.12207 0.787109 6.01416 0.831543 5.88086 0.958496L3.73535 3.02783C3.64014 3.12305 3.58936 3.22461 3.58936 3.35791C3.58936 3.61816 3.77979 3.80859 4.04639 3.80859C4.16699 3.80859 4.30664 3.75781 4.39551 3.65625L5.354 2.62793L5.78564 2.17725L5.74756 3.12939V9.64844C5.74756 9.91504 5.97607 10.1436 6.24902 10.1436ZM2.61182 15.1138H9.89258C11.2192 15.1138 11.8857 14.4536 11.8857 13.146V6.81104C11.8857 5.50342 11.2192 4.84326 9.89258 4.84326H8.12158V5.86523H9.87354C10.502 5.86523 10.8638 6.20801 10.8638 6.86816V13.0889C10.8638 13.749 10.502 14.0918 9.87354 14.0918H2.62451C1.98975 14.0918 1.64062 13.749 1.64062 13.0889V6.86816C1.64062 6.20801 1.98975 5.86523 2.62451 5.86523H4.38281V4.84326H2.61182C1.28516 4.84326 0.618652 5.50342 0.618652 6.81104V13.146C0.618652 14.4536 1.28516 15.1138 2.61182 15.1138Z" fill="#3478F6"/></svg>',ui=`Add our website to your home screen and get notified of exclusive offers, new arrivals and more! It's easy: just tap the ${ci} icon and select 'Add to Home Screen'`;var di=Object.freeze({__proto__:null,IOSInstallWidget:class{constructor({title:t="",description:e=""}){this.node=null,this.container=document.body,this.title=t||"Never Miss Out with Web Push",this.description=e?e.replace("{{share icon}}",ci):ui}init(){this.node=this._createNode(),this.container.appendChild(this.node),this.closeButton=this.node.querySelector(".pushowl-ios-install-close-btn"),this.closeButton&&this.closeButton.addEventListener("click",(()=>{this.destroy(),x.installPromptDismissed=!0}))}_createNode(){return tt(`<div>\n    <style>\n        @keyframes show-up {\n        from {\n          opacity: 0;\n          transform: translateY(20px);\n        }\n  \n        to {\n          opacity: 1;\n          transform: translateY(0);\n        }\n      }\n  \n      .pushowl-ios-install-prompt {\n        all: initial;\n        display: block !important;\n        z-index: 2147483647 !important;\n        width: 345px !important;\n        margin: 12px auto !important;\n        position: fixed !important;\n        box-sizing: border-box !important;\n        background: #101828 !important;\n        border-radius: 8px !important;\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif !important;\n        align-items: center !important;\n        font-size: 14px !important;\n        box-shadow: 0px 12px 13px rgba(0, 0, 0, 0.21)!important;\n        animation-duration: 0.6s;\n        animation-name: show-up;\n        bottom: 0 !important;\n        right: auto !important;\n        padding: 12px !important;\n        left: 0 !important;\n        right: 0 !important;\n        max-width: 94vw !important;\n      }\n  \n      .pushowl-ios-install-prompt * {\n        font-family: inherit !important;\n      }\n  \n      @media screen and (min-width : 480px) {\n        .pushowl-ios-install-prompt {\n          left: calc(50vw - 172.5px) !important;\n          right: auto !important;\n        }\n      }\n  \n      .pushowl-ios-install-prompt h2,\n      .pushowl-ios-install-prompt p {\n        color: rgb(255, 255, 255) !important;\n        font-size: 12px !important;\n        text-transform: none !important;\n        margin: 0 !important;\n      }\n  \n      .pushowl-ios-install-prompt h2 {\n        font-weight: bold !important;\n      }\n  \n      .pushowl-ios-share-icon {\n        vertical-align: bottom;\n        margin: 0 4px;\n        display: inline !important;\n      }\n  \n      .pushowl-ios-install-prompt-header {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        margin-bottom: 4px;\n      }\n  \n      .pushowl-ios-install-close-btn {\n        background: #101828;\n        border: none;\n        position: absolute;\n        top: 4px;\n        right: 10px;\n        width: auto !important;\n        padding: 0 !important;\n        min-width: auto !important;\n        height: auto !important;\n        line-height: 2 !important;\n        box-shadow: none !important;\n        font-size: 12px !important;\n      }\n  \n      .pushowl-ios-install-close-btn g {\n        fill: currentColor;\n        color: #fff;\n      }\n    </style>\n    <dialog class="pushowl-ios-install-prompt" open>\n      <div class="pushowl-ios-install-prompt-header">\n        <h2>${this.title}</h2>\n        <button class="pushowl-ios-install-close-btn">\n          <svg\n            width="10px"\n            height="10px"\n            viewBox="0 0 12 12"\n            version="1.1"\n            xmlns="http://www.w3.org/2000/svg"\n            xmlns:xlink="http://www.w3.org/1999/xlink"\n          >\n            <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g transform="translate(-5.000000, -5.000000)">\n                <g>\n                  <polygon\n                    points="17 6.20857143 15.7914286 5 11 9.79142857 6.20857143 5 5 6.20857143 9.79142857 11 5 15.7914286 6.20857143 17 11 12.2085714 15.7914286 17 17 15.7914286 12.2085714 11"\n                  ></polygon>\n                </g>\n              </g>\n            </g>\n          </svg>\n        </button>\n      </div>\n  \n      <p>\n        ${this.description}\n      </p>\n    </dialog>\n  </div>`)}destroy(){this.node.remove()}}});class pi{constructor(t){let e=document.querySelector("body");this.config=t,this.container=e,this.node=null,this.state={title:null,buttonText:null,buttonListener:null},this.maximize=!0,this.rendered=!1}toggleFocusableElement(t,e){t.setAttribute("aria-hidden",!e),t.setAttribute("tabindex",e?0:-1)}init(){this.node=this._createNode(),this.container.appendChild(this.node),function(){const t=document.createElement("div");return document.body.appendChild(t),"rtl"===window.getComputedStyle(t).direction}()&&this.node.setAttribute("dir","rtl"),this.toast=this.node.querySelector(".pushowl-simple-toast"),this.toastContent=this.node.querySelector(".pushowl-simple-toast__content"),this.title=this.node.querySelector(".pushowl-simple-toast__title"),this.yesButton=this.node.querySelector(".pushowl-simple-toast__yes-button");let t=this.node.querySelectorAll(".action-button");this.bellButton=this.node.querySelector(".js-pushowl-bell-button"),this.closeButton=this.node.querySelector(".js-pushowl-close-button"),this.contentWrap=this.node.querySelector(".js-pushowl-widget-content"),this.subscribeButton=this.node.querySelector(".js-subscribe-button"),Array.from(t).forEach((t=>{t.addEventListener(l.CLICK,(()=>{this._toggleState()}))}))}render(){this.rendered||(this.init(),this.rendered=!0),this.title.textContent=this.state.title,this.state.buttonText?(this.yesButton.textContent=this.state.buttonText,this.yesButton.style.display="block",this.yesButton.addEventListener("click",(()=>{this.state.buttonListener&&this.state.buttonListener()}))):this.yesButton.style.display="none"}setState(t){this.state=t,this.render()}remove(){var t;this.rendered=!1,null===(t=document.querySelector(".pushowl-widget-node"))||void 0===t||t.remove()}}class hi extends pi{constructor(t){super(t)}_toggleState(){let t=this.maximize;if(this.maximize=!this.maximize,this.toggleFocusableElement(this.bellButton,!t),this.toggleFocusableElement(this.closeButton,t),this.toggleFocusableElement(this.subscribeButton,t),this.bellButton.setAttribute("aria-expanded",String(t)),this.closeButton.setAttribute("aria-expanded",String(t)),t){this.toastContent.style.display="block",this.toast.classList.add(c.MAXIMIZE);(new P).config.optin_report_enabled&&window.poAnalytics.track("FlyoutWidgetMobileOpened")}else this.toastContent.style.display="none",this.toast.classList.remove(c.MAXIMIZE);setTimeout((()=>{(t?this.subscribeButton:this.bellButton).focus()}),1e3)}_createNode(){var t,e,n,i,o;let s,r=this.config.mobile,a=this.config.color,l=(null===(e=null===(t=this.state)||void 0===t?void 0:t.theme)||void 0===e?void 0:e.primaryColor)||"white",c=(null===(i=null===(n=this.state)||void 0===n?void 0:n.theme)||void 0===i?void 0:i.secondaryColor)||a,u=(null===(o=this.state.position)||void 0===o?void 0:o.mobile)||"bottom-left",{top:d,bottom:p,left:h,right:m,isCustomConfig:b}=Q({position:u,device:"mobile",customConfig:r,isExpanded:!1});return b&&(u="bottom-left"),s=`\n      <div class="pushowl-widget-node pushowl-widget-node--mobile">\n        <style>\n          .action-button{\n              cursor: pointer;\n              padding: initial;\n              min-height: initial;\n          }\n          .pushowl-simple-toast {\n              position: fixed;\n              /*\n              Since custom config set through Owly can have different values for the bottom.\n              We set the bottom to 8px if it has value in the expanded state\n              */\n              bottom: ${p?"8px":""};\n              top: ${d};\n              left: 8px;\n              right: 8px;\n              z-index: 2147483647;\n              box-sizing: border-box;\n          }\n          .pushowl-simple-toast * {\n              -webkit-tap-highlight-color: rgba(0, 0, 0, 0) !important;\n          }\n\n          .pushowl-simple-toast button {\n            margin: 0 !important;\n            text-transform: none !important;\n            min-width: auto !important;\n            box-shadow: none !important;\n          }\n          \n          .pushowl-bell-button {\n              position: absolute;\n              top: ${d?b?d:"0px":null};\n              bottom: ${p||null};\n              left: ${h||null};\n              right: ${m||null};\n              z-index: 2147483647;\n              width: ${r.diameter}px;\n              height: ${r.diameter}px;\n              box-sizing: border-box;\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              border-radius: 12px;\n              color: ${l};\n              background: ${c} !important;\n              box-shadow: 2px 2px 8px 0 rgba(0,0,0,0.35) !important;\n              border: 0 !important;\n              transition: all 1s ease-in;\n          }\n          .pushowl-close-button {\n              padding: 6px;\n              line-height: 12px;\n              border: 0;\n              background: none;\n              \n              /* bring it just above the bell icon */\n              position: relative;\n              top: -4px;\n              right: -2px;\n              width: auto;\n              height: auto;\n          }\n          .pushowl-close-button #ic_close{\n              fill: ${l};\n          }\n          .pushowl-widget-background {\n              position: absolute;\n              top: ${d?b?d:"0px":null};\n              bottom: ${p||null};\n              left: ${h||null};\n              right: ${m||null};\n              z-index: 2147483646;\n              width: ${r.diameter}px;\n              height: ${r.diameter}px;\n              box-sizing: border-box;\n              border-radius: 12px;\n              background: ${c} !important;\n              transition: all 1s ease;\n          }\n          .pushowl-simple-toast__content {\n              box-shadow: 2px 2px 8px 0 rgba(0,0,0,0.35);\n              background: ${c};\n              font-family: Roboto, sans-serif;\n              padding: 13px;\n              opacity: 0;\n              transition: opacity 0.5s ease;\n              z-index: 2147483647;\n              visibility: collapse;\n              border-radius: 12px;\n              display: none;\n          }\n          .pushowl-content-upper-section {\n              display: flex;\n              justify-content: space-between;\n          }\n          .pushowl-simple-toast__title {\n              color: ${l};\n              font-size: 14px;\n              line-height: 14px;\n              padding: 5px;\n              margin-right: 16px;\n          }\n          .pushowl-simple-toast__yes-button-container {\n              margin-top: 20px;\n              display: flex;\n              justify-content: flex-end;\n              width: 100%;\n          }\n          .pushowl-simple-toast__yes-button {\n              font-size: 13px;\n              line-height: 13px;\n              color: ${c};\n              min-width: 100px;\n              cursor: pointer;\n              text-align: center;\n              max-width: 150px;\n              padding: 12px;\n              background-color: ${l};\n              letter-spacing: .3px;\n              border-radius: 4px;\n              text-transform: uppercase;\n              border: 0;\n              height: auto;\n              width: auto;\n          }\n          /*Minimize to Maximize Transition*/\n          .maximize .pushowl-bell-button {\n              animation: fade-out-animation 0.3s ease-in-out forwards\n          }\n          .maximize .pushowl-widget-background {\n              animation: bg-expand-animation 0.5s ease-in-out forwards, fade-out-animation 0.1s 0.8s ease-in-out forwards;\n          }\n          .maximize .pushowl-simple-toast__content {\n              animation: fade-in-animation 0.3s 0.5s ease-in-out forwards;\n          }\n          /* Maximize to Minimize Transition*/\n          .minimize .pushowl-simple-toast__content {\n              animation: fade-out-animation 0.3s ease-in-out forwards\n          }\n          .minimize .pushowl-widget-background {\n              animation: fade-in-animation 0.3s ease-in-out forwards;\n              animation-direction: reverse;\n          }\n          /* Disable animations */\n          @media (prefers-reduced-motion: reduce) {\n            .maximize .pushowl-bell-button,\n            .maximize .pushowl-widget-background,\n            .maximize .pushowl-simple-toast__content,\n            .minimize .pushowl-simple-toast__content,\n            .minimize .pushowl-widget-background {\n              animation-duration: 0s;\n              animation-delay: 0s;\n            }\n          }\n          @keyframes fade-out-animation {\n              0% {\n                  opacity: 1;\n                  visibility: visible;\n              }\n              100% {\n                  opacity: 0;\n                  visibility: collapse;\n              }\n          }\n          @keyframes fade-in-animation {\n              0% {\n                  opacity: 0;\n                  visibility: collapse;\n              }\n              100% {\n                  opacity: 1;\n                  visibility: visible;\n              }\n          }\n          @keyframes bg-expand-animation {\n              to {\n                  /*\n                   Setting the final position based on the position.\n                   For bottom-left it will set bottom:0; left:0;\n                   FIXME: this can be removed when bell is aligned to its container\n                  */\n                    ${u.split("-").map((t=>`${t}:0`)).join(";")};\n                  width: 100%;\n                  height: 100%;\n                  z-index: 0;\n              }\n          }\n          .pushowl-widget-node svg {\n              width: 14px;\n              height: 18px;\n              vertical-align: baseline;\n              transition: auto;\n          }\n        </style>\n        <div class="pushowl-simple-toast">\n          <button\n            class="js-pushowl-bell-button pushowl-bell-button bell-button action-button"\n            aria-label="Open"\n            aria-expanded="false"\n            aria-controls="pushowl-simple-toast-content"\n          >\n            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="22" fill="none" class="bell-icon" viewBox="0 0 18 22">\n              <path fill=${l} d="M8.533 0c-.589 0-1.066.478-1.066 1.067v1.066c0 .022 0 .044.002.066A8.535 8.535 0 0 0 0 10.667v5.584c0 1.04.843 1.882 1.882 1.882h13.302c1.04 0 1.882-.843 1.882-1.882v-5.585A8.535 8.535 0 0 0 9.598 2.2l.002-.066V1.067C9.6.477 9.122 0 8.533 0ZM8.533 21.333a2.133 2.133 0 0 0 2.133-2.133H6.4c0 1.178.955 2.133 2.133 2.133Z"/>\n            </svg>\n          </button>\n          <div class="pushowl-widget-background"></div>\n          <div\n            id="js-pushowl-simple-toast-content"\n            class="pushowl-simple-toast__content"\n          >\n            <div class="pushowl-content-upper-section">\n              <div class="pushowl-simple-toast__title"></div>\n              <button\n                class="js-pushowl-close-button action-button pushowl-close-button"\n                aria-label="Close"\n                tabindex="-1"\n                aria-hidden="true"\n                aria-expanded="false"\n                aria-controls="pushowl-simple-toast-content"\n              >\n                <svg\n                  width="12px"\n                  height="12px"\n                  viewBox="0 0 12 12"\n                  version="1.1"\n                  xmlns="http://www.w3.org/2000/svg"\n                  xmlns:xlink="http://www.w3.org/1999/xlink"\n                >\n                  <g\n                    stroke="none"\n                    stroke-width="1"\n                    fill="none"\n                    fill-rule="evenodd"\n                  >\n                    <g id="ic_close" transform="translate(-5.000000, -5.000000)">\n                      <g>\n                        <polygon\n                          points="17 6.20857143 15.7914286 5 11 9.79142857 6.20857143 5 5 6.20857143 9.79142857 11 5 15.7914286 6.20857143 17 11 12.2085714 15.7914286 17 17 15.7914286 12.2085714 11"\n                        ></polygon>\n                      </g>\n                    </g>\n                  </g>\n                </svg>\n              </button>\n            </div>\n            <div class="pushowl-simple-toast__yes-button-container">\n              <button\n                class="js-subscribe-button  pushowl-simple-toast__yes-button"\n                tabindex="-1"\n              ></button>\n            </div>\n          </div>\n        </div>\n      </div>\n    `,tt(s)}}class mi extends pi{constructor(t){super(t)}_toggleState(){var t;const e=new P;var n=this.maximize;this.maximize=!this.maximize,this.toast.classList[n?"add":"remove"]("is-maximized"),n&&e.config.optin_report_enabled&&window.poAnalytics.track("FlyoutWidgetDesktopOpened");let i=this.config.desktop;const o=(null===(t=this.state.position)||void 0===t?void 0:t.default)||"bottom-left";let{left:s,right:r}=Q({position:o,device:"desktop",customConfig:i,isExpanded:n});this.toast.style.left=s,this.toast.style.right=r,this.toggleFocusableElement(this.bellButton,!n),this.toggleFocusableElement(this.closeButton,n),this.toggleFocusableElement(this.subscribeButton,n),this.bellButton.setAttribute("aria-expanded",String(n)),this.closeButton.setAttribute("aria-expanded",String(n)),this.contentWrap.setAttribute("aria-hidden",String(!n)),setTimeout((()=>{this.closeButton.style.opacity=n?"1":"0",this.bellButton.style.opacity=n?"0":"1",(n?this.title:this.bellButton).focus()}),400)}_createNode(){var t,e,n,i,o;let s=this.config.desktop,r=this.config.color;const a=(null===(t=this.state.position)||void 0===t?void 0:t.default)||"bottom-left";let{top:l,bottom:c,left:u,right:d}=Q({position:a,device:"desktop",customConfig:s,isExpanded:!1}),p=(null===(n=null===(e=this.state)||void 0===e?void 0:e.theme)||void 0===n?void 0:n.primaryColor)||"white",h=(null===(o=null===(i=this.state)||void 0===i?void 0:i.theme)||void 0===o?void 0:o.secondaryColor)||r;const m=`\n      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="22" fill="none" class="bell-icon">\n        <path fill="${p}" d="M8.533 0c-.589 0-1.066.478-1.066 1.067v1.066c0 .022 0 .044.002.066A8.535 8.535 0 0 0 0 10.667v5.584c0 1.04.843 1.882 1.882 1.882h13.302c1.04 0 1.882-.843 1.882-1.882v-5.585A8.535 8.535 0 0 0 9.598 2.2l.002-.066V1.067C9.6.477 9.122 0 8.533 0ZM8.533 21.333a2.133 2.133 0 0 0 2.133-2.133H6.4c0 1.178.955 2.133 2.133 2.133Z"/>\n      </svg>\n    `;let b;return b=`<div class="pushowl-widget-node pushowl-widget-node--desktop">\n    <style>    \n        .pushowl-simple-toast {\n            z-index: 2147483646;\n            top:${l};\n            bottom: ${c};\n            left: ${u};\n            right: ${d};\n            position: fixed;\n            height: ${s.diameter}px;\n            box-sizing: border-box;\n            background: ${h};\n            font-family: Roboto, sans-serif;\n            display: flex;\n            align-items: center;\n            box-shadow: 2px 2px 8px 0 rgba(0,0,0,0.35);\n            max-width: ${s.diameter}px;\n            transition: max-width 0.8s, left 0.6s;\n            border-radius: 12px;\n            overflow: hidden;\n        }\n\n        .pushowl-simple-toast button {\n          margin: 0 !important;\n          text-transform: none !important;\n          min-width: auto !important;\n          box-shadow: none !important;\n        }\n        \n        .is-maximized.pushowl-simple-toast {\n            max-width: 568px;\n        }\n        .is-maximized .pushowl-simple-toast__content{            \n            margin-left: 0;\n        }\n        .is-maximized .pushowl-simple-toast__title-container .bell-icon {\n          opacity: 1;\n        }\n        .pushowl-simple-toast__content {\n            display: flex;\n            align-items: center;\n            max-width: 0;\n            justify-content: space-between;\n            transition: max-width 0.8s;\n        }\n        .is-maximized .pushowl-simple-toast__content{\n          max-width: 524px;\n        }\n        .pushowl-simple-toast__title {\n            width: 282px;\n            color: ${p}; \n            font-size: 14px; \n            line-height: 14px;\n            padding-left: 8px;\n            opacity: 0;\n        }\n        .is-maximized .pushowl-simple-toast__title {         \n          opacity: 1;\n          transition: 0.25s opacity;\n        }\n        .pushowl-simple-toast__title-container{\n            display: flex;\n            align-items: center;\n            padding-left: 25px; \n            padding-right: 25px;\n        }\n        .pushowl-simple-toast__yes-button {\n            font-size: 14px;\n            line-height: 14px;\n            color: ${h};\n            background-color:${p} !important;\n            min-width: 100px;\n            cursor: pointer;\n            padding-right: 25px;\n            max-width: 150px;\n            letter-spacing: .3px;\n            text-transform: uppercase;\n            font-weight: 600;\n            border: 0;\n            flex-shrink: 0;\n            padding: 12px;\n            border-radius: 12px;\n            height: auto;\n            width: auto;\n        }\n        .pushowl-simple-toast__yes-button:hover{\n          color: ${h} !important;\n          background-color:${p} !important;\n        }\n\n        .pushowl-simple-toast__action-buttons {\n            height: 100%;\n        }\n        \n        .pushowl-simple-toast__action-buttons button {\n            padding: initial;\n            width: ${s.diameter}px;\n            height: 100%;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            transition: opacity 0.3s;\n            border: 0 !important;\n            cursor: pointer !important;\n            will-change: opacity;\n            border-radius: 12px !important;\n        }\n        .pushowl-simple-toast__action-buttons .pushowl-bell-button {\n            background-color: ${h};\n            opacity: 1;\n            border-radius: 12px !important;\n            padding: 0 !important;\n        }\n        .pushowl-simple-toast__title-container .bell-icon {\n          flex-shrink: 0;\n          opacity: 0;\n          transition: 0.25s opacity;\n        }\n        .pushowl-simple-toast__action-buttons .pushowl-close-button {\n            position: absolute;\n            font-size: 16px;\n            line-height: 16px !important;\n            color: ${p};\n            background-color: ${h};\n            opacity: 0;\n        }\n        \n        .pushowl-simple-toast__action-buttons svg {\n            width: 14px;\n            height: 18px;\n            vertical-align: baseline;\n            transition: auto;\n        }\n        \n        .pushowl-bell-button svg{\n          width: 18px;\n          height: 20px;\n        }\n        .pushowl-simple-toast__action-buttons .pushowl-close-button g,\n        .pushowl-simple-toast__action-buttons .pushowl-bell-button g {\n            fill: ${p};\n            transition: auto;\n        }\n        /* Disable animations */\n        @media (prefers-reduced-motion: reduce) {\n          .pushowl-simple-toast,\n          .pushowl-simple-toast__content,\n          .is-maximized .pushowl-simple-toast__title,\n          .pushowl-simple-toast__action-buttons button,\n          .pushowl-simple-toast__title-container .bell-icon\n           {\n            transition: none;\n          }\n        }\n    </style>\n    <div class="pushowl-simple-toast">\n        <div id="pushowl-simple-toast-content" class="pushowl-simple-toast__content js-pushowl-widget-content" aria-hidden="true">\n            <div class="pushowl-simple-toast__title-container">\n                ${m}\n                <div class="pushowl-simple-toast__title" tabindex="-1"></div>\n            </div>\n            <button class="js-subscribe-button pushowl-simple-toast__yes-button" tabindex="-1" aria-hidden="true"></button>\n        </div>\n        <div class="pushowl-simple-toast__action-buttons action-button">\n            <button class="js-pushowl-close-button pushowl-close-button" aria-label="Close" tabindex="-1" aria-hidden="true"  aria-expanded="false" aria-controls="pushowl-simple-toast-content">\n              <svg width="12px" height="12px" viewBox="0 0 12 12" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                  <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                      <g transform="translate(-5.000000, -5.000000)">\n                        <g>\n                          <polygon points="17 6.20857143 15.7914286 5 11 9.79142857 6.20857143 5 5 6.20857143 9.79142857 11 5 15.7914286 6.20857143 17 11 12.2085714 15.7914286 17 17 15.7914286 12.2085714 11"></polygon>\n                        </g>\n                      </g>\n                  </g>\n              </svg>\n            </button>\n            \x3c!-- bell-buttn is kept for legacy purposes. --\x3e\n            <button class="js-pushowl-bell-button pushowl-bell-button bell-button" aria-label="Open" aria-expanded="false" aria-controls="pushowl-simple-toast-content" />\n              ${m}\n            </button>\n        </div>\n    </div>\n</div>\n        `,tt(b)}}var bi=Object.freeze({__proto__:null,FlyoutWidgetHandler:class{constructor(t){let e=et()?hi:mi;this.widget=new e(t)}setState(t){this.widget.setState(t)}remove(){this.widget.remove()}}})}();
